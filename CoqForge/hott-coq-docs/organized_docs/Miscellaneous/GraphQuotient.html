<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>GraphQuotient</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library GraphQuotient</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Basics.Overture</span> <span class="id" title="var">Basics.Tactics</span> <span class="id" title="var">Basics.PathGroupoids</span> <span class="id" title="var">Basics.Equivalences</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Types.Universe</span> <span class="id" title="var">Types.Paths</span> <span class="id" title="var">Types.Arrow</span> <span class="id" title="var">Types.Sigma</span> <span class="id" title="var">Cubical.DPath</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1036"></a><h1 class="section">Quotient of a graph</h1>

<div class="paragraph"> </div>

<a id="lab1037"></a><h2 class="section">Definition</h2>

<div class="paragraph"> </div>

 The quotient of a graph is one of the simplest HITs that can be found in HoTT. It consists of a base type and a relation on it, and for every witness of a relation between two points of the type, a path.

<div class="paragraph"> </div>

We use graph quotients to build up all our other non-recursive HITs. Their simplicity means that we can easily prove results about them and generalise them to other HITs. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Unset</span> <span class="id" title="var">Elimination</span> <span class="id" title="var">Schemes</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Export</span> <span class="id" title="var">GraphQuotient</span>.<br/>
&nbsp;<span class="id" title="keyword">Section</span> <span class="id" title="var">GraphQuotient</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Universes</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">u</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Constraint</span> <span class="id" title="var">i</span> &lt;= <span class="id" title="var">u</span>, <span class="id" title="var">j</span> &lt;= <span class="id" title="var">u</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">A</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Private Inductive</span> <span class="id" title="var">GraphQuotient</span> (<span class="id" title="var">R</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">Type@</span>{<span class="id" title="var">j</span>}) : <span class="id" title="var">Type@</span>{<span class="id" title="var">u</span>} :=<br/>
&nbsp;&nbsp;| <span class="id" title="var">gq</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">GraphQuotient</span> <span class="id" title="var">R</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <span class="id" title="var">gq</span> {<span class="id" title="var">R</span>} <span class="id" title="var">a</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">R</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">Type@</span>{<span class="id" title="var">j</span>}}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <span class="id" title="var">gqglue</span> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">a</span> <span class="id" title="var">b</span> : <span class="id" title="var">A</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">paths</span> (@<span class="id" title="var">gq</span> <span class="id" title="var">R</span> <span class="id" title="var">a</span>) (<span class="id" title="var">gq</span> <span class="id" title="var">b</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">GraphQuotient_ind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">P</span> : <span class="id" title="var">GraphQuotient</span> <span class="id" title="var">R</span> -&gt; <span class="id" title="var">Type@</span>{<span class="id" title="var">k</span>})<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">gq'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> (<span class="id" title="var">gq</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">gqglue'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> (<span class="id" title="var">s</span> : <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>), <span class="id" title="var">gqglue</span> <span class="id" title="var">s</span> # <span class="id" title="var">gq'</span> <span class="id" title="var">a</span> = <span class="id" title="var">gq'</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">x</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">gq</span> <span class="id" title="var">a</span> =&gt; <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">gq'</span> <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="var">gqglue'</span>.<br/>
</div>

<div class="doc">
Above we did a match with output type a function, and then outside of the match we provided the argument <span class="inlinecode"><span class="id" title="var">gqglue'</span></span>.  If we instead end with <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">gq</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode">=&gt;</span> <span class="inlinecode"><span class="id" title="var">gq'</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="keyword">end</span>.</span>, the definition will not depend on <span class="inlinecode"><span class="id" title="var">gqglue'</span></span>, which would be incorrect.  This is the idiom referred to in ../../test/bugs/github1758.v and github1759.v. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <span class="id" title="var">GraphQuotient_ind_beta_gqglue</span><br/>
&nbsp;&nbsp;: <span class="id" title="keyword">forall</span> (<span class="id" title="var">P</span> : <span class="id" title="var">GraphQuotient</span> <span class="id" title="var">R</span> -&gt; <span class="id" title="var">Type@</span>{<span class="id" title="var">k</span>})<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">gq'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> (<span class="id" title="var">gq</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">gqglue'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> (<span class="id" title="var">s</span> : <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>), <span class="id" title="var">gqglue</span> <span class="id" title="var">s</span> # <span class="id" title="var">gq'</span> <span class="id" title="var">a</span> = <span class="id" title="var">gq'</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">a</span> <span class="id" title="var">b</span>: <span class="id" title="var">A</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apD</span> (<span class="id" title="var">GraphQuotient_ind</span> <span class="id" title="var">P</span> <span class="id" title="var">gq'</span> <span class="id" title="var">gqglue'</span>) (<span class="id" title="var">gqglue</span> <span class="id" title="var">s</span>) = <span class="id" title="var">gqglue'</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">s</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">End</span> <span class="id" title="var">GraphQuotient</span>.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">GraphQuotient</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">gq</span> {<span class="id" title="var">A</span> <span class="id" title="var">R</span>} <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">GraphQuotient_rec</span> {<span class="id" title="var">A</span> <span class="id" title="var">R</span> <span class="id" title="var">P</span>} (<span class="id" title="var">c</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span>) (<span class="id" title="var">g</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">c</span> <span class="id" title="var">a</span> = <span class="id" title="var">c</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">GraphQuotient</span> <span class="id" title="var">R</span> -&gt; <span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">srapply</span> <span class="id" title="var">GraphQuotient_ind</span>.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">exact</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">transport_const</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> @ <span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">s</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">GraphQuotient_rec_beta_gqglue</span> {<span class="id" title="var">A</span> <span class="id" title="var">R</span> <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span>) (<span class="id" title="var">g</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">c</span> <span class="id" title="var">a</span> = <span class="id" title="var">c</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">a</span> <span class="id" title="var">b</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap</span> (<span class="id" title="var">GraphQuotient_rec</span> <span class="id" title="var">c</span> <span class="id" title="var">g</span>) (<span class="id" title="var">gqglue</span> <span class="id" title="var">s</span>) = <span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">s</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">GraphQuotient_rec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">cancelL</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">apD_const</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">rapply</span> <span class="id" title="var">GraphQuotient_ind_beta_gqglue</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1038"></a><h2 class="section">The flattening lemma</h2>

<div class="paragraph"> </div>

 Univalence tells us that type families over a colimit correspond to cartesian families over the indexing diagram.  The flattening lemma gives an explicit description of the family over a colimit that corresponds to a given cartesian family, again using univalence.  Together, these are known as descent, a fundamental result in higher topos theory which has many implications. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">Flattening</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">Univalence</span>} {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">R</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>}.<br/>
</div>

<div class="doc">
We consider a type family over <span class="inlinecode"><span class="id" title="var">A</span></span> which is "equifibrant" or "cartesian": the fibers are equivalent when the base points are related by <span class="inlinecode"><span class="id" title="var">R</span></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<span class="id" title="var">F</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) (<span class="id" title="var">e</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> -&gt; <span class="id" title="var">F</span> <span class="id" title="var">x</span> &lt;~&gt; <span class="id" title="var">F</span> <span class="id" title="var">y</span>).<br/>

<br/>
</div>

<div class="doc">
By univalence, the equivalences give equalities, which means that <span class="inlinecode"><span class="id" title="var">F</span></span> induces a map on the quotient. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">DGraphQuotient</span> : <span class="id" title="var">GraphQuotient</span> <span class="id" title="var">R</span> -&gt; <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">GraphQuotient_rec</span> <span class="id" title="var">F</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> =&gt; <span class="id" title="var">path_universe</span> (<span class="id" title="var">e</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>)).<br/>

<br/>
</div>

<div class="doc">
The transport of <span class="inlinecode"><span class="id" title="var">DGraphQuotient</span></span> along <span class="inlinecode"><span class="id" title="var">gqglue</span></span> equals the equivalence <span class="inlinecode"><span class="id" title="var">e</span></span> applied to the original point. This lemma is required a few times in the following proofs. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_DGraphQuotient</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span>} (<span class="id" title="var">s</span> : <span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">F</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">transport</span> <span class="id" title="var">DGraphQuotient</span> (<span class="id" title="var">gqglue</span> <span class="id" title="var">s</span>) <span class="id" title="var">a</span> = <span class="id" title="var">e</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">transport_idmap_ap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> (<span class="id" title="var">transport2</span> <span class="id" title="var">idmap</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> <span class="id" title="var">GraphQuotient_rec_beta_gqglue</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rapply</span> <span class="id" title="var">transport_path_universe</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The family <span class="inlinecode"><span class="id" title="var">DGraphQuotient</span></span> we have defined over <span class="inlinecode"><span class="id" title="var">GraphQuotient</span></span> <span class="inlinecode"><span class="id" title="var">R</span></span> has a total space which we will describe as a <span class="inlinecode"><span class="id" title="var">GraphQuotient</span></span> of <span class="inlinecode"><span class="id" title="var">sig</span></span> <span class="inlinecode"><span class="id" title="var">F</span></span> by an appropriate relation. 
<div class="paragraph"> </div>

 We mimic the constructors of <span class="inlinecode"><span class="id" title="var">GraphQuotient</span></span> for the total space. Here is the point constructor. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">flatten_gq</span> {<span class="id" title="var">x</span>} : <span class="id" title="var">F</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">sig</span> <span class="id" title="var">DGraphQuotient</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">gq</span> <span class="id" title="var">x</span>; <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
And here is the path constructor. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">flatten_gqglue</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span>} (<span class="id" title="var">s</span> : <span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">F</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">flatten_gq</span> <span class="id" title="var">a</span> = <span class="id" title="var">flatten_gq</span> (<span class="id" title="var">e</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">path_sigma'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">gqglue</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">transport_DGraphQuotient</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
This lemma is the same as <span class="inlinecode"><span class="id" title="var">transport_DGraphQuotient</span></span> but adapted instead for <span class="inlinecode"><span class="id" title="var">DPath</span></span>. The use of <span class="inlinecode"><span class="id" title="var">DPath</span></span> will be apparent there. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">equiv_dp_dgraphquotient</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">F</span> <span class="id" title="var">x</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">F</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">DPath</span> <span class="id" title="var">DGraphQuotient</span> (<span class="id" title="var">gqglue</span> <span class="id" title="var">s</span>) <span class="id" title="var">a</span> <span class="id" title="var">b</span> &lt;~&gt; (<span class="id" title="var">e</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> <span class="id" title="var">a</span> = <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">equiv_concat_l</span> <span class="id" title="var">_</span>^ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">transport_DGraphQuotient</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
We can also prove an induction principle for <span class="inlinecode"><span class="id" title="var">sig</span></span> <span class="inlinecode"><span class="id" title="var">DGraphQuotient</span></span>. We won't show that it satisfies the relevant computation rules as these will not be needed. Instead we will prove the non-dependent eliminator directly so that we can better reason about it. In order to get through the path algebra here, we have opted to use dependent paths. This makes the reasoning slightly easier, but it should not matter too much. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">flatten_ind</span> {<span class="id" title="var">Q</span> : <span class="id" title="var">sig</span> <span class="id" title="var">DGraphQuotient</span> -&gt; <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Qgq</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> (<span class="id" title="var">x</span> : <span class="id" title="var">F</span> <span class="id" title="var">a</span>), <span class="id" title="var">Q</span> (<span class="id" title="var">flatten_gq</span> <span class="id" title="var">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Qgqglue</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> (<span class="id" title="var">s</span> : <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">F</span> <span class="id" title="var">a</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">flatten_gqglue</span> <span class="id" title="var">s</span> <span class="id" title="var">x</span> # <span class="id" title="var">Qgq</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> = <span class="id" title="var">Qgq</span> <span class="id" title="var">_</span> (<span class="id" title="var">e</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">Q</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">sig_ind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">GraphQuotient_ind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="tactic">exact</span> <span class="id" title="var">Qgq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">dp_forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">srapply</span> (<span class="id" title="var">equiv_ind</span> (<span class="id" title="var">equiv_dp_dgraphquotient</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">s</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)^-1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">transport2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> @ <span class="id" title="var">Qgqglue</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">s</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">ap</span> (<span class="id" title="var">path_sigma_uncurried</span> <span class="id" title="var">DGraphQuotient</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">path_sigma</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">concat_p1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">inv_V</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Rather than use <span class="inlinecode"><span class="id" title="var">flatten_ind</span></span> to define <span class="inlinecode"><span class="id" title="var">flatten_rec</span></span> we reprove this simple case. This means we can later reason about it and derive the computation rules easily. The full computation rule for <span class="inlinecode"><span class="id" title="var">flatten_ind</span></span> takes some work to derive and is not actually needed. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">flatten_rec</span> {<span class="id" title="var">Q</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">Qgq</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">F</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="var">Q</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Qgqglue</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> (<span class="id" title="var">s</span> : <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">F</span> <span class="id" title="var">a</span>), <span class="id" title="var">Qgq</span> <span class="id" title="var">a</span> <span class="id" title="var">x</span> = <span class="id" title="var">Qgq</span> <span class="id" title="var">b</span> (<span class="id" title="var">e</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">s</span> <span class="id" title="var">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">sig</span> <span class="id" title="var">DGraphQuotient</span> -&gt; <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">sig_rec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">GraphQuotient_ind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="tactic">exact</span> <span class="id" title="var">Qgq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nrapply</span> <span class="id" title="var">dpath_arrow</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">transport_const</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> (<span class="id" title="var">Qgqglue</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f_ap</span>; <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">transport_DGraphQuotient</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The non-dependent eliminator computes as expected on our "path constructor". 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">flatten_rec_beta_gqglue</span> {<span class="id" title="var">Q</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">Qgq</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">F</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="var">Q</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Qgqglue</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> (<span class="id" title="var">r</span> : <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">F</span> <span class="id" title="var">a</span>), <span class="id" title="var">Qgq</span> <span class="id" title="var">a</span> <span class="id" title="var">x</span> = <span class="id" title="var">Qgq</span> <span class="id" title="var">b</span> (<span class="id" title="var">e</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">r</span> <span class="id" title="var">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">a</span> <span class="id" title="var">b</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">F</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">ap</span> (<span class="id" title="var">flatten_rec</span> <span class="id" title="var">Qgq</span> <span class="id" title="var">Qgqglue</span>) (<span class="id" title="var">flatten_gqglue</span> <span class="id" title="var">s</span> <span class="id" title="var">x</span>) = <span class="id" title="var">Qgqglue</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">s</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">ap_sig_rec_path_sigma</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">x</span> @ <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">nrapply</span> <span class="id" title="var">ap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nrapply</span> (<span class="id" title="var">ap01</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">ap10</span> <span class="id" title="var">x</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nrapply</span> <span class="id" title="var">GraphQuotient_ind_beta_gqglue</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_pM</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveL_pM</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">concat_pp_p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_Vp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="tactic">refine</span> (1 @@ (1 @@ (<span class="id" title="var">_</span> @@ 1))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="var">nrapply</span> (<span class="id" title="var">ap10_dpath_arrow</span> <span class="id" title="var">DGraphQuotient</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">Q</span>) (<span class="id" title="var">gqglue</span> <span class="id" title="var">s</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="tactic">refine</span> (1 @@ (1 @@ <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">concat_pp_p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nrapply</span> <span class="id" title="var">concat_pp_p</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> (1 @@ <span class="id" title="var">concat_V_pp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">concat_V_pp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">concat_pp_p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f_ap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">concat_pp_p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_Mp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">concat_Vp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_pV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">concat_1p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nrapply</span> <span class="id" title="var">ap_V</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Now that we've shown that <span class="inlinecode"><span class="id" title="var">sig</span></span> <span class="inlinecode"><span class="id" title="var">DGraphQuotient</span></span> acts like a <span class="inlinecode"><span class="id" title="var">GraphQuotient</span></span> of <span class="inlinecode"><span class="id" title="var">sig</span></span> <span class="inlinecode"><span class="id" title="var">F</span></span> by an appropriate relation, we can use this to prove the flattening lemma. The maps back and forth are very easy so this could almost be a formal consequence of the induction principle. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">equiv_gq_flatten</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">sig</span> <span class="id" title="var">DGraphQuotient</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;~&gt; <span class="id" title="var">GraphQuotient</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> =&gt; {<span class="id" title="var">r</span> : <span class="id" title="var">R</span> <span class="id" title="var">a</span>.1 <span class="id" title="var">b</span>.1 &amp; <span class="id" title="var">e</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">r</span> <span class="id" title="var">a</span>.2 = <span class="id" title="var">b</span>.2}).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">equiv_adjointify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">snrapply</span> <span class="id" title="var">flatten_rec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">gq</span> (<span class="id" title="var">a</span>; <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">r</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">gqglue</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">snrapply</span> <span class="id" title="var">GraphQuotient_rec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> '(<span class="id" title="var">a</span>; <span class="id" title="var">x</span>) =&gt; (<span class="id" title="var">gq</span> <span class="id" title="var">a</span>; <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">x</span>] [<span class="id" title="var">b</span> <span class="id" title="var">y</span>] [<span class="id" title="var">r</span> <span class="id" title="var">p</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">p</span>, <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">flatten_gqglue</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">snrapply</span> <span class="id" title="var">GraphQuotient_ind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">x</span>] [<span class="id" title="var">b</span> <span class="id" title="var">y</span>] [<span class="id" title="var">r</span> <span class="id" title="var">p</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">p</span>, <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">transport_paths_FFlr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">GraphQuotient_rec_beta_gqglue</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">_</span> @@ 1) @ <span class="id" title="var">concat_Vp</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">concat_p1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">inverse2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nrapply</span> <span class="id" title="var">flatten_rec_beta_gqglue</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">snrapply</span> <span class="id" title="var">flatten_ind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">r</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nrapply</span> (<span class="id" title="var">transport_paths_FFlr'</span> (<span class="id" title="var">g</span> := <span class="id" title="var">GraphQuotient_rec</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_p1_1q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">flatten_rec_beta_gqglue</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">GraphQuotient_rec_beta_gqglue</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">a</span>; <span class="id" title="var">x</span>) (<span class="id" title="var">b</span>; <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">r</span> <span class="id" title="var">x</span>) (<span class="id" title="var">r</span>; 1)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Flattening</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1039"></a><h2 class="section">Functoriality of graph quotients</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">functor_gq</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">R</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="keyword">Type</span>} (<span class="id" title="var">e</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">S</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<span class="id" title="var">f</span> <span class="id" title="var">b</span>))<br/>
&nbsp;&nbsp;: <span class="id" title="var">GraphQuotient</span> <span class="id" title="var">R</span> -&gt; <span class="id" title="var">GraphQuotient</span> <span class="id" title="var">S</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">GraphQuotient_rec</span>.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">gq</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">gqglue</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">functor_gq_idmap</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">R</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">functor_gq</span> (<span class="id" title="var">A</span>:=<span class="id" title="var">A</span>) (<span class="id" title="var">B</span>:=<span class="id" title="var">A</span>) (<span class="id" title="var">S</span>:=<span class="id" title="var">R</span>) <span class="id" title="var">idmap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">r</span> =&gt; <span class="id" title="var">r</span>) == <span class="id" title="var">idmap</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">GraphQuotient_ind</span>.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">nrapply</span> (<span class="id" title="var">transport_paths_FlFr'</span> (<span class="id" title="var">gqglue</span> <span class="id" title="var">r</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_p1_1q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">ap_idmap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">nrapply</span> <span class="id" title="var">GraphQuotient_rec_beta_gqglue</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">functor_gq_compose</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">R</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="keyword">Type</span>} {<span class="id" title="var">T</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">C</span> -&gt; <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">e</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">S</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<span class="id" title="var">f</span> <span class="id" title="var">b</span>)) (<span class="id" title="var">e'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">S</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">T</span> (<span class="id" title="var">g</span> <span class="id" title="var">a</span>) (<span class="id" title="var">g</span> <span class="id" title="var">b</span>))<br/>
&nbsp;&nbsp;: <span class="id" title="var">functor_gq</span> <span class="id" title="var">g</span> <span class="id" title="var">e'</span> <span class="id" title="var">o</span> (<span class="id" title="var">functor_gq</span> <span class="id" title="var">f</span> <span class="id" title="var">e</span>) == <span class="id" title="var">functor_gq</span> (<span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">r</span> =&gt; <span class="id" title="var">e'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">e</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">r</span>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">GraphQuotient_ind</span>.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">nrapply</span> (<span class="id" title="var">transport_paths_FlFr'</span> (<span class="id" title="var">gqglue</span> <span class="id" title="var">s</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_p1_1q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> (<span class="id" title="var">ap_compose</span> (<span class="id" title="var">functor_gq</span> <span class="id" title="var">f</span> <span class="id" title="var">e</span>) (<span class="id" title="var">functor_gq</span> <span class="id" title="var">g</span> <span class="id" title="var">e'</span>) (<span class="id" title="var">gqglue</span> <span class="id" title="var">s</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">ap</span>.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> <span class="id" title="var">GraphQuotient_rec_beta_gqglue</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">GraphQuotient_rec_beta_gqglue</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">GraphQuotient_rec_beta_gqglue</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">s</span>)^.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">functor2_gq</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> <span class="id" title="var">f'</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">R</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">e</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">S</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<span class="id" title="var">f</span> <span class="id" title="var">b</span>)) (<span class="id" title="var">e'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">S</span> (<span class="id" title="var">f'</span> <span class="id" title="var">a</span>) (<span class="id" title="var">f'</span> <span class="id" title="var">b</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">f</span> == <span class="id" title="var">f'</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">q</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">r</span>, <span class="id" title="var">transport011</span> <span class="id" title="var">S</span> (<span class="id" title="var">p</span> <span class="id" title="var">a</span>) (<span class="id" title="var">p</span> <span class="id" title="var">b</span>) (<span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">r</span>) = <span class="id" title="var">e'</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">functor_gq</span> <span class="id" title="var">f</span> <span class="id" title="var">e</span> == <span class="id" title="var">functor_gq</span> <span class="id" title="var">f'</span> <span class="id" title="var">e'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">GraphQuotient_ind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nrapply</span> (<span class="id" title="var">transport_paths_FlFr'</span> (<span class="id" title="var">gqglue</span> <span class="id" title="var">s</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rhs</span> <span class="id" title="var">nrefine</span> (1 @@ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">apply</span> <span class="id" title="var">GraphQuotient_rec_beta_gqglue</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrefine</span> (<span class="id" title="var">_</span> @@ 1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> <span class="id" title="var">GraphQuotient_rec_beta_gqglue</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveL_Mp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">q</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> (<span class="id" title="var">ap_transport011</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">gqglue</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">concat_p_pp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nrapply</span> <span class="id" title="var">transport011_paths</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1040"></a><h2 class="section">Equivalence of graph quotients</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_functor_gq</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">R</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="keyword">Type</span>} (<span class="id" title="var">e</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">S</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<span class="id" title="var">f</span> <span class="id" title="var">b</span>))<br/>
&nbsp;&nbsp;`{<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>)}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">functor_gq</span> <span class="id" title="var">f</span> <span class="id" title="var">e</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">srapply</span> <span class="id" title="var">isequiv_adjointify</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">nrapply</span> (<span class="id" title="var">functor_gq</span> <span class="id" title="var">f</span>^-1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">e</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^-1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">transport011</span> <span class="id" title="var">S</span> (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span>)^ (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> <span class="id" title="var">b</span>)^ <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">functor_gq_compose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rhs_V</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">functor_gq_idmap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">functor2_gq</span>; <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> <span class="id" title="var">eisretr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">eisretr</span> (<span class="id" title="var">e</span> (<span class="id" title="var">f</span>^-1 <span class="id" title="var">a</span>) (<span class="id" title="var">f</span>^-1 <span class="id" title="var">b</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs_V</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">transport011_pp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> 2 <span class="id" title="var">concat_Vp</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">functor_gq_compose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rhs_V</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">functor_gq_idmap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">functor2_gq</span>; <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> <span class="id" title="var">eissect</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2 <span class="id" title="var">eisadj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- 2 <span class="id" title="var">ap_V</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">transport011_compose</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">ap_transport011</span> (<span class="id" title="var">Q</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">S</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) (<span class="id" title="var">f</span> <span class="id" title="var">y</span>)) (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span>)^ (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span> <span class="id" title="var">b</span>)^ <span class="id" title="var">e</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">eissect</span> (<span class="id" title="var">e</span> (<span class="id" title="var">f</span>^-1 (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)) (<span class="id" title="var">f</span>^-1 (<span class="id" title="var">f</span> <span class="id" title="var">b</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs_V</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">transport011_pp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> 2 <span class="id" title="var">concat_Vp</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_functor_gq</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">R</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) (<span class="id" title="var">S</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="keyword">Type</span>) (<span class="id" title="var">e</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> &lt;~&gt; <span class="id" title="var">S</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<span class="id" title="var">f</span> <span class="id" title="var">b</span>))<br/>
&nbsp;&nbsp;: <span class="id" title="var">GraphQuotient</span> <span class="id" title="var">R</span> &lt;~&gt; <span class="id" title="var">GraphQuotient</span> <span class="id" title="var">S</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">Build_Equiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">functor_gq</span> <span class="id" title="var">f</span> <span class="id" title="var">e</span>) <span class="id" title="var">_</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>