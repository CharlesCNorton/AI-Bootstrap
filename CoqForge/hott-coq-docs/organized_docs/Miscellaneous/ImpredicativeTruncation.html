<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>ImpredicativeTruncation</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library ImpredicativeTruncation</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab1200"></a><h1 class="section">Impredicative truncations</h1>

<div class="paragraph"> </div>

 In this file, under the assumptions of propositional resizing <span class="inlinecode"><span class="id" title="var">PropResizing</span></span> and function extensionality <span class="inlinecode"><span class="id" title="var">Funext</span></span>, we define the proposition truncation in any universe. In the main library, these are constructed using HITs. The definitions here are meant to be for illustration. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">HoTT.Basics</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Universes.Smallness</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">path_scope</span>.<br/>

<br/>
</div>

<div class="doc">
Using only function extensionality, we can define a "propositional truncation" <span class="inlinecode"><span class="id" title="var">Trm</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> of a type <span class="inlinecode"><span class="id" title="var">A</span></span> in universe <span class="inlinecode"><span class="id" title="var">i</span></span> which eliminates into propositions in universe <span class="inlinecode"><span class="id" title="var">j</span></span>.  It lands in <span class="inlinecode"><span class="id" title="var">max</span>(<span class="id" title="var">i</span>,<span class="id" title="var">j</span>+1)</span>.  So if we want it to land in universe <span class="inlinecode"><span class="id" title="var">i</span></span>, then we can only eliminate into propositions in a strictly smaller universe <span class="inlinecode"><span class="id" title="var">j</span></span>.  Or, if we want it to eliminate into propositions in universe <span class="inlinecode"><span class="id" title="var">i</span></span>, then it must land in a strictly larger universe. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Trm@</span>{<span class="id" title="var">i</span> <span class="id" title="var">j</span> | } (<span class="id" title="var">A</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>})<br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">forall</span> <span class="id" title="var">P</span>:<span class="id" title="var">Type@</span>{<span class="id" title="var">j</span>}, <span class="id" title="var">IsHProp</span> <span class="id" title="var">P</span> -&gt; (<span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span>) -&gt; <span class="id" title="var">P</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trm@</span>{<span class="id" title="var">i</span> <span class="id" title="var">j</span> | } {<span class="id" title="var">A</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}} : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">Trm@</span>{<span class="id" title="var">i</span> <span class="id" title="var">j</span>} <span class="id" title="var">A</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">P</span> <span class="id" title="var">HP</span> <span class="id" title="var">f</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">a</span>.<br/>

<br/>
</div>

<div class="doc">
Here <span class="inlinecode"><span class="id" title="var">k</span></span> plays the role of <span class="inlinecode"><span class="id" title="var">max</span>(<span class="id" title="var">i</span>,<span class="id" title="var">j</span>+1)</span>. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">ishprop_Trm@</span>{<span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">k</span> | <span class="id" title="var">i</span> &lt;= <span class="id" title="var">k</span>, <span class="id" title="var">j</span> &lt; <span class="id" title="var">k</span>} `{<span class="id" title="var">Funext</span>} (<span class="id" title="var">A</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>})<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsHProp</span> (<span class="id" title="var">Trm@</span>{<span class="id" title="var">i</span> <span class="id" title="var">j</span>} <span class="id" title="var">A</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">nrapply</span> <span class="id" title="var">istrunc_forall@</span>{<span class="id" title="var">k</span> <span class="id" title="var">k</span> <span class="id" title="var">k</span>}; <span class="id" title="tactic">intro</span> <span class="id" title="var">B</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">nrapply</span> <span class="id" title="var">istrunc_forall@</span>{<span class="id" title="var">j</span> <span class="id" title="var">k</span> <span class="id" title="var">k</span>}; <span class="id" title="tactic">intro</span> <span class="id" title="var">ishp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">istrunc_forall@</span>{<span class="id" title="var">k</span> <span class="id" title="var">j</span> <span class="id" title="var">k</span>}.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
As mentioned above, it eliminates into propositions in universe <span class="inlinecode"><span class="id" title="var">j</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Trm_rec@</span>{<span class="id" title="var">i</span> <span class="id" title="var">j</span> | } {<span class="id" title="var">A</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}}<br/>
&nbsp;&nbsp;{<span class="id" title="var">P</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">j</span>}} {<span class="id" title="var">p</span> : <span class="id" title="var">IsHProp@</span>{<span class="id" title="var">j</span>} <span class="id" title="var">P</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">Trm@</span>{<span class="id" title="var">i</span> <span class="id" title="var">j</span>} <span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <span class="id" title="var">ma</span> =&gt; <span class="id" title="var">ma</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">f</span>.<br/>

<br/>
</div>

<div class="doc">
This computes definitionally. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Trm_rec_beta@</span>{<span class="id" title="var">i</span> <span class="id" title="var">j</span> | } {<span class="id" title="var">A</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}}<br/>
&nbsp;&nbsp;{<span class="id" title="var">P</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">j</span>}} `{<span class="id" title="var">IsHProp</span> <span class="id" title="var">P</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">Trm_rec@</span>{<span class="id" title="var">i</span> <span class="id" title="var">j</span>} <span class="id" title="var">f</span> <span class="id" title="var">o</span> <span class="id" title="var">trm</span> == <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">idpath</span>.<br/>

<br/>
</div>

<div class="doc">
Because of the universe constraints, we can't make this into a functor on <span class="inlinecode"><span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}</span>.  We have a universe constraint <span class="inlinecode"><span class="id" title="var">i'</span></span> <span class="inlinecode">&lt;=</span> <span class="inlinecode"><span class="id" title="var">j</span></span> and <span class="inlinecode"><span class="id" title="var">Trm@</span>{<span class="id" title="var">i</span></span> <span class="inlinecode"><span class="id" title="var">j</span>}</span> <span class="inlinecode"><span class="id" title="var">A</span></span> lands in <span class="inlinecode"><span class="id" title="var">max</span>(<span class="id" title="var">i</span>,<span class="id" title="var">j</span>+1)</span>, which is strictly larger. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">functor_Trm@</span>{<span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">i'</span> <span class="id" title="var">j'</span> | <span class="id" title="var">i'</span> &lt;= <span class="id" title="var">j</span>, <span class="id" title="var">j'</span> &lt; <span class="id" title="var">j</span>} `{<span class="id" title="var">Funext</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}} {<span class="id" title="var">A'</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i'</span>}} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">Trm@</span>{<span class="id" title="var">i</span> <span class="id" title="var">j</span>} <span class="id" title="var">A</span> -&gt; <span class="id" title="var">Trm@</span>{<span class="id" title="var">i'</span> <span class="id" title="var">j'</span>} <span class="id" title="var">A'</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">Trm_rec</span> (<span class="id" title="var">trm</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>).<br/>

<br/>
</div>

<div class="doc">
We also record the dependent induction principle.  But it only computes propositionally. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Trm_ind@</span>{<span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">k</span> | <span class="id" title="var">i</span> &lt;= <span class="id" title="var">k</span>, <span class="id" title="var">j</span> &lt; <span class="id" title="var">k</span>} {<span class="id" title="var">A</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}} `{<span class="id" title="var">Funext</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">P</span> : <span class="id" title="var">Trm@</span>{<span class="id" title="var">i</span> <span class="id" title="var">j</span>} <span class="id" title="var">A</span> -&gt; <span class="id" title="var">Type@</span>{<span class="id" title="var">j</span>}} {<span class="id" title="var">p</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">IsHProp@</span>{<span class="id" title="var">j</span>} (<span class="id" title="var">P</span> <span class="id" title="var">x</span>)} (<span class="id" title="var">f</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> (<span class="id" title="var">trm</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Trm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rapply</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">_</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="var">rapply</span> <span class="id" title="var">path_ishprop@</span>{<span class="id" title="var">k</span>}.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The universe constraints go away if we assume propositional resizing. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">AssumePropResizing</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">PropResizing</span>}.<br/>

<br/>
</div>

<div class="doc">
If we assume propositions resizing, then we may as well quantify over propositions in the lowest universe <span class="inlinecode"><span class="id" title="keyword">Set</span></span> when defining the truncation.  This reduces the number of universe variables.  We also assume that <span class="inlinecode"><span class="id" title="keyword">Set</span></span> <span class="inlinecode">&lt;</span> <span class="inlinecode"><span class="id" title="var">i</span></span>, so that the construction lands in universe <span class="inlinecode"><span class="id" title="var">i</span></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">imp_Trm@</span>{<span class="id" title="var">i</span> | <span class="id" title="keyword">Set</span> &lt; <span class="id" title="var">i</span>} (<span class="id" title="var">A</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}) : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">Trm@</span>{<span class="id" title="var">i</span> <span class="id" title="keyword">Set</span>} <span class="id" title="var">A</span>.<br/>

<br/>
</div>

<div class="doc">
Here we use propositional resizing to resize a arbitrary proposition <span class="inlinecode"><span class="id" title="var">P</span></span> from an arbitrary universe <span class="inlinecode"><span class="id" title="var">j</span></span> to universe <span class="inlinecode"><span class="id" title="keyword">Set</span></span>, so there is no constraint on the universe <span class="inlinecode"><span class="id" title="var">j</span></span>.  In particular, we can take <span class="inlinecode"><span class="id" title="var">j</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">i</span></span>, which shows that <span class="inlinecode"><span class="id" title="var">imp_Trm</span></span> is a reflective subuniverse of <span class="inlinecode"><span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}</span>, since any two maps into a proposition agree. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">imp_Trm_rec@</span>{<span class="id" title="var">i</span> <span class="id" title="var">j</span> | <span class="id" title="keyword">Set</span> &lt; <span class="id" title="var">i</span>} {<span class="id" title="var">A</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">P</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">j</span>}} `{<span class="id" title="var">IsHProp</span> <span class="id" title="var">P</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">imp_Trm@</span>{<span class="id" title="var">i</span>} <span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <span class="id" title="var">ma</span> =&gt; (<span class="id" title="var">equiv_smalltype@</span>{<span class="id" title="keyword">Set</span> <span class="id" title="var">j</span>} <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ma</span> (<span class="id" title="var">smalltype@</span>{<span class="id" title="keyword">Set</span> <span class="id" title="var">j</span>} <span class="id" title="var">P</span>) <span class="id" title="var">_</span> ((<span class="id" title="var">equiv_smalltype@</span>{<span class="id" title="keyword">Set</span> <span class="id" title="var">j</span>} <span class="id" title="var">P</span>)^-1 <span class="id" title="var">o</span> <span class="id" title="var">f</span>)).<br/>

<br/>
</div>

<div class="doc">
Similarly, there are no constraints between <span class="inlinecode"><span class="id" title="var">i</span></span> and <span class="inlinecode"><span class="id" title="var">i'</span></span> in the next definition, so they could be taken to be equal. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">functor_imp_Trm@</span>{<span class="id" title="var">i</span> <span class="id" title="var">i'</span> | <span class="id" title="keyword">Set</span> &lt; <span class="id" title="var">i</span>, <span class="id" title="keyword">Set</span> &lt; <span class="id" title="var">i'</span>} `{<span class="id" title="var">Funext</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}} {<span class="id" title="var">A'</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i'</span>}} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">imp_Trm@</span>{<span class="id" title="var">i</span>} <span class="id" title="var">A</span> -&gt; <span class="id" title="var">imp_Trm@</span>{<span class="id" title="var">i'</span>} <span class="id" title="var">A'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">imp_Trm_rec</span> (<span class="id" title="var">trm</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>).<br/>

<br/>
</div>

<div class="doc">
Note that <span class="inlinecode"><span class="id" title="var">imp_Trm_rec</span></span> only computes propositionally. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">imp_Trm_rec_beta@</span>{<span class="id" title="var">i</span> <span class="id" title="var">j</span> | <span class="id" title="keyword">Set</span> &lt; <span class="id" title="var">i</span>} {<span class="id" title="var">A</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">P</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">j</span>}} `{<span class="id" title="var">IsHProp</span> <span class="id" title="var">P</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">imp_Trm_rec@</span>{<span class="id" title="var">i</span> <span class="id" title="var">j</span>} <span class="id" title="var">f</span> <span class="id" title="var">o</span> <span class="id" title="var">trm</span> == <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">imp_Trm_rec</span>, <span class="id" title="var">trm</span>; <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">eisretr@</span>{<span class="id" title="keyword">Set</span> <span class="id" title="var">j</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">AssumePropResizing</span>.<br/>

<br/>
</div>

<div class="doc">
Above, we needed the constraint <span class="inlinecode"><span class="id" title="keyword">Set</span></span> <span class="inlinecode">&lt;</span> <span class="inlinecode"><span class="id" title="var">i</span></span>.  But one can use propositional resizing again to make <span class="inlinecode"><span class="id" title="var">imp_Trm</span></span> land in the lowest universe, if that is needed.  (We'll in fact let it land in any universe <span class="inlinecode"><span class="id" title="var">u</span></span>.)  To do this, we need to assume <span class="inlinecode"><span class="id" title="var">Funext</span></span> in the definition of the truncation itself. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">TruncationWithFunext</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">PropResizing</span>} `{<span class="id" title="var">Funext</span>}.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">Funext</span></span> implies that <span class="inlinecode"><span class="id" title="var">Trm</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> is a proposition, so <span class="inlinecode"><span class="id" title="var">PropResizing</span></span> can be used to put it in any universe. The construction passes through universe <span class="inlinecode"><span class="id" title="var">k</span></span>, which represents <span class="inlinecode"><span class="id" title="var">max</span>(<span class="id" title="var">i</span>,<span class="id" title="keyword">Set</span>+1)</span>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">resized_Trm@</span>{<span class="id" title="var">i</span> <span class="id" title="var">k</span> <span class="id" title="var">u</span> | <span class="id" title="var">i</span> &lt;= <span class="id" title="var">k</span>, <span class="id" title="keyword">Set</span> &lt; <span class="id" title="var">k</span>} (<span class="id" title="var">A</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>})<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">Type@</span>{<span class="id" title="var">u</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">smalltype@</span>{<span class="id" title="var">u</span> <span class="id" title="var">k</span>} (<span class="id" title="var">Trm@</span>{<span class="id" title="var">i</span> <span class="id" title="keyword">Set</span>} <span class="id" title="var">A</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">resized_trm@</span>{<span class="id" title="var">i</span> <span class="id" title="var">k</span> <span class="id" title="var">u</span> | <span class="id" title="var">i</span> &lt;= <span class="id" title="var">k</span>, <span class="id" title="keyword">Set</span> &lt; <span class="id" title="var">k</span>} {<span class="id" title="var">A</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">A</span> -&gt; <span class="id" title="var">resized_Trm@</span>{<span class="id" title="var">i</span> <span class="id" title="var">k</span> <span class="id" title="var">u</span>} <span class="id" title="var">A</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= (<span class="id" title="var">equiv_smalltype</span> <span class="id" title="var">_</span>)^-1 <span class="id" title="var">o</span> <span class="id" title="var">trm</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">resized_Trm_rec@</span>{<span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">k</span> <span class="id" title="var">u</span> | <span class="id" title="var">i</span> &lt;= <span class="id" title="var">k</span>, <span class="id" title="keyword">Set</span> &lt; <span class="id" title="var">k</span>} {<span class="id" title="var">A</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">P</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">j</span>}} `{<span class="id" title="var">IsHProp</span> <span class="id" title="var">P</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">resized_Trm@</span>{<span class="id" title="var">i</span> <span class="id" title="var">k</span> <span class="id" title="var">u</span>} <span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> <span class="id" title="var">o</span> (<span class="id" title="var">equiv_smalltype@</span>{<span class="id" title="var">u</span> <span class="id" title="var">k</span>} <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">ma</span> =&gt; (<span class="id" title="var">equiv_smalltype@</span>{<span class="id" title="keyword">Set</span> <span class="id" title="var">j</span>} <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ma</span> (<span class="id" title="var">smalltype@</span>{<span class="id" title="keyword">Set</span> <span class="id" title="var">j</span>} <span class="id" title="var">P</span>) <span class="id" title="var">_</span> ((<span class="id" title="var">equiv_smalltype@</span>{<span class="id" title="keyword">Set</span> <span class="id" title="var">j</span>} <span class="id" title="var">P</span>)^-1 <span class="id" title="var">o</span> <span class="id" title="var">f</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The beta rule is again propositional. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">resized_Trm_rec_beta@</span>{<span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">k</span> <span class="id" title="var">u</span> | <span class="id" title="var">i</span> &lt;= <span class="id" title="var">k</span>, <span class="id" title="keyword">Set</span> &lt; <span class="id" title="var">k</span>} {<span class="id" title="var">A</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">P</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">j</span>}} `{<span class="id" title="var">IsHProp</span> <span class="id" title="var">P</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">resized_Trm_rec@</span>{<span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">k</span> <span class="id" title="var">u</span>} <span class="id" title="var">f</span> <span class="id" title="var">o</span> <span class="id" title="var">resized_trm</span> == <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">resized_Trm_rec</span>, <span class="id" title="var">resized_trm</span>, <span class="id" title="var">Trm</span>, <span class="id" title="var">trm</span>; <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eisretr@</span>{<span class="id" title="var">u</span> <span class="id" title="var">k</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">eisretr@</span>{<span class="id" title="keyword">Set</span> <span class="id" title="var">j</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">TruncationWithFunext</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>