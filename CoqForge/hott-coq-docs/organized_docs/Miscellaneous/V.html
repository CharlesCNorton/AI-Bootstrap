<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>V</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library V</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab1089"></a><h1 class="section">The cumulative hierarchy <span class="inlinecode"><span class="id" title="var">V</span></span>.</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">HoTT.Basics</span> <span class="id" title="var">HoTT.Types</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">HSet</span> <span class="id" title="var">TruncType</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Colimits.SpanPushout</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">HoTT.Truncations.Core</span> <span class="id" title="var">Colimits.Quotient</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">nat_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">path_scope</span>.<br/>

<br/>
</div>

<div class="doc">
Bitotal relation 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">bitotal</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">R</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">HProp</span>) :=<br/>
&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">A</span>, <span class="id" title="var">hexists</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">b</span> : <span class="id" title="var">B</span>) =&gt; <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>))<br/>
&nbsp;* (<span class="id" title="keyword">forall</span> <span class="id" title="var">b</span> : <span class="id" title="var">B</span>, <span class="id" title="var">hexists</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) =&gt; <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>)).<br/>

<br/>
</div>

<div class="doc">
<a id="lab1090"></a><h2 class="section">The cumulative hierarchy V</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Export</span> <span class="id" title="var">CumulativeHierarchy</span>.<br/>

<br/>
<span class="id" title="keyword">Private Inductive</span> <span class="id" title="var">V@</span>{<span class="id" title="var">U'</span> <span class="id" title="var">U</span> | <span class="id" title="var">U</span> &lt; <span class="id" title="var">U'</span>} : <span class="id" title="var">Type@</span>{<span class="id" title="var">U'</span>} :=<br/>
| <span class="id" title="tactic">set</span> {<span class="id" title="var">A</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">U</span>}} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span>) : <span class="id" title="var">V</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">setext</span> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">R</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">HProp</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">bitot_R</span> : <span class="id" title="var">bitotal</span> <span class="id" title="var">R</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">SPushout</span> <span class="id" title="var">R</span> -&gt; <span class="id" title="var">V</span>),<br/>
<span class="id" title="tactic">set</span> (<span class="id" title="var">h</span> <span class="id" title="var">o</span> (<span class="id" title="var">spushl</span> <span class="id" title="var">R</span>)) = <span class="id" title="tactic">set</span> (<span class="id" title="var">h</span> <span class="id" title="var">o</span> (<span class="id" title="var">spushr</span> <span class="id" title="var">R</span>)).<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">ishset_V</span> : <span class="id" title="var">IsHSet</span> <span class="id" title="var">V</span>.<br/>
<span class="id" title="keyword">Global Existing Instance</span> <span class="id" title="var">ishset_V</span>.<br/>

<br/>
</div>

<div class="doc">
The induction principle.  Annotating the universes here greatly reduces the number of universe variables later in the file.  For example, <span class="inlinecode"><span class="id" title="var">function</span></span> below went from 279 to 3.  If <span class="inlinecode"><span class="id" title="var">V_ind</span></span> needs to be generalized in the future, check <span class="inlinecode"><span class="id" title="var">function</span></span> to make sure things haven't exploded again. 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">V_ind@</span>{<span class="id" title="var">U'</span> <span class="id" title="var">U</span> <span class="id" title="var">u</span> | <span class="id" title="var">U</span> &lt; <span class="id" title="var">U'</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">V@</span>{<span class="id" title="var">U'</span> <span class="id" title="var">U</span>} -&gt; <span class="id" title="var">Type@</span>{<span class="id" title="var">u</span>})<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_0trunc</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">v</span> : <span class="id" title="var">V@</span>{<span class="id" title="var">U'</span> <span class="id" title="var">U</span>}, <span class="id" title="var">IsTrunc</span> 0 (<span class="id" title="var">P</span> <span class="id" title="var">v</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_set</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">U</span>}) (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span>) (<span class="id" title="var">H_f</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">A</span>, <span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)), <span class="id" title="var">P</span> (<span class="id" title="tactic">set</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_setext</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">U</span>}) (<span class="id" title="var">R</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">HProp@</span>{<span class="id" title="var">U</span>}) (<span class="id" title="var">bitot_R</span> : <span class="id" title="var">bitotal</span> <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">h</span> : <span class="id" title="var">SPushout</span> <span class="id" title="var">R</span> -&gt; <span class="id" title="var">V</span>) (<span class="id" title="var">H_h</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <span class="id" title="var">SPushout</span> <span class="id" title="var">R</span>, <span class="id" title="var">P</span> (<span class="id" title="var">h</span> <span class="id" title="var">x</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">transport@</span>{<span class="id" title="var">U'</span> <span class="id" title="var">u</span>} <span class="id" title="var">_</span> (<span class="id" title="var">setext</span> <span class="id" title="var">R</span> <span class="id" title="var">bitot_R</span> <span class="id" title="var">h</span>) (<span class="id" title="var">H_set</span> <span class="id" title="var">A</span> (<span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">spushl</span> <span class="id" title="var">R</span>) (<span class="id" title="var">H_h</span> <span class="id" title="var">oD</span> <span class="id" title="var">spushl</span> <span class="id" title="var">R</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">H_set</span> <span class="id" title="var">B</span> (<span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">spushr</span> <span class="id" title="var">R</span>) (<span class="id" title="var">H_h</span> <span class="id" title="var">oD</span> <span class="id" title="var">spushr</span> <span class="id" title="var">R</span>) )<br/>
&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="var">V</span>)<br/>
: <span class="id" title="var">P</span> <span class="id" title="var">v</span><br/>
:= (<span class="id" title="keyword">match</span> <span class="id" title="var">v</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">set</span> <span class="id" title="var">A</span> <span class="id" title="var">f</span> =&gt; <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">H_set</span> <span class="id" title="var">A</span> <span class="id" title="var">f</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> =&gt; <span class="id" title="var">V_ind</span> <span class="id" title="var">P</span> <span class="id" title="var">H_0trunc</span> <span class="id" title="var">H_set</span> <span class="id" title="var">H_setext</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="var">H_setext</span> <span class="id" title="var">H_0trunc</span>.<br/>

<br/>
</div>

<div class="doc">
We don't need to axiomatize the computation rule because we get it for free thanks to 0-truncation 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">CumulativeHierarchy</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">V_comp_setext</span> (<span class="id" title="var">P</span> : <span class="id" title="var">V</span> -&gt; <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_0trunc</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">v</span> : <span class="id" title="var">V</span>, <span class="id" title="var">IsTrunc</span> 0 (<span class="id" title="var">P</span> <span class="id" title="var">v</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_set</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span>) (<span class="id" title="var">H_f</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">A</span>, <span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)), <span class="id" title="var">P</span> (<span class="id" title="tactic">set</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_setext</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">R</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">HProp</span>) (<span class="id" title="var">bitot_R</span> : <span class="id" title="var">bitotal</span> <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">h</span> : <span class="id" title="var">SPushout</span> <span class="id" title="var">R</span> -&gt; <span class="id" title="var">V</span>) (<span class="id" title="var">H_h</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <span class="id" title="var">SPushout</span> <span class="id" title="var">R</span>, <span class="id" title="var">P</span> (<span class="id" title="var">h</span> <span class="id" title="var">x</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">setext</span> <span class="id" title="var">R</span> <span class="id" title="var">bitot_R</span> <span class="id" title="var">h</span>) # (<span class="id" title="var">H_set</span> <span class="id" title="var">A</span> (<span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">spushl</span> <span class="id" title="var">R</span>) (<span class="id" title="var">H_h</span> <span class="id" title="var">oD</span> <span class="id" title="var">spushl</span> <span class="id" title="var">R</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">H_set</span> <span class="id" title="var">B</span> (<span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">spushr</span> <span class="id" title="var">R</span>) (<span class="id" title="var">H_h</span> <span class="id" title="var">oD</span> <span class="id" title="var">spushr</span> <span class="id" title="var">R</span>) )<br/>
&nbsp;&nbsp;(<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">R</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">HProp</span>) (<span class="id" title="var">bitot_R</span> : <span class="id" title="var">bitotal</span> <span class="id" title="var">R</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">SPushout</span> <span class="id" title="var">R</span> -&gt; <span class="id" title="var">V</span>)<br/>
: <span class="id" title="var">apD</span> (<span class="id" title="var">V_ind</span> <span class="id" title="var">P</span> <span class="id" title="var">H_0trunc</span> <span class="id" title="var">H_set</span> <span class="id" title="var">H_setext</span>) (<span class="id" title="var">setext</span> <span class="id" title="var">R</span> <span class="id" title="var">bitot_R</span> <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;= <span class="id" title="var">H_setext</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">R</span> <span class="id" title="var">bitot_R</span> <span class="id" title="var">h</span> ((<span class="id" title="var">V_ind</span> <span class="id" title="var">P</span> <span class="id" title="var">H_0trunc</span> <span class="id" title="var">H_set</span> <span class="id" title="var">H_setext</span>) <span class="id" title="var">oD</span> <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_ishprop</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The non-dependent eliminator 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">V_rec</span> (<span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_0trunc</span> : <span class="id" title="var">IsTrunc</span> 0 <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_set</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>), (<span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span>) -&gt; (<span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span>) -&gt; <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_setext</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">R</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">HProp</span>) (<span class="id" title="var">bitot_R</span> : <span class="id" title="var">bitotal</span> <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">h</span> : <span class="id" title="var">SPushout</span> <span class="id" title="var">R</span> -&gt; <span class="id" title="var">V</span>) (<span class="id" title="var">H_h</span> : <span class="id" title="var">SPushout</span> <span class="id" title="var">R</span> -&gt; <span class="id" title="var">P</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H_set</span> <span class="id" title="var">A</span> (<span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">spushl</span> <span class="id" title="var">R</span>) (<span class="id" title="var">H_h</span> <span class="id" title="var">o</span> <span class="id" title="var">spushl</span> <span class="id" title="var">R</span>) = <span class="id" title="var">H_set</span> <span class="id" title="var">B</span> (<span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">spushr</span> <span class="id" title="var">R</span>) (<span class="id" title="var">H_h</span> <span class="id" title="var">o</span> <span class="id" title="var">spushr</span> <span class="id" title="var">R</span>) )<br/>
: <span class="id" title="var">V</span> -&gt; <span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">V_ind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H_set</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">transport_const</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> @ <span class="id" title="var">H_setext</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">R</span> <span class="id" title="var">bitot_R</span> <span class="id" title="var">h</span> <span class="id" title="var">H_h</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">V_comp_nd_setext</span> (<span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_0trunc</span> : <span class="id" title="var">IsTrunc</span> 0 <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_set</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>), (<span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span>) -&gt; (<span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span>) -&gt; <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_setext</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">R</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">HProp</span>) (<span class="id" title="var">bitot_R</span> : <span class="id" title="var">bitotal</span> <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">h</span> : <span class="id" title="var">SPushout</span> <span class="id" title="var">R</span> -&gt; <span class="id" title="var">V</span>) (<span class="id" title="var">H_h</span> : <span class="id" title="var">SPushout</span> <span class="id" title="var">R</span> -&gt; <span class="id" title="var">P</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H_set</span> <span class="id" title="var">A</span> (<span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">spushl</span> <span class="id" title="var">R</span>) (<span class="id" title="var">H_h</span> <span class="id" title="var">o</span> <span class="id" title="var">spushl</span> <span class="id" title="var">R</span>) = <span class="id" title="var">H_set</span> <span class="id" title="var">B</span> (<span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">spushr</span> <span class="id" title="var">R</span>) (<span class="id" title="var">H_h</span> <span class="id" title="var">o</span> <span class="id" title="var">spushr</span> <span class="id" title="var">R</span>) )<br/>
&nbsp;&nbsp;(<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">R</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">HProp</span>) (<span class="id" title="var">bitot_R</span> : <span class="id" title="var">bitotal</span> <span class="id" title="var">R</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">SPushout</span> <span class="id" title="var">R</span> -&gt; <span class="id" title="var">V</span>)<br/>
: <span class="id" title="var">ap</span> (<span class="id" title="var">V_rec</span> <span class="id" title="var">P</span> <span class="id" title="var">H_0trunc</span> <span class="id" title="var">H_set</span> <span class="id" title="var">H_setext</span>) (<span class="id" title="var">setext</span> <span class="id" title="var">R</span> <span class="id" title="var">bitot_R</span> <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;= <span class="id" title="var">H_setext</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">R</span> <span class="id" title="var">bitot_R</span> <span class="id" title="var">h</span> ((<span class="id" title="var">V_rec</span> <span class="id" title="var">P</span> <span class="id" title="var">H_0trunc</span> <span class="id" title="var">H_set</span> <span class="id" title="var">H_setext</span>) <span class="id" title="var">o</span> <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_ishprop</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1091"></a><h2 class="section">Alternative induction principle (This is close to the one from the book)</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equal_img</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">C</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span>) :=<br/>
&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">A</span>, <span class="id" title="var">hexists</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">b</span> : <span class="id" title="var">B</span>) =&gt; <span class="id" title="var">f</span> <span class="id" title="var">a</span> = <span class="id" title="var">g</span> <span class="id" title="var">b</span>))<br/>
&nbsp;* (<span class="id" title="keyword">forall</span> <span class="id" title="var">b</span> : <span class="id" title="var">B</span>, <span class="id" title="var">hexists</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) =&gt; <span class="id" title="var">f</span> <span class="id" title="var">a</span> = <span class="id" title="var">g</span> <span class="id" title="var">b</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">setext'</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">V</span>) (<span class="id" title="var">eq_img</span> : <span class="id" title="var">equal_img</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>)<br/>
: <span class="id" title="tactic">set</span> <span class="id" title="var">f</span> = <span class="id" title="tactic">set</span> <span class="id" title="var">g</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">R</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> =&gt; <span class="id" title="var">Build_HProp</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span> = <span class="id" title="var">g</span> <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">h</span> := <span class="id" title="var">SPushout_rec</span> <span class="id" title="var">R</span> <span class="id" title="var">V</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">r</span> =&gt; <span class="id" title="var">r</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">setext</span> <span class="id" title="var">R</span> <span class="id" title="var">eq_img</span> <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">V_rec'</span> (<span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_0trunc</span> : <span class="id" title="var">IsTrunc</span> 0 <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_set</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>), (<span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span>) -&gt; (<span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span>) -&gt; <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_setext'</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">V</span>), (<span class="id" title="var">equal_img</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">H_f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span>) (<span class="id" title="var">H_g</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">P</span>), (<span class="id" title="var">equal_img</span> <span class="id" title="var">H_f</span> <span class="id" title="var">H_g</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H_set</span> <span class="id" title="var">A</span> <span class="id" title="var">f</span> <span class="id" title="var">H_f</span>) = (<span class="id" title="var">H_set</span> <span class="id" title="var">B</span> <span class="id" title="var">g</span> <span class="id" title="var">H_g</span>) )<br/>
: <span class="id" title="var">V</span> -&gt; <span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">V_rec</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H_set</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">R</span> <span class="id" title="var">bitot_R</span> <span class="id" title="var">h</span> <span class="id" title="var">H_h</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H_setext'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">fst</span> <span class="id" title="var">bitot_R</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">r</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">ap</span> <span class="id" title="var">h</span> (<span class="id" title="var">spglue</span> <span class="id" title="var">R</span> <span class="id" title="var">r</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">snd</span> <span class="id" title="var">bitot_R</span> <span class="id" title="var">b</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">r</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">ap</span> <span class="id" title="var">h</span> (<span class="id" title="var">spglue</span> <span class="id" title="var">R</span> <span class="id" title="var">r</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">fst</span> <span class="id" title="var">bitot_R</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">r</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">ap</span> <span class="id" title="var">H_h</span> (<span class="id" title="var">spglue</span> <span class="id" title="var">R</span> <span class="id" title="var">r</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">snd</span> <span class="id" title="var">bitot_R</span> <span class="id" title="var">b</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">r</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">ap</span> <span class="id" title="var">H_h</span> (<span class="id" title="var">spglue</span> <span class="id" title="var">R</span> <span class="id" title="var">r</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Note that the hypothesis H_setext' differs from the one given in section 10.5 of the HoTT book. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">V_ind'</span> (<span class="id" title="var">P</span> : <span class="id" title="var">V</span> -&gt; <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_0trunc</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">v</span> : <span class="id" title="var">V</span>, <span class="id" title="var">IsTrunc</span> 0 (<span class="id" title="var">P</span> <span class="id" title="var">v</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_set</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span>) (<span class="id" title="var">H_f</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">A</span>, <span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)), <span class="id" title="var">P</span> (<span class="id" title="tactic">set</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_setext'</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">V</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">eq_img</span>: <span class="id" title="var">equal_img</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H_f</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">A</span>, <span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)) (<span class="id" title="var">H_g</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">b</span> : <span class="id" title="var">B</span>, <span class="id" title="var">P</span> (<span class="id" title="var">g</span> <span class="id" title="var">b</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H_eqimg</span> : (<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">A</span>, <span class="id" title="var">hexists</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">b</span> : <span class="id" title="var">B</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hexists</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">p</span>:<span class="id" title="var">f</span> <span class="id" title="var">a</span> = <span class="id" title="var">g</span> <span class="id" title="var">b</span>) =&gt; <span class="id" title="var">p</span> # (<span class="id" title="var">H_f</span> <span class="id" title="var">a</span>) = <span class="id" title="var">H_g</span> <span class="id" title="var">b</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* (<span class="id" title="keyword">forall</span> <span class="id" title="var">b</span> : <span class="id" title="var">B</span>, <span class="id" title="var">hexists</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hexists</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">p</span>:<span class="id" title="var">f</span> <span class="id" title="var">a</span> = <span class="id" title="var">g</span> <span class="id" title="var">b</span>) =&gt; <span class="id" title="var">p</span> # (<span class="id" title="var">H_f</span> <span class="id" title="var">a</span>) = <span class="id" title="var">H_g</span> <span class="id" title="var">b</span>))) ),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">setext'</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">eq_img</span>) # (<span class="id" title="var">H_set</span> <span class="id" title="var">A</span> <span class="id" title="var">f</span> <span class="id" title="var">H_f</span>) = (<span class="id" title="var">H_set</span> <span class="id" title="var">B</span> <span class="id" title="var">g</span> <span class="id" title="var">H_g</span>)<br/>
&nbsp;&nbsp;)<br/>
: <span class="id" title="keyword">forall</span> <span class="id" title="var">v</span> : <span class="id" title="var">V</span>, <span class="id" title="var">P</span> <span class="id" title="var">v</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">V_ind</span> <span class="id" title="keyword">with</span> <span class="id" title="var">H_set</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">R</span> <span class="id" title="var">bitot_R</span> <span class="id" title="var">h</span> <span class="id" title="var">H_h</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">f</span> := <span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">spushl</span> <span class="id" title="var">R</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span> ).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">g</span> := <span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">spushr</span> <span class="id" title="var">R</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">V</span> ).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">H_f</span> := <span class="id" title="var">H_h</span> <span class="id" title="var">oD</span> <span class="id" title="var">spushl</span> <span class="id" title="var">R</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">A</span>, <span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">H_g</span> := <span class="id" title="var">H_h</span> <span class="id" title="var">oD</span> <span class="id" title="var">spushr</span> <span class="id" title="var">R</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">b</span> : <span class="id" title="var">B</span>, <span class="id" title="var">P</span> (<span class="id" title="var">g</span> <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">eq_img</span> : <span class="id" title="var">equal_img</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">fst</span> <span class="id" title="var">bitot_R</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">r</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">ap</span> <span class="id" title="var">h</span> (<span class="id" title="var">spglue</span> <span class="id" title="var">R</span> <span class="id" title="var">r</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">snd</span> <span class="id" title="var">bitot_R</span> <span class="id" title="var">b</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">r</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">ap</span> <span class="id" title="var">h</span> (<span class="id" title="var">spglue</span> <span class="id" title="var">R</span> <span class="id" title="var">r</span>)). }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> (<span class="id" title="var">setext'</span> (<span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">spushl</span> <span class="id" title="var">R</span>) (<span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">spushr</span> <span class="id" title="var">R</span>) <span class="id" title="var">eq_img</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H_set</span> <span class="id" title="var">A</span> (<span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">spushl</span> <span class="id" title="var">R</span>) (<span class="id" title="var">H_h</span> <span class="id" title="var">oD</span> <span class="id" title="var">spushl</span> <span class="id" title="var">R</span>))).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> =&gt; <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> (<span class="id" title="var">H_set</span> <span class="id" title="var">A</span> (<span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">spushl</span> <span class="id" title="var">R</span>) (<span class="id" title="var">H_h</span> <span class="id" title="var">oD</span> <span class="id" title="var">spushl</span> <span class="id" title="var">R</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_ishprop</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">H_setext'</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">eq_img</span> <span class="id" title="var">H_f</span> <span class="id" title="var">H_g</span>). <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">truncb</span> := <span class="id" title="var">fst</span> <span class="id" title="var">bitot_R</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">generalize</span> <span class="id" title="var">truncb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">Rab</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">ap</span> <span class="id" title="var">h</span> (<span class="id" title="var">spglue</span> <span class="id" title="var">R</span> <span class="id" title="var">Rab</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">concatR</span> (<span class="id" title="var">apD</span> <span class="id" title="var">H_h</span> (<span class="id" title="var">spglue</span> <span class="id" title="var">R</span> <span class="id" title="var">Rab</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">inverse</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">f</span>, <span class="id" title="var">g</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">transport_compose</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">trunca</span> := <span class="id" title="var">snd</span> <span class="id" title="var">bitot_R</span> <span class="id" title="var">b</span>). <span class="id" title="tactic">generalize</span> <span class="id" title="var">trunca</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">Rab</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">ap</span> <span class="id" title="var">h</span> (<span class="id" title="var">spglue</span> <span class="id" title="var">R</span> <span class="id" title="var">Rab</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">concatR</span> (<span class="id" title="var">apD</span> <span class="id" title="var">H_h</span> (<span class="id" title="var">spglue</span> <span class="id" title="var">R</span> <span class="id" title="var">Rab</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">inverse</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">f</span>, <span class="id" title="var">g</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">transport_compose</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Simpler induction principle when the goal is an hprop 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">V_ind_hprop</span> (<span class="id" title="var">P</span> : <span class="id" title="var">V</span> -&gt; <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_set</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span>) (<span class="id" title="var">H_f</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">A</span>, <span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)), <span class="id" title="var">P</span> (<span class="id" title="tactic">set</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">isHProp_P</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">v</span> : <span class="id" title="var">V</span>, <span class="id" title="var">IsHProp</span> (<span class="id" title="var">P</span> <span class="id" title="var">v</span>))<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">forall</span> <span class="id" title="var">v</span> : <span class="id" title="var">V</span>, <span class="id" title="var">P</span> <span class="id" title="var">v</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">V_ind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H_set</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">path_ishprop</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">AssumingUA</span>.<br/>
<span class="id" title="keyword">Context</span> `{<span class="id" title="var">ua</span> : <span class="id" title="var">Univalence</span>}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1092"></a><h2 class="section">Membership relation</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">mem</span> (<span class="id" title="var">x</span> : <span class="id" title="var">V</span>) : <span class="id" title="var">V</span> -&gt; <span class="id" title="var">HProp</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">V_rec'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">hexists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> : <span class="id" title="var">A</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">a</span> = <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">eqimg</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_iff_hprop</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">refine</span> (<span class="id" title="var">Trunc_rec</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">fst</span> <span class="id" title="var">eqimg</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">p'</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">transitivity</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">path_hints</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">refine</span> (<span class="id" title="var">Trunc_rec</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">snd</span> <span class="id" title="var">eqimg</span> <span class="id" title="var">b</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">p'</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">transitivity</span> (<span class="id" title="var">g</span> <span class="id" title="var">b</span>); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">path_hints</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Declare Scope</span> <span class="id" title="var">set_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;x  v" := (<span class="id" title="var">mem</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span>) : <span class="id" title="var">set_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">set_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1093"></a><h2 class="section">Subset relation</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">subset</span> (<span class="id" title="var">x</span> : <span class="id" title="var">V</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">V</span>) : <span class="id" title="var">HProp</span><br/>
:= <span class="id" title="var">Build_HProp</span> (<span class="id" title="keyword">forall</span> <span class="id" title="var">z</span> : <span class="id" title="var">V</span>, <span class="id" title="var">z</span>  <span class="id" title="var">x</span> -&gt; <span class="id" title="var">z</span>  <span class="id" title="var">y</span>).<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;x  y" := (<span class="id" title="var">subset</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">set_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1094"></a><h2 class="section">Bisimulation relation</h2>
 The equality in V lives in Type@{U'}. We define the bisimulation relation which is a U-small resizing of the equality in V: it must live in HProp_U : Type{U'}, hence the codomain is HProp@{U}. We then prove that bisimulation is equality (bisim_equals_id), then use it to prove the key lemma monic_set_present. 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;We&nbsp;define&nbsp;bisimulation&nbsp;by&nbsp;double&nbsp;induction&nbsp;on&nbsp;V.&nbsp;We&nbsp;first&nbsp;fix&nbsp;the&nbsp;first&nbsp;argument&nbsp;as&nbsp;set(A,f)&nbsp;and&nbsp;define&nbsp;bisim_aux&nbsp;:&nbsp;V&nbsp;-&gt;&nbsp;HProp,&nbsp;by&nbsp;induction.&nbsp;This&nbsp;is&nbsp;the&nbsp;inner&nbsp;of&nbsp;the&nbsp;two&nbsp;inductions.&nbsp;*)</span><br/>
<span class="id" title="keyword">Local Definition</span> <span class="id" title="var">bisim_aux</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span>) (<span class="id" title="var">H_f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span> -&gt; <span class="id" title="var">HProp</span>) : <span class="id" title="var">V</span> -&gt; <span class="id" title="var">HProp</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">V_rec'</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">B</span> <span class="id" title="var">g</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">Build_HProp</span> ( (<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">hexists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> =&gt; <span class="id" title="var">H_f</span> <span class="id" title="var">a</span> (<span class="id" title="var">g</span> <span class="id" title="var">b</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="keyword">forall</span> <span class="id" title="var">b</span>, <span class="id" title="var">hexists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> =&gt; <span class="id" title="var">H_f</span> <span class="id" title="var">a</span> (<span class="id" title="var">g</span> <span class="id" title="var">b</span>)) )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">B</span> <span class="id" title="var">B'</span> <span class="id" title="var">g</span> <span class="id" title="var">g'</span> <span class="id" title="var">eq_img</span> <span class="id" title="var">H_g</span> <span class="id" title="var">H_g'</span> <span class="id" title="var">H_img</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_iff_hprop</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>]; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">refine</span> (<span class="id" title="var">Trunc_rec</span> <span class="id" title="var">_</span> (<span class="id" title="var">H1</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">H3</span>]. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">fst</span> <span class="id" title="var">eq_img</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">hexists</span>. <span class="id" title="tactic">refine</span> (@<span class="id" title="var">Trunc_functor</span> (-1) {<span class="id" title="var">b0</span> : <span class="id" title="var">B'</span> &amp; <span class="id" title="var">g</span> <span class="id" title="var">b</span> = <span class="id" title="var">g'</span> <span class="id" title="var">b0</span>} {<span class="id" title="var">b0</span> : <span class="id" title="var">B'</span> &amp; <span class="id" title="var">H_f</span> <span class="id" title="var">a</span> (<span class="id" title="var">g'</span> <span class="id" title="var">b0</span>)} <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b'</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">b'</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">H_f</span> <span class="id" title="var">a</span> <span class="id" title="var">x</span>) <span class="id" title="var">p</span> <span class="id" title="var">H3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intro</span> <span class="id" title="var">b'</span>. <span class="id" title="tactic">refine</span> (<span class="id" title="var">Trunc_rec</span> <span class="id" title="var">_</span> (<span class="id" title="var">snd</span> <span class="id" title="var">eq_img</span> <span class="id" title="var">b'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">H2</span> <span class="id" title="var">b</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">H3</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">H_f</span> <span class="id" title="var">a</span> <span class="id" title="var">x</span>) <span class="id" title="var">p</span> <span class="id" title="var">H3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>]; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">refine</span> (<span class="id" title="var">Trunc_rec</span> <span class="id" title="var">_</span> (<span class="id" title="var">H1</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b'</span> <span class="id" title="var">H3</span>]. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">snd</span> <span class="id" title="var">eq_img</span> <span class="id" title="var">b'</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">H_f</span> <span class="id" title="var">a</span> <span class="id" title="var">x</span>) <span class="id" title="var">p</span>^ <span class="id" title="var">H3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intro</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">refine</span> (<span class="id" title="var">Trunc_rec</span> <span class="id" title="var">_</span> (<span class="id" title="var">fst</span> <span class="id" title="var">eq_img</span> <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b'</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">H2</span> <span class="id" title="var">b'</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">H3</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">H_f</span> <span class="id" title="var">a</span> <span class="id" title="var">x</span>) <span class="id" title="var">p</span>^ <span class="id" title="var">H3</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Then&nbsp;we&nbsp;define&nbsp;bisim&nbsp;:&nbsp;V&nbsp;-&gt;&nbsp;(V&nbsp;-&gt;&nbsp;HProp)&nbsp;by&nbsp;induction&nbsp;again&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">bisimulation</span> : <span class="id" title="var">V@</span>{<span class="id" title="var">U'</span> <span class="id" title="var">U</span>} -&gt; <span class="id" title="var">V@</span>{<span class="id" title="var">U'</span> <span class="id" title="var">U</span>} -&gt; <span class="id" title="var">HProp@</span>{<span class="id" title="var">U</span>}.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">V_rec'</span> (<span class="id" title="var">V</span> -&gt; <span class="id" title="var">HProp</span>) <span class="id" title="var">_</span> <span class="id" title="var">bisim_aux</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">eq_img</span> <span class="id" title="var">H_f</span> <span class="id" title="var">H_g</span> <span class="id" title="var">H_img</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_forall</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">V_ind_hprop</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">C</span> <span class="id" title="var">h</span> <span class="id" title="var">_</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_iff_hprop</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>]; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">refine</span> (<span class="id" title="var">Trunc_rec</span> <span class="id" title="var">_</span> (<span class="id" title="var">snd</span> <span class="id" title="var">H_img</span> <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">H1</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">c</span> <span class="id" title="var">H3</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">c</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">ap10</span> <span class="id" title="var">p</span> (<span class="id" title="var">h</span> <span class="id" title="var">c</span>)) # <span class="id" title="var">H3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">c</span>. <span class="id" title="tactic">refine</span> (<span class="id" title="var">Trunc_rec</span> <span class="id" title="var">_</span> (<span class="id" title="var">H2</span> <span class="id" title="var">c</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">H3</span>]. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">fst</span> <span class="id" title="var">H_img</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">ap10</span> <span class="id" title="var">p</span> (<span class="id" title="var">h</span> <span class="id" title="var">c</span>)) # <span class="id" title="var">H3</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>]; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">refine</span> (<span class="id" title="var">Trunc_rec</span> <span class="id" title="var">_</span> (<span class="id" title="var">fst</span> <span class="id" title="var">H_img</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">H1</span> <span class="id" title="var">b</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">c</span> <span class="id" title="var">H3</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">c</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">ap10</span> <span class="id" title="var">p</span>^ (<span class="id" title="var">h</span> <span class="id" title="var">c</span>)) # <span class="id" title="var">H3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">c</span>. <span class="id" title="tactic">refine</span> (<span class="id" title="var">Trunc_rec</span> <span class="id" title="var">_</span> (<span class="id" title="var">H2</span> <span class="id" title="var">c</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">H3</span>]. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">snd</span> <span class="id" title="var">H_img</span> <span class="id" title="var">b</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">ap10</span> <span class="id" title="var">p</span>^ (<span class="id" title="var">h</span> <span class="id" title="var">c</span>)) # <span class="id" title="var">H3</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;u ~~ v" := (<span class="id" title="var">bisimulation</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>) : <span class="id" title="var">set_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">reflexive_bisimulation</span> : <span class="id" title="var">Reflexive</span> <span class="id" title="var">bisimulation</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">V_ind_hprop</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">f</span> <span class="id" title="var">H_f</span>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bisimulation_equiv_id</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">V</span>, (<span class="id" title="var">u</span> = <span class="id" title="var">v</span>) &lt;~&gt; (<span class="id" title="var">u</span> ~~ <span class="id" title="var">v</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_iff_hprop</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">exact</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">u</span> ~~ <span class="id" title="var">x</span>) <span class="id" title="var">p</span> (<span class="id" title="var">reflexive_bisimulation</span> <span class="id" title="var">u</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">generalize</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">V_ind_hprop</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">f</span> <span class="id" title="var">H_f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">V_ind_hprop</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">B</span> <span class="id" title="var">g</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">setext'</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">H1</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">h</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">exact</span> (<span class="id" title="var">H_f</span> <span class="id" title="var">a</span> (<span class="id" title="var">g</span> <span class="id" title="var">b</span>) <span class="id" title="var">h</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">H2</span> <span class="id" title="var">b</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">h</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">exact</span> (<span class="id" title="var">H_f</span> <span class="id" title="var">a</span> (<span class="id" title="var">g</span> <span class="id" title="var">b</span>) <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1095"></a><h2 class="section">Canonical presentation of V-sets (Lemma 10.5.6)</h2>

<div class="paragraph"> </div>

 Using the regular kernel would lead to a universe inconsistency in the monic_set_present lemma later. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ker_bisim</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span>) (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>) := (<span class="id" title="var">f</span> <span class="id" title="var">x</span> ~~ <span class="id" title="var">f</span> <span class="id" title="var">y</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ker_bisim_is_ker</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>), <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">f</span> <span class="id" title="var">y</span> &lt;~&gt; <span class="id" title="var">ker_bisim</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">bisimulation_equiv_id</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">MonicSetPresent_Uniqueness</span>.<br/>
</div>

<div class="doc">
Given u : V, we want to show that the representation u = @set Au mu, where Au is an hSet and mu is monic, is unique. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Context</span> {<span class="id" title="var">u</span> : <span class="id" title="var">V</span>} {<span class="id" title="var">Au</span> <span class="id" title="var">Au'</span>: <span class="id" title="keyword">Type</span>} {<span class="id" title="var">h</span> : <span class="id" title="var">IsHSet</span> <span class="id" title="var">Au</span>} {<span class="id" title="var">h'</span> : <span class="id" title="var">IsHSet</span> <span class="id" title="var">Au'</span>} {<span class="id" title="var">mu</span> : <span class="id" title="var">Au</span> -&gt; <span class="id" title="var">V</span>} {<span class="id" title="var">mono</span> : <span class="id" title="var">IsEmbedding</span> <span class="id" title="var">mu</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">mu'</span> : <span class="id" title="var">Au'</span> -&gt; <span class="id" title="var">V</span>} {<span class="id" title="var">mono'</span> : <span class="id" title="var">IsEmbedding</span> <span class="id" title="var">mu'</span>} {<span class="id" title="var">p</span> : <span class="id" title="var">u</span> = <span class="id" title="tactic">set</span> <span class="id" title="var">mu</span>} {<span class="id" title="var">p'</span> : <span class="id" title="var">u</span> = <span class="id" title="tactic">set</span> <span class="id" title="var">mu'</span>}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eq_img_untrunc</span> : (<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">Au</span>, {<span class="id" title="var">a'</span> : <span class="id" title="var">Au'</span> &amp; <span class="id" title="var">mu'</span> <span class="id" title="var">a'</span> = <span class="id" title="var">mu</span> <span class="id" title="var">a</span>})<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* (<span class="id" title="keyword">forall</span> <span class="id" title="var">a'</span> : <span class="id" title="var">Au'</span>, {<span class="id" title="var">a</span> : <span class="id" title="var">Au</span> &amp; <span class="id" title="var">mu</span> <span class="id" title="var">a</span> = <span class="id" title="var">mu'</span> <span class="id" title="var">a'</span>}).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">exact</span> (@<span class="id" title="var">untrunc_istrunc</span> (-1) <span class="id" title="var">_</span> (<span class="id" title="var">mono'</span> (<span class="id" title="var">mu</span> <span class="id" title="var">a</span>)) (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">mu</span> <span class="id" title="var">a</span>  <span class="id" title="var">x</span>) (<span class="id" title="var">p</span>^ @ <span class="id" title="var">p'</span>) (<span class="id" title="var">tr</span> (<span class="id" title="var">a</span>; 1)))).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">a'</span>. <span class="id" title="tactic">exact</span> (@<span class="id" title="var">untrunc_istrunc</span> (-1) <span class="id" title="var">_</span> (<span class="id" title="var">mono</span> (<span class="id" title="var">mu'</span> <span class="id" title="var">a'</span>)) (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">mu'</span> <span class="id" title="var">a'</span>  <span class="id" title="var">x</span>) (<span class="id" title="var">p'</span>^ @ <span class="id" title="var">p</span>) (<span class="id" title="var">tr</span> (<span class="id" title="var">a'</span>; 1)))).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Let</span> <span class="id" title="var">e</span> : <span class="id" title="var">Au</span> -&gt; <span class="id" title="var">Au'</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> =&gt; <span class="id" title="var">pr1</span> (<span class="id" title="var">fst</span> <span class="id" title="var">eq_img_untrunc</span> <span class="id" title="var">a</span>).<br/>
<span class="id" title="keyword">Let</span> <span class="id" title="var">inv_e</span> : <span class="id" title="var">Au'</span> -&gt; <span class="id" title="var">Au</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">a'</span> =&gt; <span class="id" title="var">pr1</span> (<span class="id" title="var">snd</span> <span class="id" title="var">eq_img_untrunc</span> <span class="id" title="var">a'</span>).<br/>

<br/>
<span class="id" title="keyword">Let</span> <span class="id" title="var">hom1</span> : <span class="id" title="var">e</span> <span class="id" title="var">o</span> <span class="id" title="var">inv_e</span> == <span class="id" title="var">idmap</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">a'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isinj_embedding</span> <span class="id" title="var">mu'</span> <span class="id" title="var">mono'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">mu</span> (<span class="id" title="var">inv_e</span> <span class="id" title="var">a'</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">fst</span> <span class="id" title="var">eq_img_untrunc</span> (<span class="id" title="var">inv_e</span> <span class="id" title="var">a'</span>))).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">snd</span> <span class="id" title="var">eq_img_untrunc</span> <span class="id" title="var">a'</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Let</span> <span class="id" title="var">hom2</span> : <span class="id" title="var">inv_e</span> <span class="id" title="var">o</span> <span class="id" title="var">e</span> == <span class="id" title="var">idmap</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isinj_embedding</span> <span class="id" title="var">mu</span> <span class="id" title="var">mono</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">mu'</span> (<span class="id" title="var">e</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">snd</span> <span class="id" title="var">eq_img_untrunc</span> (<span class="id" title="var">e</span> <span class="id" title="var">a</span>))).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">fst</span> <span class="id" title="var">eq_img_untrunc</span> <span class="id" title="var">a</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Let</span> <span class="id" title="var">path</span> : <span class="id" title="var">Au'</span> = <span class="id" title="var">Au</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_universe_uncurried</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">equiv_adjointify</span> <span class="id" title="var">inv_e</span> <span class="id" title="var">e</span> <span class="id" title="var">hom2</span> <span class="id" title="var">hom1</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mu_eq_mu'</span> : <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span> =&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span>) <span class="id" title="var">path</span>^ <span class="id" title="var">mu</span> = <span class="id" title="var">mu'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_forall</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">a'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">X</span> =&gt; <span class="id" title="var">V</span>) <span class="id" title="var">path</span>^ (<span class="id" title="var">mu</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span> =&gt; <span class="id" title="var">X</span>) <span class="id" title="var">path</span>^^ <span class="id" title="var">a'</span>))).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (@<span class="id" title="var">transport_arrow</span> <span class="id" title="keyword">Type</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span> =&gt; <span class="id" title="var">X</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">X</span> =&gt; <span class="id" title="var">V</span>) <span class="id" title="var">Au</span> <span class="id" title="var">Au'</span> <span class="id" title="var">path</span>^ <span class="id" title="var">mu</span> <span class="id" title="var">a'</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">transitivity</span> (<span class="id" title="var">mu</span> (<span class="id" title="var">transport</span> <span class="id" title="var">idmap</span> <span class="id" title="var">path</span>^^ <span class="id" title="var">a'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">transport_const</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">transitivity</span> (<span class="id" title="var">mu</span> (<span class="id" title="var">inv_e</span> <span class="id" title="var">a'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">snd</span> <span class="id" title="var">eq_img_untrunc</span> <span class="id" title="var">a'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">ap</span> <span class="id" title="var">mu</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">transport</span> <span class="id" title="var">idmap</span> <span class="id" title="var">path</span> <span class="id" title="var">a'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">transport</span> <span class="id" title="var">idmap</span> <span class="id" title="var">x</span> <span class="id" title="var">a'</span>) (<span class="id" title="var">inv_V</span> <span class="id" title="var">path</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">transport_path_universe</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">monic_set_present_uniqueness</span> : (<span class="id" title="var">Au</span>; (<span class="id" title="var">mu</span>; (<span class="id" title="var">h</span>, <span class="id" title="var">mono</span>, <span class="id" title="var">p</span>))) = (<span class="id" title="var">Au'</span>; (<span class="id" title="var">mu'</span>; (<span class="id" title="var">h'</span>, <span class="id" title="var">mono'</span>, <span class="id" title="var">p'</span>))) :&gt; {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span> &amp; {<span class="id" title="var">m</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span> &amp; <span class="id" title="var">IsHSet</span> <span class="id" title="var">A</span> * <span class="id" title="var">IsEmbedding</span> <span class="id" title="var">m</span> * (<span class="id" title="var">u</span> = <span class="id" title="tactic">set</span> <span class="id" title="var">m</span>)}}.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_sigma_uncurried</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">path</span>^.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">path</span>^ # <span class="id" title="var">mu</span>; <span class="id" title="var">transportD</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">A</span> =&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">A</span> <span class="id" title="var">m</span> =&gt; <span class="id" title="var">IsHSet</span> <span class="id" title="var">A</span> * <span class="id" title="var">IsEmbedding</span> <span class="id" title="var">m</span> * (<span class="id" title="var">u</span> = <span class="id" title="tactic">set</span> <span class="id" title="var">m</span>)) <span class="id" title="var">path</span>^ <span class="id" title="var">mu</span> (<span class="id" title="var">h</span>, <span class="id" title="var">mono</span>, <span class="id" title="var">p</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (@<span class="id" title="var">transport_sigma</span> <span class="id" title="keyword">Type</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">A</span> =&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">A</span> <span class="id" title="var">m</span> =&gt; <span class="id" title="var">IsHSet</span> <span class="id" title="var">A</span> * <span class="id" title="var">IsEmbedding</span> <span class="id" title="var">m</span> * (<span class="id" title="var">u</span> = <span class="id" title="tactic">set</span> <span class="id" title="var">m</span>)) <span class="id" title="var">Au</span> <span class="id" title="var">Au'</span> <span class="id" title="var">path</span>^ (<span class="id" title="var">mu</span>; (<span class="id" title="var">h</span>, <span class="id" title="var">mono</span>, <span class="id" title="var">p</span>))).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">path_sigma_hprop</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">mu_eq_mu'</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">MonicSetPresent_Uniqueness</span>.<br/>

<br/>
</div>

<div class="doc">
This lemma actually says a little more than 10.5.6, i.e., that Au is a hSet 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">monic_set_present</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">u</span> : <span class="id" title="var">V</span>, <span class="id" title="tactic">exists</span> (<span class="id" title="var">Au</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">m</span> : <span class="id" title="var">Au</span> -&gt; <span class="id" title="var">V</span>),<br/>
&nbsp;&nbsp;(<span class="id" title="var">IsHSet</span> <span class="id" title="var">Au</span>) * (<span class="id" title="var">IsEmbedding</span> <span class="id" title="var">m</span>) * (<span class="id" title="var">u</span> = <span class="id" title="tactic">set</span> <span class="id" title="var">m</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">V_ind_hprop</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">quotient_kernel_factor_general</span> <span class="id" title="var">f</span> (<span class="id" title="var">ker_bisim</span> <span class="id" title="var">f</span>) (<span class="id" title="var">ker_bisim_is_ker</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">Au</span> [<span class="id" title="var">eu</span> [<span class="id" title="var">mu</span> (((<span class="id" title="var">hset_Au</span>, <span class="id" title="var">epi_eu</span>), <span class="id" title="var">mono_mu</span>), <span class="id" title="var">factor</span>)]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">Au</span>, <span class="id" title="var">mu</span>. <span class="id" title="tactic">split</span>;[<span class="id" title="tactic">exact</span> (<span class="id" title="var">hset_Au</span>, <span class="id" title="var">mono_mu</span>)|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">setext'</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> (<span class="id" title="var">eu</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">exact</span> (<span class="id" title="var">ap10</span> <span class="id" title="var">factor</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">a'</span>. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">epi_eu</span> <span class="id" title="var">a'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">IC</span>; <span class="id" title="tactic">refine</span> (<span class="id" title="var">Trunc_functor</span> (-1) <span class="id" title="var">_</span> (@<span class="id" title="var">center</span> <span class="id" title="var">_</span> <span class="id" title="var">IC</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">transitivity</span> (<span class="id" title="var">mu</span> (<span class="id" title="var">eu</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">ap10</span> <span class="id" title="var">factor</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">ap</span> <span class="id" title="var">mu</span> <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">v</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">hprop_allpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Au</span> [<span class="id" title="var">mu</span> ((<span class="id" title="var">hset</span>, <span class="id" title="var">mono</span>), <span class="id" title="var">p</span>)]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Au'</span> [<span class="id" title="var">mu'</span> ((<span class="id" title="var">hset'</span>, <span class="id" title="var">mono'</span>), <span class="id" title="var">p'</span>)]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">monic_set_present_uniqueness</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">type_of_members</span> (<span class="id" title="var">u</span> : <span class="id" title="var">V</span>) : <span class="id" title="keyword">Type</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">monic_set_present</span> <span class="id" title="var">u</span>).<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;[ u ]" := (<span class="id" title="var">type_of_members</span> <span class="id" title="var">u</span>) : <span class="id" title="var">set_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">func_of_members</span> {<span class="id" title="var">u</span> : <span class="id" title="var">V</span>} : [<span class="id" title="var">u</span>] -&gt; <span class="id" title="var">V</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">monic_set_present</span> <span class="id" title="var">u</span>)) : [<span class="id" title="var">u</span>] -&gt; <span class="id" title="var">V</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">is_hset_typeofmembers</span> {<span class="id" title="var">u</span> : <span class="id" title="var">V</span>} : <span class="id" title="var">IsHSet</span> ([<span class="id" title="var">u</span>]) := <span class="id" title="var">fst</span> (<span class="id" title="var">fst</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">monic_set_present</span> <span class="id" title="var">u</span>)))).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">IsEmbedding_funcofmembers</span> {<span class="id" title="var">u</span> : <span class="id" title="var">V</span>} : <span class="id" title="var">IsEmbedding</span> <span class="id" title="var">func_of_members</span> := <span class="id" title="var">snd</span> (<span class="id" title="var">fst</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">monic_set_present</span> <span class="id" title="var">u</span>)))).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">is_valid_presentation</span> (<span class="id" title="var">u</span> : <span class="id" title="var">V</span>) : <span class="id" title="var">u</span> = <span class="id" title="tactic">set</span> <span class="id" title="var">func_of_members</span> := <span class="id" title="var">snd</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">monic_set_present</span> <span class="id" title="var">u</span>))).<br/>

<br/>
</div>

<div class="doc">
<a id="lab1096"></a><h2 class="section">Lemmas 10.5.8 (i) &amp; (vii), we put them here because they are useful later</h2>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="tactic">extensionality</span> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">V</span>}, (<span class="id" title="var">x</span>  <span class="id" title="var">y</span> * <span class="id" title="var">y</span>  <span class="id" title="var">x</span>) &lt;-&gt; <span class="id" title="var">x</span> = <span class="id" title="var">y</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">V_ind_hprop</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">V_ind_hprop</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">intros</span> <span class="id" title="var">B</span> <span class="id" title="var">g</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>]. <span class="id" title="tactic">apply</span> <span class="id" title="var">setext'</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">refine</span> (<span class="id" title="var">Trunc_rec</span> <span class="id" title="var">_</span> (<span class="id" title="var">H1</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<span class="id" title="var">tr</span> (<span class="id" title="var">a</span>;1)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">p</span>^.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">H2</span> (<span class="id" title="var">g</span> <span class="id" title="var">b</span>)). <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">z</span> <span class="id" title="var">Hz</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">z</span>  <span class="id" title="var">x</span>) <span class="id" title="var">p</span> <span class="id" title="var">Hz</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">z</span> <span class="id" title="var">Hz</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">z</span>  <span class="id" title="var">x</span>) <span class="id" title="var">p</span>^ <span class="id" title="var">Hz</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mem_induction</span> (<span class="id" title="var">C</span> : <span class="id" title="var">V</span> -&gt; <span class="id" title="var">HProp</span>)<br/>
: (<span class="id" title="keyword">forall</span> <span class="id" title="var">v</span>, (<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">x</span>  <span class="id" title="var">v</span> -&gt; <span class="id" title="var">C</span> <span class="id" title="var">x</span>) -&gt; <span class="id" title="var">C</span> <span class="id" title="var">v</span>) -&gt; <span class="id" title="keyword">forall</span> <span class="id" title="var">v</span>, <span class="id" title="var">C</span> <span class="id" title="var">v</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">V_ind_hprop</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">f</span> <span class="id" title="var">H_f</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">Hx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">Hx</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Trunc_rec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">exact</span> (<span class="id" title="var">transport</span> <span class="id" title="var">C</span> <span class="id" title="var">p</span> (<span class="id" title="var">H_f</span> <span class="id" title="var">a</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1097"></a><h2 class="section">Two useful lemmas</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">irreflexive_mem</span> : <span class="id" title="var">Irreflexive</span> <span class="id" title="var">mem</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">forall</span> <span class="id" title="var">v</span>, <span class="id" title="var">IsHProp</span> (<span class="id" title="var">complement</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">x0</span> : <span class="id" title="var">V</span> =&gt; <span class="id" title="var">x</span>  <span class="id" title="var">x0</span>) <span class="id" title="var">v</span> <span class="id" title="var">v</span>)). <span class="comment">(*&nbsp;https://coq.inria.fr/bugs/show_bug.cgi?id=3854&nbsp;*)</span><br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">complement</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">mem_induction</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">Build_HProp</span> (~ <span class="id" title="var">x</span>  <span class="id" title="var">x</span>)) <span class="id" title="var">_</span>); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">v</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">H</span> <span class="id" title="var">v</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hv</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">path_V_eqimg</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">V</span>} {<span class="id" title="var">g</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">V</span>} : <span class="id" title="tactic">set</span> <span class="id" title="var">f</span> = <span class="id" title="tactic">set</span> <span class="id" title="var">g</span> -&gt; <span class="id" title="var">equal_img</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <span class="id" title="var">f</span> <span class="id" title="var">a</span>  <span class="id" title="tactic">set</span> <span class="id" title="var">g</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">snd</span> <span class="id" title="tactic">extensionality</span> <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)). <span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">p'</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">exact</span> <span class="id" title="var">p'</span>^.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <span class="id" title="var">g</span> <span class="id" title="var">b</span>  <span class="id" title="tactic">set</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">snd</span> <span class="id" title="tactic">extensionality</span> <span class="id" title="var">p</span>^).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)). <span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">p'</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">exact</span> <span class="id" title="var">p'</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1098"></a><h2 class="section">Definitions of particular sets in V</h2>

<div class="paragraph"> </div>

 The empty set 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">V_empty</span> : <span class="id" title="var">V</span> := <span class="id" title="tactic">set</span> (<span class="id" title="var">Empty_ind</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">V</span>)).<br/>

<br/>
</div>

<div class="doc">
The singleton {u} 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">V_singleton</span> (<span class="id" title="var">u</span> : <span class="id" title="var">V</span>) : <span class="id" title="var">V@</span>{<span class="id" title="var">U'</span> <span class="id" title="var">U</span>} := <span class="id" title="tactic">set</span> (<span class="id" title="var">Unit_ind</span> <span class="id" title="var">u</span>).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_ap_V_singleton</span> {<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">V</span>}<br/>
: <span class="id" title="var">IsEquiv</span> (@<span class="id" title="var">ap</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">V_singleton</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">Build_IsEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [ <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">path_ishprop</span> ].<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">path_V_eqimg</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">intros</span> (<span class="id" title="var">H1</span>, <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">Trunc_rec</span> <span class="id" title="var">_</span> (<span class="id" title="var">H1</span> <span class="id" title="var">tt</span>)). <span class="id" title="tactic">intros</span> [<span class="id" title="var">t</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">exact</span> <span class="id" title="var">p</span>. }<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The pair {u,v} 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">V_pair</span> (<span class="id" title="var">u</span> : <span class="id" title="var">V</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">V</span>) : <span class="id" title="var">V@</span>{<span class="id" title="var">U'</span> <span class="id" title="var">U</span>} := <span class="id" title="tactic">set</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> : <span class="id" title="var">Bool</span> =&gt; <span class="id" title="keyword">if</span> <span class="id" title="var">b</span> <span class="id" title="keyword">then</span> <span class="id" title="var">u</span> <span class="id" title="keyword">else</span> <span class="id" title="var">v</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">path_pair</span> {<span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">u'</span> <span class="id" title="var">v'</span> : <span class="id" title="var">V@</span>{<span class="id" title="var">U'</span> <span class="id" title="var">U</span>}} : (<span class="id" title="var">u</span> = <span class="id" title="var">u'</span>) * (<span class="id" title="var">v</span> = <span class="id" title="var">v'</span>) -&gt; <span class="id" title="var">V_pair</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> = <span class="id" title="var">V_pair</span> <span class="id" title="var">u'</span> <span class="id" title="var">v'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> (<span class="id" title="var">H1</span>, <span class="id" title="var">H2</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">setext'</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Bool_ind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">true</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">false</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Bool_ind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">true</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">false</span>; <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">pair_eq_singleton</span> {<span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">w</span> : <span class="id" title="var">V</span>} : <span class="id" title="var">V_pair</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> = <span class="id" title="var">V_singleton</span> <span class="id" title="var">w</span> &lt;-&gt; (<span class="id" title="var">u</span> = <span class="id" title="var">w</span>) * (<span class="id" title="var">v</span> = <span class="id" title="var">w</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">path_V_eqimg</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">H1</span>, <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">Trunc_rec</span> <span class="id" title="var">_</span> (<span class="id" title="var">H1</span> <span class="id" title="var">true</span>)). <span class="id" title="tactic">intros</span> [<span class="id" title="var">t</span> <span class="id" title="var">p</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">Trunc_rec</span> <span class="id" title="var">_</span> (<span class="id" title="var">H1</span> <span class="id" title="var">false</span>)). <span class="id" title="tactic">intros</span> [<span class="id" title="var">t</span> <span class="id" title="var">p'</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">exact</span> <span class="id" title="var">p</span>| <span class="id" title="tactic">exact</span> <span class="id" title="var">p'</span>].<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> (<span class="id" title="var">p1</span>, <span class="id" title="var">p2</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">setext'</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">tt</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; [<span class="id" title="tactic">exact</span> <span class="id" title="var">p1</span> | <span class="id" title="tactic">exact</span> <span class="id" title="var">p2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intro</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">true</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">exact</span> <span class="id" title="var">p1</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The ordered pair (u,v) 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">V_pair_ord</span> (<span class="id" title="var">u</span> : <span class="id" title="var">V</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">V</span>) : <span class="id" title="var">V</span> := <span class="id" title="var">V_pair</span> (<span class="id" title="var">V_singleton</span> <span class="id" title="var">u</span>) (<span class="id" title="var">V_pair</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>).<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot; [ u , v ] " := (<span class="id" title="var">V_pair_ord</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>) : <span class="id" title="var">set_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">path_pair_ord</span> {<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> : <span class="id" title="var">V</span>} : [<span class="id" title="var">a</span>, <span class="id" title="var">b</span>] = [<span class="id" title="var">c</span>, <span class="id" title="var">d</span>] &lt;-&gt; (<span class="id" title="var">a</span> = <span class="id" title="var">c</span>) * (<span class="id" title="var">b</span> = <span class="id" title="var">d</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">p1</span> : <span class="id" title="var">a</span> = <span class="id" title="var">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <span class="id" title="var">V_singleton</span> <span class="id" title="var">a</span>  [<span class="id" title="var">c</span>, <span class="id" title="var">d</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">snd</span> <span class="id" title="tactic">extensionality</span> <span class="id" title="var">p</span>). <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">true</span>; <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">Trunc_rec</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">intros</span> [<span class="id" title="var">t</span> <span class="id" title="var">p'</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> ((<span class="id" title="var">ap</span> <span class="id" title="var">V_singleton</span>)^-1 <span class="id" title="var">p'</span>^).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> (<span class="id" title="var">fst</span> <span class="id" title="var">pair_eq_singleton</span> <span class="id" title="var">p'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">p1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <span class="id" title="var">hor</span> (<span class="id" title="var">b</span> = <span class="id" title="var">c</span>) (<span class="id" title="var">b</span> = <span class="id" title="var">d</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assert</span> (<span class="id" title="var">H'</span> : <span class="id" title="var">V_pair</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>  [<span class="id" title="var">c</span>, <span class="id" title="var">d</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">snd</span> <span class="id" title="tactic">extensionality</span> <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">false</span>; <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">Trunc_rec</span> <span class="id" title="var">_</span> <span class="id" title="var">H'</span>). <span class="id" title="tactic">intros</span> [<span class="id" title="var">t</span> <span class="id" title="var">p'</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">fst</span> <span class="id" title="var">pair_eq_singleton</span> <span class="id" title="var">p'</span>^).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">path_V_eqimg</span> <span class="id" title="var">p'</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">H1</span>, <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">H2</span> <span class="id" title="var">false</span>); <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">t</span> <span class="id" title="var">p''</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>; <span class="id" title="tactic">exact</span> <span class="id" title="var">p''</span>^.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>; <span class="id" title="tactic">exact</span> <span class="id" title="var">p''</span>^. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">Trunc_rec</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">intro</span> <span class="id" title="tactic">case</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="tactic">case</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p'</span>| <span class="id" title="var">p'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H'</span> : [<span class="id" title="var">a</span>, <span class="id" title="var">b</span>] = <span class="id" title="var">V_singleton</span> (<span class="id" title="var">V_singleton</span> <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">snd</span> <span class="id" title="var">pair_eq_singleton</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">ap</span>; <span class="id" title="tactic">exact</span> (<span class="id" title="var">p1</span> @ <span class="id" title="var">p'</span>^).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">snd</span> <span class="id" title="var">pair_eq_singleton</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">exact</span> (<span class="id" title="var">p1</span> @ <span class="id" title="var">p'</span>^) | <span class="id" title="tactic">reflexivity</span>]. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H''</span> : <span class="id" title="var">V_pair</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> = <span class="id" title="var">V_singleton</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">fst</span> <span class="id" title="var">pair_eq_singleton</span> (<span class="id" title="var">p</span>^ @ <span class="id" title="var">H'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> (<span class="id" title="var">fst</span> <span class="id" title="var">pair_eq_singleton</span> <span class="id" title="var">H''</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> (<span class="id" title="var">p</span>, <span class="id" title="var">p'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_pair</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">ap</span>; <span class="id" title="tactic">exact</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">path_pair</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>; <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The cartesian product a  b 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">V_cart_prod</span> (<span class="id" title="var">a</span> : <span class="id" title="var">V</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">V</span>) : <span class="id" title="var">V</span><br/>
:= <span class="id" title="tactic">set</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> : [<span class="id" title="var">a</span>] * [<span class="id" title="var">b</span>] =&gt; [<span class="id" title="var">func_of_members</span> (<span class="id" title="var">fst</span> <span class="id" title="var">x</span>), <span class="id" title="var">func_of_members</span> (<span class="id" title="var">snd</span> <span class="id" title="var">x</span>)]).<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot; a  b " := (<span class="id" title="var">V_cart_prod</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) : <span class="id" title="var">set_scope</span>.<br/>

<br/>
</div>

<div class="doc">
f is a function with domain a and codomain b 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">V_is_func</span> (<span class="id" title="var">a</span> : <span class="id" title="var">V</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">V</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">V</span>) := <span class="id" title="var">f</span>  (<span class="id" title="var">a</span>  <span class="id" title="var">b</span>)<br/>
&nbsp;* (<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">x</span>  <span class="id" title="var">a</span> -&gt; <span class="id" title="var">hexists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">y</span>  <span class="id" title="var">b</span> * [<span class="id" title="var">x</span>,<span class="id" title="var">y</span>]  <span class="id" title="var">f</span>))<br/>
&nbsp;* (<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">y'</span>, [<span class="id" title="var">x</span>,<span class="id" title="var">y</span>]  <span class="id" title="var">f</span> * [<span class="id" title="var">x</span>,<span class="id" title="var">y'</span>]  <span class="id" title="var">f</span> -&gt; <span class="id" title="var">y</span> = <span class="id" title="var">y'</span>).<br/>

<br/>
</div>

<div class="doc">
The set of functions from a to b 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">V_func</span> (<span class="id" title="var">a</span> : <span class="id" title="var">V</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">V</span>) : <span class="id" title="var">V</span><br/>
:= @<span class="id" title="tactic">set</span> ([<span class="id" title="var">a</span>] -&gt; [<span class="id" title="var">b</span>]) (<span class="id" title="keyword">fun</span> <span class="id" title="var">f</span> =&gt; <span class="id" title="tactic">set</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; [<span class="id" title="var">func_of_members</span> <span class="id" title="var">x</span>, <span class="id" title="var">func_of_members</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)] )).<br/>

<br/>
</div>

<div class="doc">
The union of a set Uv 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">V_union</span> (<span class="id" title="var">v</span> : <span class="id" title="var">V</span>) :=<br/>
&nbsp;&nbsp;@<span class="id" title="tactic">set</span> ({<span class="id" title="var">x</span> : [<span class="id" title="var">v</span>] &amp; [<span class="id" title="var">func_of_members</span> <span class="id" title="var">x</span>]}) (<span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> =&gt; <span class="id" title="var">func_of_members</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">z</span>)).<br/>

<br/>
</div>

<div class="doc">
The ordinal successor x  {x} 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">V_succ</span> : <span class="id" title="var">V</span> -&gt; <span class="id" title="var">V</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">V_rec'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="tactic">set</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">x</span> : <span class="id" title="var">A</span> + <span class="id" title="var">Unit</span>) =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">x</span> <span class="id" title="keyword">with</span> <span class="id" title="var">inl</span> <span class="id" title="var">a</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">inr</span> <span class="id" title="var">tt</span> =&gt; <span class="id" title="tactic">set</span> <span class="id" title="var">f</span> <span class="id" title="keyword">end</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">eq_img</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">setext'</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">generalize</span> (<span class="id" title="var">fst</span> <span class="id" title="var">eq_img</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">exists</span> (<span class="id" title="var">inl</span> <span class="id" title="var">b</span>); <span class="id" title="tactic">exact</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> (<span class="id" title="var">inr</span> <span class="id" title="var">tt</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">u</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">setext'</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">generalize</span> (<span class="id" title="var">snd</span> <span class="id" title="var">eq_img</span> <span class="id" title="var">b</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">exists</span> (<span class="id" title="var">inl</span> <span class="id" title="var">a</span>); <span class="id" title="tactic">exact</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> (<span class="id" title="var">inr</span> <span class="id" title="var">tt</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">u</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">setext'</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The set of finite ordinals 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">V_omega</span> : <span class="id" title="var">V</span><br/>
:= <span class="id" title="tactic">set</span> (<span class="id" title="keyword">fix</span> <span class="id" title="var">I</span> <span class="id" title="var">n</span> := <span class="id" title="keyword">match</span> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span> 0   =&gt; <span class="id" title="var">V_empty</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">n</span> =&gt; <span class="id" title="var">V_succ</span> (<span class="id" title="var">I</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">end</span>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab1099"></a><h2 class="section">Axioms of set theory (theorem 10.5.8)</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">not_mem_Vempty</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, ~ (<span class="id" title="var">x</span>  <span class="id" title="var">V_empty</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">Hx</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="var">Hx</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Trunc_rec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">ff</span> <span class="id" title="var">_</span>]. <span class="id" title="tactic">exact</span> <span class="id" title="var">ff</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">pairing</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>, <span class="id" title="var">hexists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">w</span> =&gt; <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">x</span>  <span class="id" title="var">w</span> &lt;-&gt; <span class="id" title="var">hor</span> (<span class="id" title="var">x</span> = <span class="id" title="var">u</span>) (<span class="id" title="var">x</span> = <span class="id" title="var">v</span>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">V_pair</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [[|] <span class="id" title="var">p</span>]; [<span class="id" title="tactic">left</span>|<span class="id" title="tactic">right</span>]; <span class="id" title="tactic">exact</span> <span class="id" title="var">p</span>^.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">p</span> | <span class="id" title="var">p</span>]; [<span class="id" title="tactic">exists</span> <span class="id" title="var">true</span> | <span class="id" title="tactic">exists</span> <span class="id" title="var">false</span>]; <span class="id" title="tactic">exact</span> <span class="id" title="var">p</span>^.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">infinity</span> : (<span class="id" title="var">V_empty</span>  <span class="id" title="var">V_omega</span>) * (<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">x</span>  <span class="id" title="var">V_omega</span> -&gt; <span class="id" title="var">V_succ</span> <span class="id" title="var">x</span>  <span class="id" title="var">V_omega</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> 0; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">n</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">exists</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">union</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">v</span>, <span class="id" title="var">hexists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">w</span> =&gt; <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">x</span>  <span class="id" title="var">w</span> &lt;-&gt; <span class="id" title="var">hexists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">u</span> =&gt; <span class="id" title="var">x</span>  <span class="id" title="var">u</span> * <span class="id" title="var">u</span>  <span class="id" title="var">v</span>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">v</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> (<span class="id" title="var">V_union</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [[<span class="id" title="var">u'</span> <span class="id" title="var">x'</span>] <span class="id" title="var">p</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">func_of_members</span> <span class="id" title="var">u'</span>); <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">refine</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> =&gt; <span class="id" title="var">x</span>  <span class="id" title="var">z</span>) (<span class="id" title="var">is_valid_presentation</span> (<span class="id" title="var">func_of_members</span> <span class="id" title="var">u'</span>))^ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">x'</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">refine</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> =&gt; <span class="id" title="var">func_of_members</span> <span class="id" title="var">u'</span>  <span class="id" title="var">z</span>) (<span class="id" title="var">is_valid_presentation</span> <span class="id" title="var">v</span>)^ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">u'</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Trunc_rec</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">u</span> (<span class="id" title="var">Hx</span>, <span class="id" title="var">Hu</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> =&gt; <span class="id" title="var">u</span>  <span class="id" title="var">z</span>) (<span class="id" title="var">is_valid_presentation</span> <span class="id" title="var">v</span>) <span class="id" title="var">Hu</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Trunc_rec</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">u'</span> <span class="id" title="var">pu</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> =&gt; <span class="id" title="var">x</span>  <span class="id" title="var">z</span>) (<span class="id" title="var">is_valid_presentation</span> (<span class="id" title="var">func_of_members</span> <span class="id" title="var">u'</span>)) (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> =&gt; <span class="id" title="var">x</span>  <span class="id" title="var">z</span>) <span class="id" title="var">pu</span>^ <span class="id" title="var">Hx</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Trunc_rec</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">x'</span> <span class="id" title="var">px</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">u'</span>; <span class="id" title="var">x'</span>). <span class="id" title="tactic">exact</span> <span class="id" title="var">px</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">function</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>, <span class="id" title="var">hexists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">w</span> =&gt; <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">x</span>  <span class="id" title="var">w</span> &lt;-&gt; <span class="id" title="var">V_is_func</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">x</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> (<span class="id" title="var">V_func</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">memb_u</span> : <span class="id" title="var">u</span> = <span class="id" title="tactic">set</span> (@<span class="id" title="var">func_of_members</span> <span class="id" title="var">u</span>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">exact</span> (<span class="id" title="var">is_valid_presentation</span> <span class="id" title="var">u</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">memb_v</span> : <span class="id" title="var">v</span> = <span class="id" title="tactic">set</span> (@<span class="id" title="var">func_of_members</span> <span class="id" title="var">v</span>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">exact</span> (<span class="id" title="var">is_valid_presentation</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">phi</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">split</span>;[<span class="id" title="tactic">split</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">z</span> <span class="id" title="var">Hz</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">generalize</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Trunc_rec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">h</span> <span class="id" title="var">p_phi</span>]. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">z</span>  <span class="id" title="var">x</span>) <span class="id" title="var">p_phi</span>^ <span class="id" title="var">Hz</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">exists</span> (<span class="id" title="var">a</span>, <span class="id" title="var">h</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">Hx</span>. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">x</span>  <span class="id" title="var">y</span>) <span class="id" title="var">memb_u</span> <span class="id" title="var">Hx</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Trunc_rec</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">generalize</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">h</span> <span class="id" title="var">p_phi</span>]. <span class="id" title="tactic">exists</span> (<span class="id" title="var">func_of_members</span> (<span class="id" title="var">h</span> <span class="id" title="var">a</span>)). <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> =&gt; <span class="id" title="var">func_of_members</span> (<span class="id" title="var">h</span> <span class="id" title="var">a</span>)  <span class="id" title="var">z</span>) <span class="id" title="var">memb_v</span>^ (<span class="id" title="var">tr</span> (<span class="id" title="var">h</span> <span class="id" title="var">a</span>; 1))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; [<span class="id" title="var">x</span>, <span class="id" title="var">func_of_members</span> (<span class="id" title="var">h</span> <span class="id" title="var">a</span>)]  <span class="id" title="var">y</span>) <span class="id" title="var">p_phi</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">y'</span> (<span class="id" title="var">Hy</span>, <span class="id" title="var">Hy'</span>). <span class="id" title="tactic">generalize</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Trunc_rec</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">h</span> <span class="id" title="var">p_phi</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> =&gt; [<span class="id" title="var">x</span>, <span class="id" title="var">y</span>]  <span class="id" title="var">z</span>) <span class="id" title="var">p_phi</span>^ <span class="id" title="var">Hy</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">Trunc_rec</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">p</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> =&gt; [<span class="id" title="var">x</span>, <span class="id" title="var">y'</span>]  <span class="id" title="var">z</span>) <span class="id" title="var">p_phi</span>^ <span class="id" title="var">Hy'</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">Trunc_rec</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">a'</span> <span class="id" title="var">p'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">fst</span> <span class="id" title="var">path_pair_ord</span> <span class="id" title="var">p</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">px</span>, <span class="id" title="var">py</span>). <span class="id" title="tactic">destruct</span> (<span class="id" title="var">fst</span> <span class="id" title="var">path_pair_ord</span> <span class="id" title="var">p'</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">px'</span>, <span class="id" title="var">py'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">func_of_members</span> (<span class="id" title="var">h</span> <span class="id" title="var">a</span>)); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">path_hints</span>. <span class="id" title="tactic">transitivity</span> (<span class="id" title="var">func_of_members</span> (<span class="id" title="var">h</span> <span class="id" title="var">a'</span>));<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">path_hints</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">ap</span> <span class="id" title="var">func_of_members</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">refine</span> (<span class="id" title="var">ap</span> <span class="id" title="var">h</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isinj_embedding</span> <span class="id" title="var">func_of_members</span> <span class="id" title="var">IsEmbedding_funcofmembers</span> <span class="id" title="var">a</span> <span class="id" title="var">a'</span> (<span class="id" title="var">px</span> @ <span class="id" title="var">px'</span>^)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> ((<span class="id" title="var">H1</span>, <span class="id" title="var">H2</span>), <span class="id" title="var">H3</span>). <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">h</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : [<span class="id" title="var">u</span>], {<span class="id" title="var">b</span> : [<span class="id" title="var">v</span>] &amp; [<span class="id" title="var">func_of_members</span> <span class="id" title="var">a</span>, <span class="id" title="var">func_of_members</span> <span class="id" title="var">b</span>]  <span class="id" title="var">phi</span>}).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">pose</span> (<span class="id" title="var">x</span> := <span class="id" title="var">func_of_members</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">transparent</span> <span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : {<span class="id" title="var">y</span> : <span class="id" title="var">V</span> &amp; <span class="id" title="var">y</span>  <span class="id" title="var">v</span> * [<span class="id" title="var">x</span>, <span class="id" title="var">y</span>]  <span class="id" title="var">phi</span>}).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">refine</span> (@<span class="id" title="var">untrunc_istrunc</span> (-1) {<span class="id" title="var">y</span> : <span class="id" title="var">V</span> &amp; <span class="id" title="var">y</span>  <span class="id" title="var">v</span> * [<span class="id" title="var">x</span>, <span class="id" title="var">y</span>]  <span class="id" title="var">phi</span>} <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H2</span> <span class="id" title="var">x</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> =&gt; <span class="id" title="var">x</span>  <span class="id" title="var">z</span>) <span class="id" title="var">memb_u</span>^ (<span class="id" title="var">tr</span> (<span class="id" title="var">a</span>; 1))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hprop_allpath</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">y</span> (<span class="id" title="var">H1_y</span>, <span class="id" title="var">H2_y</span>)] [<span class="id" title="var">y'</span> (<span class="id" title="var">H1_y'</span>, <span class="id" title="var">H2_y'</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_sigma_uncurried</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">H3</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">y'</span> (<span class="id" title="var">H2_y</span>, <span class="id" title="var">H2_y'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_ishprop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">y</span> (<span class="id" title="var">H1_y</span>, <span class="id" title="var">H2_y</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (@<span class="id" title="var">untrunc_istrunc</span> (-1) <span class="id" title="var">_</span> (<span class="id" title="var">IsEmbedding_funcofmembers</span> <span class="id" title="var">y</span>) (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> =&gt; <span class="id" title="var">y</span>  <span class="id" title="var">z</span>) <span class="id" title="var">memb_v</span> <span class="id" title="var">H1_y</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> <span class="id" title="var">Hb</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> =&gt; [<span class="id" title="var">x</span>, <span class="id" title="var">z</span>]  <span class="id" title="var">phi</span>) <span class="id" title="var">Hb</span>^ <span class="id" title="var">H2_y</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> =&gt; <span class="id" title="var">pr1</span> (<span class="id" title="var">h</span> <span class="id" title="var">a</span>)). <span class="id" title="tactic">apply</span> <span class="id" title="tactic">extensionality</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">z</span> <span class="id" title="var">Hz</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="var">Hz</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Trunc_rec</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">Ha</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">w</span> =&gt; <span class="id" title="var">w</span>  <span class="id" title="var">phi</span>) <span class="id" title="var">Ha</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">h</span> <span class="id" title="var">a</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">z</span> <span class="id" title="var">Hz</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">H1</span> <span class="id" title="var">z</span> <span class="id" title="var">Hz</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)). <span class="id" title="tactic">intros</span> [(<span class="id" title="var">a</span>,<span class="id" title="var">b</span>) <span class="id" title="var">p</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">transitivity</span> ([<span class="id" title="var">func_of_members</span> <span class="id" title="var">a</span>, <span class="id" title="var">func_of_members</span> <span class="id" title="var">b</span>]); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">path_hints</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">func_of_members</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">h</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">w</span> =&gt; <span class="id" title="var">w</span>  <span class="id" title="var">phi</span>) <span class="id" title="var">p</span>^ <span class="id" title="var">Hz</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">replacement</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">r</span> : <span class="id" title="var">V</span> -&gt; <span class="id" title="var">V</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">V</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">hexists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">w</span> =&gt; <span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <span class="id" title="var">y</span>  <span class="id" title="var">w</span> &lt;-&gt; <span class="id" title="var">hexists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> =&gt; <span class="id" title="var">z</span>  <span class="id" title="var">x</span> * (<span class="id" title="var">r</span> <span class="id" title="var">z</span> = <span class="id" title="var">y</span>))).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">r</span>. <span class="id" title="tactic">refine</span> (<span class="id" title="var">V_ind_hprop</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="tactic">set</span> (<span class="id" title="var">r</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>)). <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">exists</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Trunc_rec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">z</span> [<span class="id" title="var">h</span> <span class="id" title="var">p</span>]]. <span class="id" title="tactic">generalize</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">p'</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">transitivity</span> (<span class="id" title="var">r</span> <span class="id" title="var">z</span>); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">path_hints</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">ap</span> <span class="id" title="var">r</span> <span class="id" title="var">p'</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">separation</span> (<span class="id" title="var">C</span> : <span class="id" title="var">V</span> -&gt; <span class="id" title="var">HProp</span>) : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">V</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">hexists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">w</span> =&gt; <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">x</span>  <span class="id" title="var">w</span> &lt;-&gt; <span class="id" title="var">x</span>  <span class="id" title="var">a</span> * (<span class="id" title="var">C</span> <span class="id" title="var">x</span>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">V_ind_hprop</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="tactic">set</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> : {<span class="id" title="var">a</span> : <span class="id" title="var">A</span> &amp; <span class="id" title="var">C</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)} =&gt; <span class="id" title="var">f</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">z</span>))). <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Trunc_rec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [[<span class="id" title="var">a</span> <span class="id" title="var">h</span>] <span class="id" title="var">p</span>]. <span class="id" title="tactic">split</span>. + <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">assumption</span>. + <span class="id" title="tactic">exact</span> (<span class="id" title="var">transport</span> <span class="id" title="var">C</span> <span class="id" title="var">p</span> <span class="id" title="var">h</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>]. <span class="id" title="tactic">generalize</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">Trunc_functor</span> (-1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">exists</span> (<span class="id" title="var">a</span>; <span class="id" title="var">transport</span> <span class="id" title="var">C</span> <span class="id" title="var">p</span>^ <span class="id" title="var">H2</span>). <span class="id" title="tactic">exact</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">AssumingUA</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>