<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>JoinAssoc</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library JoinAssoc</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Basics</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">WildCat</span> <span class="id" title="var">Join.Core</span> <span class="id" title="var">Join.TriJoin</span> <span class="id" title="var">Spaces.Nat.Core</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1165"></a><h1 class="section">The associativity of <span class="inlinecode"><span class="id" title="var">Join</span></span></h1>


<div class="paragraph"> </div>

  We use the recursion principle for the triple join (from TriJoin.v) to prove the associativity of Join.  We'll use the common technique of combining symmetry and a twist equivalence.  Temporarily writing * for Join, symmetry says that <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode">&lt;~&gt;</span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">A</span></span> and the twist says that <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">*</span> <span class="inlinecode">(<span class="id" title="var">B</span></span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">C</span>)</span> <span class="inlinecode">&lt;~&gt;</span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode">*</span> <span class="inlinecode">(<span class="id" title="var">A</span></span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">C</span>)</span>.  From these we get a composite equivalence <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">*</span> <span class="inlinecode">(<span class="id" title="var">B</span></span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">C</span>)</span> <span class="inlinecode">&lt;~&gt;</span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">*</span> <span class="inlinecode">(<span class="id" title="var">C</span></span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">B</span>)</span> <span class="inlinecode">&lt;~&gt;</span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode">*</span> <span class="inlinecode">(<span class="id" title="var">A</span></span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">B</span>)</span> <span class="inlinecode">&lt;~&gt;</span> <span class="inlinecode">(<span class="id" title="var">A</span></span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">B</span>)</span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">C</span></span>.  One advantage of this approach is that both symmetry and the twist are their own inverses, so there are fewer maps to define and fewer composites to prove are homotopic to the identity. Symmetry is proved in Join/Core.v. 
<div class="paragraph"> </div>

<a id="lab1166"></a><h2 class="section">The twist equivalence <span class="inlinecode"><span class="id" title="var">TriJoin</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode">&lt;~&gt;</span> <span class="inlinecode"><span class="id" title="var">TriJoin</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span></h2>


<div class="paragraph"> </div>

  We prove the twist equivalence using the Yoneda lemma.  The idea is that <span class="inlinecode"><span class="id" title="var">TriJoin</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">P</span></span> is equivalent (as a 0-groupoid) to <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span>, and the latter is very symmetrical by construction, which makes it easy to show that it is equivalent to <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span>.  Going back along the first equivalence gets us to <span class="inlinecode"><span class="id" title="var">TriJoin</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">P</span></span>.  These equivalences are natural in <span class="inlinecode"><span class="id" title="var">P</span></span>, so the twist equivalence follows from the Yoneda lemma. 
<div class="paragraph"> </div>

 First we define a map of 0-groupoids that will underlie the natural equivalence. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoinrecdata_twist</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">trijoinrecdata_0gpd</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> $-&gt; <span class="id" title="var">trijoinrecdata_0gpd</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Build_Morphism_0Gpd</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;map&nbsp;of&nbsp;types&nbsp;<span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span>:&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">f3</span> <span class="id" title="var">f12</span> <span class="id" title="var">f13</span> <span class="id" title="var">f23</span> <span class="id" title="var">f123</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">snrapply</span> (<span class="id" title="var">Build_TriJoinRecData</span> <span class="id" title="var">f2</span> <span class="id" title="var">f1</span> <span class="id" title="var">f3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">exact</span> (<span class="id" title="var">f12</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>)^.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">f23</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">f13</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>; <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_Vp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">f123</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;It&nbsp;respects&nbsp;the&nbsp;paths.&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Build_Is0Functor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Build_TriJoinRecPath</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1, 2, 3, 5, 6: <span class="id" title="tactic">apply</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span> <span class="id" title="keyword">zeta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">prism_ind_two</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span> <span class="id" title="var">_X_</span>; <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">concat_p1_1p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span> <span class="id" title="keyword">zeta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">prism_ind</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>; <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">triangle_ind</span> <span class="id" title="var">f</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
This map is its own inverse in the 1-category of 0-groupoids. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoinrecdata_twist_inv</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">trijoinrecdata_twist</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> $<span class="id" title="var">o</span> <span class="id" title="var">trijoinrecdata_twist</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> $== <span class="id" title="var">Id</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">f</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">bundle_trijoinrecpath</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">inv_V</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">triangle_ind</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
We get the twist natural equivalence on <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoinrecdata_twist_natequiv</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">NatEquiv</span> (<span class="id" title="var">trijoinrecdata_0gpd_fun</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>) (<span class="id" title="var">trijoinrecdata_0gpd_fun</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Build_NatEquiv</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;An&nbsp;equivalence&nbsp;of&nbsp;0-groupoids&nbsp;for&nbsp;each&nbsp;<span class="inlinecode"><span class="id" title="var">P</span></span>:&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">cate_adjointify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1, 2: <span class="id" title="tactic">apply</span> <span class="id" title="var">trijoinrecdata_twist</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1, 2: <span class="id" title="tactic">apply</span> <span class="id" title="var">trijoinrecdata_twist_inv</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Naturality:&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="var">snrapply</span> <span class="id" title="var">Build_Is1Natural</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">g</span> <span class="id" title="var">f</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bundle_trijoinrecpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">ap_V</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="var">triangle_ind</span> <span class="id" title="var">f</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Combining with the recursion equivalence <span class="inlinecode"><span class="id" title="var">trijoin_rec_inv_natequiv</span></span> and its inverse gives the twist natural equivalence between the representable functors. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoinrecdata_fun_twist</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">NatEquiv</span> (<span class="id" title="var">opyon_0gpd</span> (<span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>)) (<span class="id" title="var">opyon_0gpd</span> (<span class="id" title="var">TriJoin</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span>))<br/>
&nbsp;&nbsp;:= <span class="id" title="var">natequiv_compose</span> (<span class="id" title="var">trijoin_rec_natequiv</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">natequiv_compose</span> (<span class="id" title="var">trijoinrecdata_twist_natequiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>) (<span class="id" title="var">trijoin_rec_inv_natequiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>)).<br/>

<br/>
</div>

<div class="doc">
The Yoneda lemma for 0-groupoid valued functors therefore gives us an equivalence between the representing objects.  We mark this with a prime, since we'll use a homotopic map with a slightly simpler definition. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_trijoin_twist'</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> &lt;~&gt; <span class="id" title="var">TriJoin</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rapply</span> (<span class="id" title="var">opyon_equiv_0gpd</span> (<span class="id" title="var">A</span>:=<span class="id" title="keyword">Type</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">trijoinrecdata_fun_twist</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
It has the nice property that the underlying function of the inverse is again <span class="inlinecode"><span class="id" title="var">equiv_trijoin_twist'</span></span>, with arguments permuted. 
</div>
<div class="code">
<span class="id" title="keyword">Local Definition</span> <span class="id" title="var">trijoin_twist_check1</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">equiv_trijoin_twist'</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>)^-1 = <span class="id" title="var">equiv_fun</span> (<span class="id" title="var">equiv_trijoin_twist'</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">idpath</span>.<br/>

<br/>
</div>

<div class="doc">
The definition we end up with is almost the same as the obvious one, but has some extra <span class="inlinecode"><span class="id" title="var">ap</span></span> <span class="inlinecode"><span class="id" title="var">idmap</span></span>s in it. 
</div>
<div class="code">
<span class="id" title="keyword">Local Definition</span> <span class="id" title="var">twijoin_twist_check2</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">equiv_fun</span> (<span class="id" title="var">equiv_trijoin_twist'</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">trijoin_rec</span> {| <span class="id" title="var">j1</span> := <span class="id" title="var">join2</span>; <span class="id" title="var">j2</span> := <span class="id" title="var">join1</span>; <span class="id" title="var">j3</span> := <span class="id" title="var">join3</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j12</span> := <span class="id" title="keyword">fun</span> (<span class="id" title="var">b</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">B</span>) =&gt; (<span class="id" title="var">ap</span> <span class="id" title="var">idmap</span> (<span class="id" title="var">join12</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>))^;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j13</span> := <span class="id" title="keyword">fun</span> (<span class="id" title="var">b</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">C</span>) =&gt; <span class="id" title="var">ap</span> <span class="id" title="var">idmap</span> (<span class="id" title="var">join23</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j23</span> := <span class="id" title="keyword">fun</span> (<span class="id" title="var">a</span> : <span class="id" title="var">B</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">C</span>) =&gt; <span class="id" title="var">ap</span> <span class="id" title="var">idmap</span> (<span class="id" title="var">join13</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j123</span> := <span class="id" title="keyword">fun</span> (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">B</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">C</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">moveR_Vp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">ap_triangle</span> <span class="id" title="var">idmap</span> (<span class="id" title="var">join123</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>))^ |}<br/>
&nbsp;&nbsp;:= <span class="id" title="var">idpath</span>.<br/>

<br/>
</div>

<div class="doc">
The next two give the obvious definition. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_twist_recdata</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> (<span class="id" title="var">TriJoin</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">Build_TriJoinRecData</span> <span class="id" title="var">join2</span> <span class="id" title="var">join1</span> <span class="id" title="var">join3</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> =&gt; (<span class="id" title="var">join12</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span>)^) <span class="id" title="var">join23</span> <span class="id" title="var">join13</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> =&gt; <span class="id" title="var">moveR_Vp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">join123</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>)^).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_twist</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> -&gt; <span class="id" title="var">TriJoin</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">trijoin_rec</span> (<span class="id" title="var">trijoin_twist_recdata</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>).<br/>

<br/>
</div>

<div class="doc">
As an aside, note that <span class="inlinecode"><span class="id" title="var">trijoin_twist</span></span> computes nicely on <span class="inlinecode"><span class="id" title="var">joinr</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Local Definition</span> <span class="id" title="var">trijoin_twist_joinr</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">trijoin_twist</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">o</span> <span class="id" title="var">joinr</span> = <span class="id" title="var">functor_join</span> <span class="id" title="var">idmap</span> <span class="id" title="var">joinr</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">idpath</span>.<br/>

<br/>
</div>

<div class="doc">
The obvious definition is homotopic to the definition via the Yoneda lemma. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_twist_homotopic</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">trijoin_twist</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> == <span class="id" title="var">equiv_trijoin_twist'</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
</div>

<div class="doc">
Both sides are <span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span> applied to <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span>: 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="var">rapply</span> (<span class="id" title="var">fmap</span> <span class="id" title="var">trijoin_rec</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">bundle_trijoinrecpath</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">refine</span> (<span class="id" title="var">ap</span> <span class="id" title="var">inverse</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;1, 2, 3: <span class="id" title="tactic">apply</span> <span class="id" title="var">ap_idmap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">join123</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">join23</span> (<span class="id" title="var">A</span>:=<span class="id" title="var">B</span>) <span class="id" title="var">a</span> <span class="id" title="var">c</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">join13</span> (<span class="id" title="var">B</span>:=<span class="id" title="var">A</span>) <span class="id" title="var">b</span> <span class="id" title="var">c</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">join12</span> (<span class="id" title="var">C</span>:=<span class="id" title="var">C</span>) <span class="id" title="var">b</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">join3</span> (<span class="id" title="var">A</span>:=<span class="id" title="var">B</span>) (<span class="id" title="var">B</span>:=<span class="id" title="var">A</span>) <span class="id" title="var">c</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">join2</span> (<span class="id" title="var">A</span>:=<span class="id" title="var">B</span>) (<span class="id" title="var">C</span>:=<span class="id" title="var">C</span>) <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">join1</span> (<span class="id" title="var">B</span>:=<span class="id" title="var">A</span>) (<span class="id" title="var">C</span>:=<span class="id" title="var">C</span>) <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">k1</span> <span class="id" title="var">k2</span> <span class="id" title="var">k3</span> <span class="id" title="var">k12</span> <span class="id" title="var">k13</span> <span class="id" title="var">k23</span> <span class="id" title="var">k123</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">k12</span>, <span class="id" title="var">k23</span>, <span class="id" title="var">k123</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Therefore the obvious definition is also an equivalence, and the inverse function can also be chosen to be <span class="inlinecode"><span class="id" title="var">trijoin_twist</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_trijoin_twist</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> &lt;~&gt; <span class="id" title="var">TriJoin</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">equiv_homotopic_inverse</span> (<span class="id" title="var">equiv_trijoin_twist'</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">trijoin_twist_homotopic</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">trijoin_twist_homotopic</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab1167"></a><h2 class="section">The associativity of <span class="inlinecode"><span class="id" title="var">Join</span></span></h2>

<div class="paragraph"> </div>

 <span class="inlinecode"><span class="id" title="var">trijoin_twist</span></span> corresponds to the permutation (1,2).  The equivalence corresponding to the permutation (2,3) also plays a key role, so we name it here. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_id_sym</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> &lt;~&gt; <span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span> <span class="id" title="var">B</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">equiv_functor_join</span> <span class="id" title="var">equiv_idmap</span> (<span class="id" title="var">equiv_join_sym</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>).<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">trijoin_id_sym</span> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">never</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">join_assoc</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="var">Join</span> <span class="id" title="var">A</span> (<span class="id" title="var">Join</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>) &lt;~&gt; <span class="id" title="var">Join</span> (<span class="id" title="var">Join</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) <span class="id" title="var">C</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> <span class="id" title="var">oE</span> <span class="id" title="var">trijoin_id_sym</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> <span class="id" title="var">oE</span> <span class="id" title="var">equiv_trijoin_twist</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_join_sym</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">join_assoc</span> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">never</span>.<br/>

<br/>
</div>

<div class="doc">
As a consequence, we get associativity of powers. 
</div>
<div class="code">
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">join_join_power</span> <span class="id" title="var">A</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span><br/>
&nbsp;&nbsp;: <span class="id" title="var">Join</span> (<span class="id" title="var">join_power</span> <span class="id" title="var">A</span> <span class="id" title="var">n</span>) (<span class="id" title="var">join_power</span> <span class="id" title="var">A</span> <span class="id" title="var">m</span>) &lt;~&gt; <span class="id" title="var">join_power</span> <span class="id" title="var">A</span> (<span class="id" title="var">n</span> + <span class="id" title="var">m</span>)%<span class="id" title="var">nat</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">n</span> <span class="id" title="var">IHn</span>].<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">exact</span> (<span class="id" title="var">equiv_join_empty_left</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> <span class="id" title="var">oE</span> (<span class="id" title="var">join_assoc</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^-1%<span class="id" title="var">equiv</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">equiv_functor_join</span> <span class="id" title="var">equiv_idmap</span> <span class="id" title="var">IHn</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1168"></a><h2 class="section">Naturality of <span class="inlinecode"><span class="id" title="var">trijoin_twist</span></span></h2>

<div class="paragraph"> </div>

 Our goal is to prove that <span class="inlinecode"><span class="id" title="var">trijoin_twist</span></span> <span class="inlinecode"><span class="id" title="var">A'</span></span> <span class="inlinecode"><span class="id" title="var">B'</span></span> <span class="inlinecode"><span class="id" title="var">C'</span></span> <span class="inlinecode"><span class="id" title="var">o</span></span> <span class="inlinecode"><span class="id" title="var">functor_join</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode">(<span class="id" title="var">functor_join</span></span> <span class="inlinecode"><span class="id" title="var">g</span></span> <span class="inlinecode"><span class="id" title="var">h</span>)</span> is homotopic to <span class="inlinecode"><span class="id" title="var">functor_join</span></span> <span class="inlinecode"><span class="id" title="var">g</span></span> <span class="inlinecode">(<span class="id" title="var">functor_join</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">h</span>)</span> <span class="inlinecode"><span class="id" title="var">o</span></span> <span class="inlinecode"><span class="id" title="var">trijoin_twist</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span>. 
<div class="paragraph"> </div>

 We first give a way to write anything of the form <span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">o</span></span> <span class="inlinecode"><span class="id" title="var">trijoin_twist</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> as <span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span> applied to some <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_rec_trijoin_twist</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">trijoin_rec</span> <span class="id" title="var">f</span> <span class="id" title="var">o</span> <span class="id" title="var">trijoin_twist</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> == <span class="id" title="var">trijoin_rec</span> (<span class="id" title="var">trijoinrecdata_twist</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;We&nbsp;first&nbsp;replace&nbsp;<span class="inlinecode"><span class="id" title="var">trijoin_twist</span></span>&nbsp;with&nbsp;<span class="inlinecode"><span class="id" title="var">equiv_trijoin_twist'</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">trijoin_rec</span> <span class="id" title="var">f</span> <span class="id" title="var">o</span> <span class="id" title="var">equiv_trijoin_twist'</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>).<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">ap</span> (<span class="id" title="var">trijoin_rec</span> <span class="id" title="var">f</span>) (<span class="id" title="var">trijoin_twist_homotopic</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;LHS&nbsp;is&nbsp;now&nbsp;the&nbsp;twist&nbsp;natural&nbsp;transformation&nbsp;applied&nbsp;to&nbsp;<span class="inlinecode"><span class="id" title="var">Id</span></span>,&nbsp;followed&nbsp;by&nbsp;postcomposition;&nbsp;naturality&nbsp;states&nbsp;that&nbsp;that&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;natural&nbsp;trans&nbsp;applied&nbsp;to&nbsp;<span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">isnat_natequiv</span> (<span class="id" title="var">trijoinrecdata_fun_twist</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span>) (<span class="id" title="var">trijoin_rec</span> <span class="id" title="var">f</span>) <span class="id" title="var">_</span>)^$ $@ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;LHS&nbsp;simplifies&nbsp;to&nbsp;<span class="inlinecode"><span class="id" title="var">trijoinrecdata_fun_twist</span></span>&nbsp;applied&nbsp;to&nbsp;<span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span>.&nbsp;&nbsp;The&nbsp;former&nbsp;is&nbsp;a&nbsp;composite&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span>,&nbsp;<span class="inlinecode"><span class="id" title="var">trijoinrecdata_twist</span></span>&nbsp;and&nbsp;<span class="inlinecode"><span class="id" title="var">trijoin_rec_inv</span></span>,&nbsp;so&nbsp;we&nbsp;can&nbsp;write&nbsp;the&nbsp;LHS&nbsp;as:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (?<span class="id" title="var">L</span> $== ?<span class="id" title="var">R</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">trijoin_rec</span> (<span class="id" title="var">trijoinrecdata_twist</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> (<span class="id" title="var">trijoin_rec_inv</span> (<span class="id" title="var">trijoin_rec</span> <span class="id" title="var">f</span>))) $== <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">fmap</span> <span class="id" title="var">trijoin_rec</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">fmap</span> (<span class="id" title="var">trijoinrecdata_twist</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">trijoin_rec_beta</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Naturality of <span class="inlinecode"><span class="id" title="var">trijoin_twist</span></span>.  This version uses <span class="inlinecode"><span class="id" title="var">functor_trijoin</span></span> and simply combines previous results. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_twist_nat'</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A'</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">B'</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">C'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">trijoin_twist</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span> <span class="id" title="var">o</span> <span class="id" title="var">functor_trijoin</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id" title="var">functor_trijoin</span> <span class="id" title="var">g</span> <span class="id" title="var">f</span> <span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">trijoin_twist</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">trijoin_rec_trijoin_twist</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">nrapply</span> <span class="id" title="var">trijoin_rec_functor_trijoin</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
And now a version using <span class="inlinecode"><span class="id" title="var">functor_join</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_twist_nat</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A'</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">B'</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">C'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">trijoin_twist</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span> <span class="id" title="var">o</span> <span class="id" title="var">functor_join</span> <span class="id" title="var">f</span> (<span class="id" title="var">functor_join</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id" title="var">functor_join</span> <span class="id" title="var">g</span> (<span class="id" title="var">functor_join</span> <span class="id" title="var">f</span> <span class="id" title="var">h</span>) <span class="id" title="var">o</span> <span class="id" title="var">trijoin_twist</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrefine</span> (<span class="id" title="var">ap</span> <span class="id" title="var">_</span> (<span class="id" title="var">functor_trijoin_as_functor_join</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="var">rhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">functor_trijoin_as_functor_join</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">trijoin_twist_nat'</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1169"></a><h2 class="section">Naturality of <span class="inlinecode"><span class="id" title="var">trijoin_id_sym</span></span></h2>

<div class="paragraph"> </div>

 Naturality of <span class="inlinecode"><span class="id" title="var">trijoin_id_sym</span></span>, using <span class="inlinecode"><span class="id" title="var">functor_join</span></span>.  In this case, it's easier to do this version first. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_id_sym_nat</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A'</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">B'</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">C'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">trijoin_id_sym</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span> <span class="id" title="var">o</span> <span class="id" title="var">functor_join</span> <span class="id" title="var">f</span> (<span class="id" title="var">functor_join</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id" title="var">functor_join</span> <span class="id" title="var">f</span> (<span class="id" title="var">functor_join</span> <span class="id" title="var">h</span> <span class="id" title="var">g</span>) <span class="id" title="var">o</span> <span class="id" title="var">trijoin_id_sym</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lhs_V</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">functor_join_compose</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rhs_V</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">functor_join_compose</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">functor2_join</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">join_sym_nat</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Naturality of <span class="inlinecode"><span class="id" title="var">trijoin_id_sym</span></span>, using <span class="inlinecode"><span class="id" title="var">functor_trijoin</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_id_sym_nat'</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A'</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">B'</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">C'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">trijoin_id_sym</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span> <span class="id" title="var">o</span> <span class="id" title="var">functor_trijoin</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id" title="var">functor_trijoin</span> <span class="id" title="var">f</span> <span class="id" title="var">h</span> <span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">trijoin_id_sym</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lhs_V</span> <span class="id" title="var">nrefine</span> (<span class="id" title="var">ap</span> <span class="id" title="var">_</span> (<span class="id" title="var">functor_trijoin_as_functor_join</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="var">rhs_V</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">functor_trijoin_as_functor_join</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">trijoin_id_sym_nat</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1170"></a><h2 class="section">Naturality of <span class="inlinecode"><span class="id" title="var">join_assoc</span></span></h2>

<div class="paragraph"> </div>

 Since <span class="inlinecode"><span class="id" title="var">join_assoc</span></span> is a composite of <span class="inlinecode"><span class="id" title="var">join_sym</span></span>, <span class="inlinecode"><span class="id" title="var">trijoin_twist</span></span> and <span class="inlinecode"><span class="id" title="var">trijoin_id_sym</span></span>, we just use their naturality. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">join_assoc_nat</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A'</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">B'</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">C'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">join_assoc</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span> <span class="id" title="var">o</span> <span class="id" title="var">functor_join</span> <span class="id" title="var">f</span> (<span class="id" title="var">functor_join</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id" title="var">functor_join</span> (<span class="id" title="var">functor_join</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) <span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">join_assoc</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;We'll&nbsp;work&nbsp;from&nbsp;right&nbsp;to&nbsp;left,&nbsp;as&nbsp;it&nbsp;is&nbsp;easier&nbsp;to&nbsp;work&nbsp;near&nbsp;the&nbsp;head&nbsp;of&nbsp;a&nbsp;term.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">join_assoc</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;First&nbsp;we&nbsp;pass&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">functor_joins</span></span>s&nbsp;through&nbsp;the&nbsp;outer&nbsp;<span class="inlinecode"><span class="id" title="var">join_sym</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">rhs_V</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">join_sym_nat</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Strip&nbsp;off&nbsp;the&nbsp;outer&nbsp;<span class="inlinecode"><span class="id" title="var">join_sym</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">ap</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Next&nbsp;we&nbsp;pass&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">functor_join</span></span>s&nbsp;through&nbsp;<span class="inlinecode"><span class="id" title="var">trijoin_twist</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">rhs_V</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">trijoin_twist_nat</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Strip&nbsp;off&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">trijoin_twist</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">ap</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Finally,&nbsp;we&nbsp;pass&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">functor_join</span></span>s&nbsp;through&nbsp;<span class="inlinecode"><span class="id" title="var">trijoin_id_sym</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">trijoin_id_sym_nat</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">join_associator</span> : <span class="id" title="var">Associator</span> <span class="id" title="var">Join</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Build_Associator</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">join_assoc</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">snrapply</span> <span class="id" title="var">Build_Is1Natural</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [[<span class="id" title="var">A</span> <span class="id" title="var">B</span>] <span class="id" title="var">C</span>] [[<span class="id" title="var">A'</span> <span class="id" title="var">B'</span>] <span class="id" title="var">C'</span>] [[<span class="id" title="var">f</span> <span class="id" title="var">g</span>] <span class="id" title="var">h</span>]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">join_assoc_nat</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1171"></a><h2 class="section">The Triangle Law</h2>

<div class="paragraph"> </div>

 The unitors were defined in Join/Core.v, since they do not require associativity. 
<div class="paragraph"> </div>

 Here's a version of the triangle law expressed using <span class="inlinecode"><span class="id" title="var">trijoin_twist</span></span> instead of <span class="inlinecode"><span class="id" title="var">join_assoc</span></span>, and only using the right unitor. Since the left unitor is defined using <span class="inlinecode"><span class="id" title="var">join_sym</span></span>, the usual triangle law follows. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">join_trianglelaw'</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span><br/>
&nbsp;&nbsp;: <span class="id" title="var">join_sym</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">o</span> <span class="id" title="var">functor_join</span> <span class="id" title="var">idmap</span> (<span class="id" title="var">equiv_join_empty_right</span> <span class="id" title="var">A</span>) <span class="id" title="var">o</span> <span class="id" title="var">trijoin_twist</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">Empty</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id" title="var">functor_join</span> <span class="id" title="var">idmap</span> (<span class="id" title="var">equiv_join_empty_right</span> <span class="id" title="var">B</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;A&nbsp;direct&nbsp;proof&nbsp;with&nbsp;<span class="inlinecode"><span class="id" title="var">Join_ind</span></span>&nbsp;three&nbsp;times&nbsp;is&nbsp;not&nbsp;hard,&nbsp;but&nbsp;the&nbsp;path&nbsp;algebra&nbsp;is&nbsp;slightly&nbsp;simpler&nbsp;if&nbsp;we&nbsp;manipulate&nbsp;things&nbsp;ahead&nbsp;of&nbsp;time&nbsp;using&nbsp;<span class="inlinecode"><span class="id" title="var">functor_join_join_rec</span></span>&nbsp;and&nbsp;<span class="inlinecode"><span class="id" title="var">trijoin_rec_trijoin_twist</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rapply</span> <span class="id" title="var">moveR_equiv_M</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">equiv_join_empty_right</span> <span class="id" title="tactic">at</span> 1; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">functor_join_join_rec</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">trijoin_rec_trijoin_twist</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_trijoin_rec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Build_TriJoinRecPath</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;3, 5, 6, 7: <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_p1_1q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> (<span class="id" title="var">ap_compose</span> (<span class="id" title="var">functor_join</span> <span class="id" title="var">idmap</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> (<span class="id" title="var">join12</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">ap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> <span class="id" title="var">functor_join_beta_jglue</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">join_sym_beta_jglue</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">join_trianglelaw</span> : <span class="id" title="var">TriangleIdentity</span> <span class="id" title="var">Join</span> <span class="id" title="var">Empty</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">x</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> (<span class="id" title="var">functor_join_compose</span> <span class="id" title="var">idmap</span> <span class="id" title="var">_</span> <span class="id" title="var">idmap</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">lhs_V</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">join_trianglelaw'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">join_assoc</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">join_sym_nat</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1172"></a><h2 class="section">The hexagon axiom</h2>

<div class="paragraph"> </div>

 For the hexagon, we'll need to know how to compose <span class="inlinecode"><span class="id" title="var">trijoin_id_sym</span></span> with something of the form <span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span>. For some reason, the proof is harder than it was for <span class="inlinecode"><span class="id" title="var">trijoin_twist</span></span>. 
<div class="paragraph"> </div>

 This describes the transformation on <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span> corresponding to precomposition with <span class="inlinecode"><span class="id" title="var">trijoin_id_sym</span></span>, as in the next result. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoinrecdata_id_sym</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span> <span class="id" title="var">B</span> <span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> (<span class="id" title="var">Build_TriJoinRecData</span> (<span class="id" title="var">j1</span> <span class="id" title="var">f</span>) (<span class="id" title="var">j3</span> <span class="id" title="var">f</span>) (<span class="id" title="var">j2</span> <span class="id" title="var">f</span>)); <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">j13</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">j12</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> (<span class="id" title="var">j23</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_pV</span>; <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">j123</span> <span class="id" title="var">f</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
This is analogous to <span class="inlinecode"><span class="id" title="var">trijoin_rec_trijoin_twist</span></span> above, with <span class="inlinecode"><span class="id" title="var">trijoin_twist</span></span> replaced by <span class="inlinecode"><span class="id" title="var">trijoin_id_sym</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_rec_id_sym</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span> <span class="id" title="var">B</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">trijoin_rec</span> <span class="id" title="var">f</span> <span class="id" title="var">o</span> <span class="id" title="var">trijoin_id_sym</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> == <span class="id" title="var">trijoin_rec</span> (<span class="id" title="var">trijoinrecdata_id_sym</span> <span class="id" title="var">f</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;First&nbsp;we&nbsp;use&nbsp;<span class="inlinecode"><span class="id" title="var">functor_join_join_rec</span></span>&nbsp;on&nbsp;the&nbsp;LHS.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">refine</span> (<span class="id" title="var">cat_postwhisker</span> (<span class="id" title="var">A</span>:=<span class="id" title="keyword">Type</span>) (<span class="id" title="var">trijoin_rec</span> <span class="id" title="var">f</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">functor_join_join_rec</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">join_sym_recdata</span>, <span class="id" title="var">jl</span>, <span class="id" title="var">jr</span>, <span class="id" title="var">jg</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;And&nbsp;now&nbsp;we&nbsp;use&nbsp;naturality&nbsp;of&nbsp;the&nbsp;second&nbsp;<span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span>&nbsp;on&nbsp;the&nbsp;LHS.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">trijoin_rec_nat</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> (<span class="id" title="var">trijoin_rec</span> <span class="id" title="var">f</span>) <span class="id" title="var">_</span>)^$ $@ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">fmap</span> <span class="id" title="var">trijoin_rec</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Finally,&nbsp;we&nbsp;provide&nbsp;the&nbsp;needed&nbsp;<span class="inlinecode"><span class="id" title="var">TriJoinRecPath</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">bundle_trijoinrecpath</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">trijoin_rec_beta_join13</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">trijoin_rec_beta_join12</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">lhs</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">ap</span> <span class="id" title="var">_</span> (<span class="id" title="var">ap_V</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">ap_V</span> (<span class="id" title="var">trijoin_rec</span> <span class="id" title="var">f</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">ap</span> <span class="id" title="var">inverse</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">trijoin_rec_beta_join23</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">prism'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">ap_trijoin_V</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">trijoin_rec_beta_join123</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">f'</span> := <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">f</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">f3</span> <span class="id" title="var">f12</span> <span class="id" title="var">f13</span> <span class="id" title="var">f23</span> <span class="id" title="var">f123</span>]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">f123</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">trijoin_rec_beta_join23</span> <span class="id" title="var">f'</span> <span class="id" title="var">c</span> <span class="id" title="var">b</span>); <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">f23</span> <span class="id" title="var">c</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">trijoin_rec_beta_join13</span> <span class="id" title="var">f'</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>); <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">f13</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">trijoin_rec_beta_join12</span> <span class="id" title="var">f'</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>); <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">f12</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>); <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p12</span> <span class="id" title="var">beta12</span> <span class="id" title="var">p13</span> <span class="id" title="var">beta13</span> <span class="id" title="var">p23</span> <span class="id" title="var">beta23</span> <span class="id" title="var">p123</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">beta12</span>, <span class="id" title="var">beta13</span>, <span class="id" title="var">beta23</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 3 <span class="id" title="var">concat_p1</span>, <span class="id" title="var">concat_1p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Here is our first hexagon law.  This is not the usual hexagon axiom, but we will see that it is equivalent, and is itself useful.  This law states that the following diagram commutes, where we write <span class="inlinecode">*</span> for <span class="inlinecode"><span class="id" title="var">Join</span></span>:
<pre>
    A * (B * C) -&gt; A * (C * B) -&gt; C * (A * B)
        |                            |
        v                            v
    B * (A * C) -&gt; B * (C * A) -&gt; C * (B * A)
</pre>
Here every arrow is either <span class="inlinecode"><span class="id" title="var">trijoin_twist</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> or <span class="inlinecode"><span class="id" title="var">trijoin_id_sym</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span>, and they alternate as you go around.  These correspond to the permutations (1,2) and (2,3) in the symmetric group on three letters.  We already know that they are their own inverses, i.e., they have order two.  The above says that the composite (1,2)(2,3) has order three.  These are the only relations in this presentation of <span class="inlinecode"><span class="id" title="var">S_3</span></span>.  Note also that every object in this diagram is parenthesized in the same way.  That will be important in our proof. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">hexagon_join_twist_sym</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span><br/>
&nbsp;&nbsp;: <span class="id" title="var">trijoin_id_sym</span> <span class="id" title="var">C</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">o</span> <span class="id" title="var">trijoin_twist</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span> <span class="id" title="var">B</span> <span class="id" title="var">o</span> <span class="id" title="var">trijoin_id_sym</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id" title="var">trijoin_twist</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">A</span> <span class="id" title="var">o</span> <span class="id" title="var">trijoin_id_sym</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span> <span class="id" title="var">o</span> <span class="id" title="var">trijoin_twist</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;It's&nbsp;enough&nbsp;to&nbsp;show&nbsp;that&nbsp;both&nbsp;sides&nbsp;induces&nbsp;the&nbsp;same&nbsp;natural&nbsp;transformation&nbsp;under&nbsp;the&nbsp;covariant&nbsp;Yoneda&nbsp;embedding,&nbsp;i.e.,&nbsp;after&nbsp;postcomposing&nbsp;with&nbsp;a&nbsp;general&nbsp;function&nbsp;<span class="inlinecode"><span class="id" title="var">f</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">rapply</span> (<span class="id" title="var">opyon_faithful_0gpd</span> (<span class="id" title="var">A</span>:=<span class="id" title="keyword">Type</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;We&nbsp;replace&nbsp;<span class="inlinecode"><span class="id" title="var">f</span></span>&nbsp;by&nbsp;<span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span> <span class="inlinecode"><span class="id" title="var">t</span></span>&nbsp;for&nbsp;generic&nbsp;<span class="inlinecode"><span class="id" title="var">t</span></span>.&nbsp;&nbsp;This&nbsp;will&nbsp;allow&nbsp;induction&nbsp;later.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">p</span> := <span class="id" title="var">issect_trijoin_rec_inv</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">refine</span> ((<span class="id" title="var">p</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">_</span> @ <span class="id" title="var">p</span> <span class="id" title="var">_</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">trijoin_rec_inv</span> <span class="id" title="var">f</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Now&nbsp;we&nbsp;use&nbsp;how&nbsp;these&nbsp;various&nbsp;maps&nbsp;postcompose&nbsp;with&nbsp;<span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span> <span class="inlinecode"><span class="id" title="var">foo</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">rapply</span> <span class="id" title="var">trijoin_rec_id_sym</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">rapply</span> <span class="id" title="var">trijoin_rec_trijoin_twist</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">rapply</span> <span class="id" title="var">trijoin_rec_id_sym</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rhs</span> <span class="id" title="var">rapply</span> <span class="id" title="var">trijoin_rec_trijoin_twist</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rhs</span> <span class="id" title="var">rapply</span> <span class="id" title="var">trijoin_rec_id_sym</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rhs</span> <span class="id" title="var">rapply</span> <span class="id" title="var">trijoin_rec_trijoin_twist</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">refine</span> (<span class="id" title="var">fmap</span> <span class="id" title="var">trijoin_rec</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">bundle_trijoinrecpath</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;1, 2, 3: <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">triangle_ind</span> <span class="id" title="var">t</span> <span class="id" title="var">c</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Next we paste on a naturality square for <span class="inlinecode"><span class="id" title="var">join_sym</span></span> on the right of the diagram:
<pre>
    A * (B * C) -&gt; A * (C * B) -&gt; C * (A * B) -&gt; (A * B) * C
        |                            |                |
        v                            v                v
    B * (A * C) -&gt; B * (C * A) -&gt; C * (B * A) -&gt; (B * A) * C
</pre>
The new horizontal maps are <span class="inlinecode"><span class="id" title="var">join_sym</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> and the new vertical map is <span class="inlinecode"><span class="id" title="var">functor_join</span></span> <span class="inlinecode">(<span class="id" title="var">join_sym</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span>)</span> <span class="inlinecode"><span class="id" title="var">idmap</span></span>. This makes both horizontal composites definitionally equal to <span class="inlinecode"><span class="id" title="var">join_assoc</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span>, so the statement is about a square. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">square_join_sym_assoc_twist</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span><br/>
&nbsp;&nbsp;: <span class="id" title="var">functor_join</span> (<span class="id" title="var">join_sym</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) <span class="id" title="var">idmap</span> <span class="id" title="var">o</span> <span class="id" title="var">join_assoc</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id" title="var">join_assoc</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span> <span class="id" title="var">o</span> <span class="id" title="var">trijoin_twist</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">join_assoc</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>; <span class="id" title="var">lhs_V</span> <span class="id" title="var">rapply</span> <span class="id" title="var">join_sym_nat</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hexagon_join_twist_sym</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Finally, we paste on the defining square for <span class="inlinecode"><span class="id" title="var">join_assoc</span></span> on the left to get the hexagon axiom for the symmetric monoidal structure:
<pre>
    A * (C * B) -&gt; A * (B * C) -&gt; (A * B) * C
         |              |              |
         v              v              v
    (A * C) * B -&gt; B * (A * C) -&gt; (B * A) * C
</pre>
The right-hand square is a horizontally-compressed version of the rectangle from the previous result, whose horizontal arrows are associativity. In the left-hand square, the new vertical map is <span class="inlinecode"><span class="id" title="var">join_assoc</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> and the horizontal maps are <span class="inlinecode"><span class="id" title="var">trijoin_id_sym</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> and <span class="inlinecode"><span class="id" title="var">join_sym</span></span> <span class="inlinecode">(<span class="id" title="var">Join</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">C</span>)</span> <span class="inlinecode"><span class="id" title="var">B</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">hexagon_join_assoc_sym</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span><br/>
&nbsp;&nbsp;: <span class="id" title="var">functor_join</span> (<span class="id" title="var">join_sym</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) <span class="id" title="var">idmap</span> <span class="id" title="var">o</span> <span class="id" title="var">join_assoc</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">o</span> <span class="id" title="var">trijoin_id_sym</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span> <span class="id" title="var">B</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id" title="var">join_assoc</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span> <span class="id" title="var">o</span> <span class="id" title="var">join_sym</span> (<span class="id" title="var">Join</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span>) <span class="id" title="var">B</span> <span class="id" title="var">o</span> <span class="id" title="var">join_assoc</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span> <span class="id" title="var">B</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">square_join_sym_assoc_twist</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">_</span> @ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">eissect</span> (<span class="id" title="var">equiv_join_sym</span> <span class="id" title="var">B</span> (<span class="id" title="var">Join</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span>)) <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>