<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>PathGroupoids</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library PathGroupoids</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab360"></a><h1 class="section">The groupid structure of paths</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Basics.Overture</span> <span class="id" title="var">Basics.Tactics</span>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">path_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab361"></a><h2 class="section">Naming conventions</h2>


<div class="paragraph"> </div>

   We need good naming conventions that allow us to name theorems without looking them up. The names should indicate the structure of the theorem, but they may sometimes be ambiguous, in which case you just have to know what is going on.    We shall adopt the following principles:

<div class="paragraph"> </div>

<ul class="doclist">
<li> we are not afraid of long names

</li>
<li> we are not afraid of short names when they are used frequently

</li>
<li> we use underscores

</li>
<li> name of theorems and lemmas are lower-case

</li>
<li> records and other types may be upper or lower case

</li>
</ul>

<div class="paragraph"> </div>

   Theorems about concatenation of paths are called <span class="inlinecode"><span class="id" title="var">concat_XXX</span></span> where <span class="inlinecode"><span class="id" title="var">XXX</span></span> tells us what is on the left-hand side of the equation. You have to guess the right-hand side. We use the following symbols in <span class="inlinecode"><span class="id" title="var">XXX</span></span>:

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode">1</span> means the identity path

</li>
<li> <span class="inlinecode"><span class="id" title="var">p</span></span> means 'the path'

</li>
<li> <span class="inlinecode"><span class="id" title="var">V</span></span> means 'the inverse path'

</li>
<li> <span class="inlinecode"><span class="id" title="var">A</span></span> means '<span class="inlinecode"><span class="id" title="var">ap</span></span>'

</li>
<li> <span class="inlinecode"><span class="id" title="var">M</span></span> means the thing we are moving across equality

</li>
<li> <span class="inlinecode"><span class="id" title="var">x</span></span> means 'the point' which is not a path, e.g. in <span class="inlinecode"><span class="id" title="var">transport</span></span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span>

</li>
<li> <span class="inlinecode">2</span> means relating to 2-dimensional paths

</li>
<li> <span class="inlinecode">3</span> means relating to 3-dimensional paths, and so on

</li>
</ul>

<div class="paragraph"> </div>

   Associativity is indicated with an underscore. Here are some examples of how the name gives hints about the left-hand side of the equation.

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">concat_1p</span></span> means <span class="inlinecode">1</span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">p</span></span>

</li>
<li> <span class="inlinecode"><span class="id" title="var">concat_Vp</span></span> means <span class="inlinecode"><span class="id" title="var">p</span>^</span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">p</span></span>

</li>
<li> <span class="inlinecode"><span class="id" title="var">concat_p_pp</span></span> means <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">*</span> <span class="inlinecode">(<span class="id" title="var">q</span></span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">r</span>)</span>

</li>
<li> <span class="inlinecode"><span class="id" title="var">concat_pp_p</span></span> means <span class="inlinecode">(<span class="id" title="var">p</span></span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">q</span>)</span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">r</span></span>

</li>
<li> <span class="inlinecode"><span class="id" title="var">concat_V_pp</span></span> means <span class="inlinecode"><span class="id" title="var">p</span>^</span> <span class="inlinecode">*</span> <span class="inlinecode">(<span class="id" title="var">p</span></span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">q</span>)</span>

</li>
<li> <span class="inlinecode"><span class="id" title="var">concat_pV_p</span></span> means <span class="inlinecode">(<span class="id" title="var">q</span></span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">p</span>^)</span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">p</span></span> or <span class="inlinecode">(<span class="id" title="var">p</span></span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">p</span>^)</span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">q</span></span>, but probably the former because for the latter you could just use <span class="inlinecode"><span class="id" title="var">concat_pV</span></span>.

</li>
</ul>

<div class="paragraph"> </div>

   Laws about inverse of something are of the form <span class="inlinecode"><span class="id" title="var">inv_XXX</span></span>, and those about <span class="inlinecode"><span class="id" title="var">ap</span></span> are of the form <span class="inlinecode"><span class="id" title="var">ap_XXX</span></span>, and so on. For example:

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">inv_pp</span></span> is about <span class="inlinecode">(<span class="id" title="var">p</span></span> <span class="inlinecode">@</span> <span class="inlinecode"><span class="id" title="var">q</span>)^</span>

</li>
<li> <span class="inlinecode"><span class="id" title="var">inv_V</span></span> is about <span class="inlinecode">(<span class="id" title="var">p</span>^)^</span>

</li>
<li> <span class="inlinecode"><span class="id" title="var">inv_A</span></span> is about <span class="inlinecode">(<span class="id" title="var">ap</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">p</span>)^</span>

</li>
<li> <span class="inlinecode"><span class="id" title="var">ap_V</span></span> is about <span class="inlinecode"><span class="id" title="var">ap</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode">(<span class="id" title="var">p</span>^)</span>

</li>
<li> <span class="inlinecode"><span class="id" title="var">ap_pp</span></span> is about <span class="inlinecode"><span class="id" title="var">ap</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode">(<span class="id" title="var">p</span></span> <span class="inlinecode">@</span> <span class="inlinecode"><span class="id" title="var">q</span>)</span>

</li>
<li> <span class="inlinecode"><span class="id" title="var">ap_idmap</span></span> is about <span class="inlinecode"><span class="id" title="var">ap</span></span> <span class="inlinecode"><span class="id" title="var">idmap</span></span> <span class="inlinecode"><span class="id" title="var">p</span></span>

</li>
<li> <span class="inlinecode"><span class="id" title="var">ap_1</span></span> is about <span class="inlinecode"><span class="id" title="var">ap</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode">1</span>

</li>
<li> <span class="inlinecode"><span class="id" title="var">ap02_p2p</span></span> is about <span class="inlinecode"><span class="id" title="var">ap02</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode">(<span class="id" title="var">p</span></span> <span class="inlinecode">@@</span> <span class="inlinecode"><span class="id" title="var">q</span>)</span>

</li>
</ul>

<div class="paragraph"> </div>

   Then we have laws which move things around in an equation. The naming scheme here is <span class="inlinecode"><span class="id" title="var">moveD_XXX</span></span>. The direction <span class="inlinecode"><span class="id" title="var">D</span></span> indicates where to move to: <span class="inlinecode"><span class="id" title="var">L</span></span> means that we move something to the left-hand side, whereas <span class="inlinecode"><span class="id" title="var">R</span></span> means we are moving something to the right-hand side. The part <span class="inlinecode"><span class="id" title="var">XXX</span></span> describes the shape of the side <i>from</i> which we are moving where the thing that is getting moves is called <span class="inlinecode"><span class="id" title="var">M</span></span>.  The presence of 1 next to an <span class="inlinecode"><span class="id" title="var">M</span></span> generally indicates an *implied* identity path which is inserted automatically after the movement.  Examples:

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">moveL_pM</span></span> means that we transform <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">q</span></span> <span class="inlinecode">@</span> <span class="inlinecode"><span class="id" title="var">r</span></span> to <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">@</span> <span class="inlinecode"><span class="id" title="var">r</span>^</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">q</span></span>
     because we are moving something to the left-hand side, and we are
     moving the right argument of concat.

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="var">moveR_Mp</span></span> means that we transform <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">@</span> <span class="inlinecode"><span class="id" title="var">q</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">r</span></span> to <span class="inlinecode"><span class="id" title="var">q</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">p</span>^</span> <span class="inlinecode">@</span> <span class="inlinecode"><span class="id" title="var">r</span></span>
     because we move to the right-hand side, and we are moving the left
     argument of concat.

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="var">moveR_1M</span></span> means that we transform <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">q</span></span> (rather than <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">=</span> <span class="inlinecode">1</span> <span class="inlinecode">@</span> <span class="inlinecode"><span class="id" title="var">q</span></span>) to <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">q</span>^</span> <span class="inlinecode">=</span> <span class="inlinecode">1</span>.

</li>
</ul>

<div class="paragraph"> </div>

   There are also cancellation laws called <span class="inlinecode"><span class="id" title="var">cancelR</span></span> and <span class="inlinecode"><span class="id" title="var">cancelL</span></span>, which are inverse to the 2-dimensional 'whiskering' operations <span class="inlinecode"><span class="id" title="var">whiskerR</span></span> and <span class="inlinecode"><span class="id" title="var">whiskerL</span></span>.

<div class="paragraph"> </div>

   We may now proceed with the groupoid structure proper.

<div class="paragraph"> </div>

<a id="lab362"></a><h2 class="section">The 1-dimensional groupoid structure.</h2>

<div class="paragraph"> </div>

 <span class="inlinecode"><span class="id" title="var">concat</span></span>, with arguments flipped. Useful mainly in the idiom <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode">(<span class="id" title="var">concatR</span></span> <span class="inlinecode">(<span class="id" title="var">expression</span>))</span>. Given as a notation not a definition so that the resultant terms are literally instances of <span class="inlinecode"><span class="id" title="var">concat</span></span>, with no unfolding required. 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <span class="id" title="var">concatR</span> := (<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> =&gt; <span class="id" title="var">concat</span> <span class="id" title="var">q</span> <span class="id" title="var">p</span>).<br/>

<br/>
</div>

<div class="doc">
The identity path is a right unit. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_p1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> @ 1 = <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
The identity is a left unit. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_1p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;1 @ <span class="id" title="var">p</span> = <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
It's common to need to use both. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_p1_1p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">p</span> @ 1 = 1 @ <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">concat_p1</span> <span class="id" title="var">p</span> @ (<span class="id" title="var">concat_1p</span> <span class="id" title="var">p</span>)^.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_1p_p1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: 1 @ <span class="id" title="var">p</span> = <span class="id" title="var">p</span> @ 1<br/>
&nbsp;&nbsp;:= <span class="id" title="var">concat_1p</span> <span class="id" title="var">p</span> @ (<span class="id" title="var">concat_p1</span> <span class="id" title="var">p</span>)^.<br/>

<br/>
</div>

<div class="doc">
Concatenation is associative. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_p_pp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">t</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">z</span> = <span class="id" title="var">t</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> @ (<span class="id" title="var">q</span> @ <span class="id" title="var">r</span>) = (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>) @ <span class="id" title="var">r</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">r</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">q</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="keyword">end</span> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pp_p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">t</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">z</span> = <span class="id" title="var">t</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>) @ <span class="id" title="var">r</span> = <span class="id" title="var">p</span> @ (<span class="id" title="var">q</span> @ <span class="id" title="var">r</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">r</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">q</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="keyword">end</span> <span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
The left inverse law. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pV</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> @ <span class="id" title="var">p</span>^ = 1<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
The right inverse law. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_Vp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span>^ @ <span class="id" title="var">p</span> = 1<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Several auxiliary theorems about canceling inverses across associativity.  These are somewhat redundant, following from earlier theorems.  
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_V_pp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span>^ @ (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>) = <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">q</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_p_Vp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> @ (<span class="id" title="var">p</span>^ @ <span class="id" title="var">q</span>) = <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">q</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pp_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>) @ <span class="id" title="var">q</span>^ = <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">q</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pV_p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>^) @ <span class="id" title="var">q</span> = <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">match</span> <span class="id" title="var">q</span> <span class="id" title="keyword">as</span> <span class="id" title="var">i</span> <span class="id" title="keyword">return</span> <span class="id" title="keyword">forall</span> <span class="id" title="var">p</span>, (<span class="id" title="var">p</span> @ <span class="id" title="var">i</span>^) @ <span class="id" title="var">i</span> = <span class="id" title="var">p</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">idpath</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="var">p</span>.<br/>

<br/>
</div>

<div class="doc">
Inverse distributes over concatenation 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">inv_pp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>)^ = <span class="id" title="var">q</span>^ @ <span class="id" title="var">p</span>^<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">q</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">inv_Vp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span>^ @ <span class="id" title="var">q</span>)^ = <span class="id" title="var">q</span>^ @ <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">q</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">inv_pV</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">z</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>^)^ = <span class="id" title="var">q</span> @ <span class="id" title="var">p</span>^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">inv_VV</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">z</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span>^ @ <span class="id" title="var">q</span>^)^ = <span class="id" title="var">q</span> @ <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Inverse is an involution. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">inv_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span>^^ = <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab363"></a><h3 class="section">Theorems for moving things around in equations.</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_Mp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> = <span class="id" title="var">r</span>^ @ <span class="id" title="var">q</span> -&gt; <span class="id" title="var">r</span> @ <span class="id" title="var">p</span> = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span> @ <span class="id" title="var">h</span> @ <span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_pM</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">r</span> = <span class="id" title="var">q</span> @ <span class="id" title="var">p</span>^ -&gt; <span class="id" title="var">r</span> @ <span class="id" title="var">p</span> = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span> @ <span class="id" title="var">h</span> @ <span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_Vp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> = <span class="id" title="var">r</span> @ <span class="id" title="var">q</span> -&gt; <span class="id" title="var">r</span>^ @ <span class="id" title="var">p</span> = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span> @ <span class="id" title="var">h</span> @ <span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_pV</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">z</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">r</span> = <span class="id" title="var">q</span> @ <span class="id" title="var">p</span> -&gt; <span class="id" title="var">r</span> @ <span class="id" title="var">p</span>^ = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span> @ <span class="id" title="var">h</span> @ <span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_Mp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">r</span>^ @ <span class="id" title="var">q</span> = <span class="id" title="var">p</span> -&gt; <span class="id" title="var">q</span> = <span class="id" title="var">r</span> @ <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">h</span> @ (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_pM</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">q</span> @ <span class="id" title="var">p</span>^ = <span class="id" title="var">r</span> -&gt; <span class="id" title="var">q</span> = <span class="id" title="var">r</span> @ <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">h</span> @ (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)^).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_Vp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">r</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">p</span> -&gt; <span class="id" title="var">q</span> = <span class="id" title="var">r</span>^ @ <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">h</span> @ (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_pV</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">z</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">q</span> @ <span class="id" title="var">p</span> = <span class="id" title="var">r</span> -&gt; <span class="id" title="var">q</span> = <span class="id" title="var">r</span> @ <span class="id" title="var">p</span>^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">h</span> @ (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)^).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_1M</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>^ = 1 -&gt; <span class="id" title="var">p</span> = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_M1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">q</span>^ @ <span class="id" title="var">p</span> = 1 -&gt; <span class="id" title="var">p</span> = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_1V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> @ <span class="id" title="var">q</span> = 1 -&gt; <span class="id" title="var">p</span> = <span class="id" title="var">q</span>^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_V1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">q</span> @ <span class="id" title="var">p</span> = 1 -&gt; <span class="id" title="var">p</span> = <span class="id" title="var">q</span>^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_M1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;1 = <span class="id" title="var">p</span>^ @ <span class="id" title="var">q</span> -&gt; <span class="id" title="var">p</span> = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">h</span> @ (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_1M</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;1 = <span class="id" title="var">q</span> @ <span class="id" title="var">p</span>^ -&gt; <span class="id" title="var">p</span> = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">h</span> @ (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_1V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;1 = <span class="id" title="var">q</span> @ <span class="id" title="var">p</span> -&gt; <span class="id" title="var">p</span>^ = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">h</span> @ (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_V1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;1 = <span class="id" title="var">p</span> @ <span class="id" title="var">q</span> -&gt; <span class="id" title="var">p</span>^ = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">h</span> @ (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;In&nbsp;general,&nbsp;the&nbsp;path&nbsp;we&nbsp;want&nbsp;to&nbsp;move&nbsp;might&nbsp;be&nbsp;arbitrarily&nbsp;deeply&nbsp;nested&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;long&nbsp;concatenation.&nbsp;&nbsp;Thus,&nbsp;instead&nbsp;of&nbsp;defining&nbsp;functions&nbsp;such&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">moveL_Mp_p</span></span>,&nbsp;we&nbsp;define&nbsp;a&nbsp;tactical&nbsp;that&nbsp;can&nbsp;repeatedly&nbsp;rewrite&nbsp;with&nbsp;associativity&nbsp;to&nbsp;expose&nbsp;it.&nbsp;*)</span><br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">with_rassoc</span> <span class="id" title="var">tac</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_pp_p</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">tac</span>;<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;After&nbsp;moving,&nbsp;we&nbsp;reassociate&nbsp;to&nbsp;the&nbsp;left&nbsp;(the&nbsp;canonical&nbsp;direction&nbsp;for&nbsp;paths).&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_p_pp</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">rewrite_moveL_Mp_p</span> := <span class="id" title="var">with_rassoc</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">apply</span> <span class="id" title="var">moveL_Mp</span>).<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">rewrite_moveL_Vp_p</span> := <span class="id" title="var">with_rassoc</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">apply</span> <span class="id" title="var">moveL_Vp</span>).<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">rewrite_moveR_Mp_p</span> := <span class="id" title="var">with_rassoc</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_Mp</span>).<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">rewrite_moveR_Vp_p</span> := <span class="id" title="var">with_rassoc</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_Vp</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_transport_p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">u</span> = <span class="id" title="var">p</span>^ # <span class="id" title="var">v</span> -&gt; <span class="id" title="var">p</span> # <span class="id" title="var">u</span> = <span class="id" title="var">v</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">idmap</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_transport_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">u</span> = <span class="id" title="var">p</span> # <span class="id" title="var">v</span> -&gt; <span class="id" title="var">p</span>^ # <span class="id" title="var">u</span> = <span class="id" title="var">v</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">idmap</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_transport_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">p</span> # <span class="id" title="var">u</span> = <span class="id" title="var">v</span> -&gt; <span class="id" title="var">u</span> = <span class="id" title="var">p</span>^ # <span class="id" title="var">v</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">idmap</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_transport_p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">p</span>^ # <span class="id" title="var">u</span> = <span class="id" title="var">v</span> -&gt; <span class="id" title="var">u</span> = <span class="id" title="var">p</span> # <span class="id" title="var">v</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">idmap</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;We&nbsp;have&nbsp;some&nbsp;coherences&nbsp;between&nbsp;those&nbsp;proofs.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_transport_p_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">u</span> = <span class="id" title="var">p</span>^ # <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">moveR_transport_p</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">q</span>)^ = <span class="id" title="var">moveL_transport_p</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">v</span> <span class="id" title="var">u</span> <span class="id" title="var">q</span>^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_transport_V_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">u</span> = <span class="id" title="var">p</span> # <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">moveR_transport_V</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">q</span>)^ = <span class="id" title="var">moveL_transport_V</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">v</span> <span class="id" title="var">u</span> <span class="id" title="var">q</span>^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_transport_V_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">p</span> # <span class="id" title="var">u</span> = <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">moveL_transport_V</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">q</span>)^ = <span class="id" title="var">moveR_transport_V</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">v</span> <span class="id" title="var">u</span> <span class="id" title="var">q</span>^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_transport_p_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">p</span>^ # <span class="id" title="var">u</span> = <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">moveL_transport_p</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">q</span>)^ = <span class="id" title="var">moveR_transport_p</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">v</span> <span class="id" title="var">u</span> <span class="id" title="var">q</span>^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab364"></a><h3 class="section">Functoriality of functions</h3>

<div class="paragraph"> </div>

 Here we prove that functions behave like functors between groupoids, and that <span class="inlinecode"><span class="id" title="var">ap</span></span> itself is functorial. 
<div class="paragraph"> </div>

 Functions take identity paths to identity paths. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_1</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> <span class="id" title="var">f</span> 1 = 1 :&gt; (<span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">f</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;1.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD_1</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">f</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <span class="id" title="var">A</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">apD</span> <span class="id" title="var">f</span> 1 = 1 :&gt; (<span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">f</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;1.<br/>

<br/>
</div>

<div class="doc">
Functions commute with concatenation. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_pp</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>) = (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) @ (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">q</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">idpath</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_p_pp</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) {<span class="id" title="var">w</span> : <span class="id" title="var">B</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">w</span> = <span class="id" title="var">f</span> <span class="id" title="var">x</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">r</span> @ (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>)) = (<span class="id" title="var">r</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) @ (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">concat_p_pp</span> <span class="id" title="var">r</span> 1 1).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_pp_p</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">w</span> : <span class="id" title="var">B</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">f</span> <span class="id" title="var">z</span> = <span class="id" title="var">w</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>)) @ <span class="id" title="var">r</span> = (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) @ (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span> @ <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">concat_pp_p</span> 1 1 <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Functions commute with path inverses. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">inverse_ap</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>)^ = <span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">p</span>^)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_V</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">p</span>^) = (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>)^<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">ap</span></span> itself is functorial in the first argument. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_idmap</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> <span class="id" title="var">idmap</span> <span class="id" title="var">p</span> = <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_compose</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> (<span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>) <span class="id" title="var">p</span> = <span class="id" title="var">ap</span> <span class="id" title="var">g</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Sometimes&nbsp;we&nbsp;don't&nbsp;have&nbsp;the&nbsp;actual&nbsp;function&nbsp;<span class="inlinecode"><span class="id" title="var">compose</span></span>.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_compose'</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> =&gt; <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)) <span class="id" title="var">p</span> = <span class="id" title="var">ap</span> <span class="id" title="var">g</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
The action of constant maps. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_const</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">B</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">z</span>) <span class="id" title="var">p</span> = 1<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; <span class="id" title="var">idpath</span> <span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Naturality of <span class="inlinecode"><span class="id" title="var">ap</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_Ap</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>) @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span>) = (<span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">q</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">idpath</span> =&gt; <span class="id" title="var">concat_1p_p1</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;A&nbsp;useful&nbsp;variant&nbsp;of&nbsp;concat_Ap.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_homotopic</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>) = (<span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span>) @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span>)^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveL_pV</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">concat_Ap</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Naturality of <span class="inlinecode"><span class="id" title="var">ap</span></span> at identity. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_A1p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">x</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>) @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span>) = (<span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">q</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">idpath</span> =&gt; <span class="id" title="var">concat_1p_p1</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;The&nbsp;corresponding&nbsp;variant&nbsp;of&nbsp;concat_A1p.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_homotopic_id</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">x</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>) = (<span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ <span class="id" title="var">q</span> @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span>)^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveL_pV</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">concat_A1p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pA1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">x</span> = <span class="id" title="var">f</span> <span class="id" title="var">x</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>) =  <span class="id" title="var">q</span> @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">q</span> <span class="id" title="keyword">as</span> <span class="id" title="var">i</span> <span class="id" title="tactic">in</span> (<span class="id" title="var">_</span> = <span class="id" title="var">y</span>) <span class="id" title="keyword">return</span> (<span class="id" title="var">p</span> <span class="id" title="var">x</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">i</span> = <span class="id" title="var">i</span> @ <span class="id" title="var">p</span> <span class="id" title="var">y</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">idpath</span> =&gt; <span class="id" title="var">concat_p1_1p</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD_homotopic</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">B</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span> = <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">B</span> <span class="id" title="var">q</span>) (<span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ <span class="id" title="var">apD</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span> @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span>)^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveL_pV</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">apD</span>, <span class="id" title="var">transport</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span> @ <span class="id" title="var">ap_idmap</span> <span class="id" title="var">_</span> @ (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Naturality with other paths hanging around. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pA_pp</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">w</span> <span class="id" title="var">z</span> : <span class="id" title="var">B</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">w</span> = <span class="id" title="var">f</span> <span class="id" title="var">x</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">g</span> <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>) @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span> @ <span class="id" title="var">s</span>) = (<span class="id" title="var">r</span> @ <span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span> @ <span class="id" title="var">s</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>, <span class="id" title="var">s</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">p</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pA_p</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">w</span> : <span class="id" title="var">B</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">w</span> = <span class="id" title="var">f</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>) @ <span class="id" title="var">p</span> <span class="id" title="var">y</span> = (<span class="id" title="var">r</span> @ <span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ <span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">p</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_A_pp</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">z</span> : <span class="id" title="var">B</span>} (<span class="id" title="var">s</span> : <span class="id" title="var">g</span> <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;(<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>) @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span> @ <span class="id" title="var">s</span>) = (<span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span> @ <span class="id" title="var">s</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>, <span class="id" title="var">s</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">concat_1p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pA1_pp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">w</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">w</span> = <span class="id" title="var">f</span> <span class="id" title="var">x</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>) @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span> @ <span class="id" title="var">s</span>) = (<span class="id" title="var">r</span> @ <span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ (<span class="id" title="var">q</span> @ <span class="id" title="var">s</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>, <span class="id" title="var">s</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">p</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pp_A1p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">g</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">w</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">w</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">g</span> <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> @ <span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span> @ <span class="id" title="var">s</span>) = (<span class="id" title="var">r</span> @ <span class="id" title="var">q</span>) @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span> @ <span class="id" title="var">s</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>, <span class="id" title="var">s</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">p</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pA1_p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">w</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">w</span> = <span class="id" title="var">f</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>) @ <span class="id" title="var">p</span> <span class="id" title="var">y</span> = (<span class="id" title="var">r</span> @ <span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">p</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_A1_pp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">s</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;(<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>) @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span> @ <span class="id" title="var">s</span>) = (<span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ (<span class="id" title="var">q</span> @ <span class="id" title="var">s</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>, <span class="id" title="var">s</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">concat_1p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pp_A1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">g</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">w</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">w</span> = <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> @ <span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ <span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span> = (<span class="id" title="var">r</span> @ <span class="id" title="var">q</span>) @ <span class="id" title="var">p</span> <span class="id" title="var">y</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">p</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_p_A1p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">g</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">s</span> : <span class="id" title="var">g</span> <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> <span class="id" title="var">x</span> @ (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span> @ <span class="id" title="var">s</span>) = <span class="id" title="var">q</span> @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span> @ <span class="id" title="var">s</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>, <span class="id" title="var">s</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">concat_1p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Some coherence lemmas for functoriality 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">concat_1p_1</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">p</span> = 1)<br/>
: <span class="id" title="var">concat_1p</span> <span class="id" title="var">p</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">p'</span> =&gt; 1 @ <span class="id" title="var">p'</span>) <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">inv_V</span> <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r</span> := <span class="id" title="var">q</span>^). <span class="id" title="var">clearbody</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">concat_p1_1</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">p</span> = 1)<br/>
: <span class="id" title="var">concat_p1</span> <span class="id" title="var">p</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">p'</span> =&gt; <span class="id" title="var">p'</span> @ 1) <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">inv_V</span> <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r</span> := <span class="id" title="var">q</span>^). <span class="id" title="var">clearbody</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab365"></a><h3 class="section">Action of <span class="inlinecode"><span class="id" title="var">apD10</span></span> and <span class="inlinecode"><span class="id" title="var">ap10</span></span> on paths.</h3>

<div class="paragraph"> </div>

 Application of paths between functions preserves the groupoid structure 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD10_1</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">B</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span>) (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">apD10</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">f</span>) <span class="id" title="var">x</span> = 1<br/>
:= 1.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD10_pp</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">B</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">f'</span> <span class="id" title="var">f''</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">h</span>:<span class="id" title="var">f</span>=<span class="id" title="var">f'</span>) (<span class="id" title="var">h'</span>:<span class="id" title="var">f'</span>=<span class="id" title="var">f''</span>) (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>)<br/>
: <span class="id" title="var">apD10</span> (<span class="id" title="var">h</span> @ <span class="id" title="var">h'</span>) <span class="id" title="var">x</span> = <span class="id" title="var">apD10</span> <span class="id" title="var">h</span> <span class="id" title="var">x</span> @ <span class="id" title="var">apD10</span> <span class="id" title="var">h'</span> <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <span class="id" title="var">h</span>, <span class="id" title="var">h'</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD10_V</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">B</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span>} (<span class="id" title="var">h</span>:<span class="id" title="var">f</span>=<span class="id" title="var">g</span>) (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">apD10</span> (<span class="id" title="var">h</span>^) <span class="id" title="var">x</span> = (<span class="id" title="var">apD10</span> <span class="id" title="var">h</span> <span class="id" title="var">x</span>)^<br/>
:= <span class="id" title="keyword">match</span> <span class="id" title="var">h</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap10_1</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} {<span class="id" title="var">f</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="var">B</span>} (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>) : <span class="id" title="var">ap10</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">f</span>) <span class="id" title="var">x</span> = 1<br/>
&nbsp;&nbsp;:= 1.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap10_pp</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} {<span class="id" title="var">f</span> <span class="id" title="var">f'</span> <span class="id" title="var">f''</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="var">B</span>} (<span class="id" title="var">h</span>:<span class="id" title="var">f</span>=<span class="id" title="var">f'</span>) (<span class="id" title="var">h'</span>:<span class="id" title="var">f'</span>=<span class="id" title="var">f''</span>) (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap10</span> (<span class="id" title="var">h</span> @ <span class="id" title="var">h'</span>) <span class="id" title="var">x</span> = <span class="id" title="var">ap10</span> <span class="id" title="var">h</span> <span class="id" title="var">x</span> @ <span class="id" title="var">ap10</span> <span class="id" title="var">h'</span> <span class="id" title="var">x</span><br/>
:= <span class="id" title="var">apD10_pp</span> <span class="id" title="var">h</span> <span class="id" title="var">h'</span> <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap10_V</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span>-&gt;<span class="id" title="var">B</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">f</span> = <span class="id" title="var">g</span>) (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap10</span> (<span class="id" title="var">h</span>^) <span class="id" title="var">x</span> = (<span class="id" title="var">ap10</span> <span class="id" title="var">h</span> <span class="id" title="var">x</span>)^<br/>
:= <span class="id" title="var">apD10_V</span> <span class="id" title="var">h</span> <span class="id" title="var">x</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">apD10</span></span> and <span class="inlinecode"><span class="id" title="var">ap10</span></span> also behave nicely on paths produced by <span class="inlinecode"><span class="id" title="var">ap</span></span> 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD10_ap_precompose</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) {<span class="id" title="var">g</span> <span class="id" title="var">g'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>:<span class="id" title="var">B</span>, <span class="id" title="var">C</span> <span class="id" title="var">x</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">g</span> = <span class="id" title="var">g'</span>) <span class="id" title="var">a</span><br/>
: <span class="id" title="var">apD10</span> (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>:<span class="id" title="var">B</span>, <span class="id" title="var">C</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">h</span> <span class="id" title="var">oD</span> <span class="id" title="var">f</span>) <span class="id" title="var">p</span>) <span class="id" title="var">a</span> = <span class="id" title="var">apD10</span> <span class="id" title="var">p</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap10_ap_precompose</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) {<span class="id" title="var">g</span> <span class="id" title="var">g'</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">g</span> = <span class="id" title="var">g'</span>) <span class="id" title="var">a</span><br/>
: <span class="id" title="var">ap10</span> (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span> =&gt; <span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>) <span class="id" title="var">p</span>) <span class="id" title="var">a</span> = <span class="id" title="var">ap10</span> <span class="id" title="var">p</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)<br/>
:= <span class="id" title="var">apD10_ap_precompose</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD10_ap_postcompose</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">C</span>) {<span class="id" title="var">g</span> <span class="id" title="var">g'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>:<span class="id" title="var">A</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">g</span> = <span class="id" title="var">g'</span>) <span class="id" title="var">a</span><br/>
: <span class="id" title="var">apD10</span> (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>:<span class="id" title="var">A</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">x</span> (<span class="id" title="var">h</span> <span class="id" title="var">x</span>)) <span class="id" title="var">p</span>) <span class="id" title="var">a</span> = <span class="id" title="var">ap</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<span class="id" title="var">apD10</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap10_ap_postcompose</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span>) {<span class="id" title="var">g</span> <span class="id" title="var">g'</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">g</span> = <span class="id" title="var">g'</span>) <span class="id" title="var">a</span><br/>
: <span class="id" title="var">ap10</span> (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">o</span> <span class="id" title="var">h</span>) <span class="id" title="var">p</span>) <span class="id" title="var">a</span> = <span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">ap10</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span>)<br/>
:= <span class="id" title="var">apD10_ap_postcompose</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> =&gt; <span class="id" title="var">f</span>) <span class="id" title="var">p</span> <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap100</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">Z</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">Z</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">f</span> = <span class="id" title="var">g</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">X</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> := (<span class="id" title="var">ap10</span> (<span class="id" title="var">ap10</span> <span class="id" title="var">p</span> <span class="id" title="var">x</span>) <span class="id" title="var">y</span>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab366"></a><h3 class="section">Transport and the groupoid structure of paths</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: 1 # <span class="id" title="var">u</span> = <span class="id" title="var">u</span><br/>
:= 1.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_pp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> @ <span class="id" title="var">q</span> # <span class="id" title="var">u</span> = <span class="id" title="var">q</span> # <span class="id" title="var">p</span> # <span class="id" title="var">u</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">q</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_pV</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">p</span> # <span class="id" title="var">p</span>^ # <span class="id" title="var">z</span> = <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;:= (<span class="id" title="var">transport_pp</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>^ <span class="id" title="var">p</span> <span class="id" title="var">z</span>)^<br/>
&nbsp;&nbsp;@ <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">r</span> =&gt; <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">r</span> <span class="id" title="var">z</span>) (<span class="id" title="var">concat_Vp</span> <span class="id" title="var">p</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_Vp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">p</span>^ # <span class="id" title="var">p</span> # <span class="id" title="var">z</span> = <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;:= (<span class="id" title="var">transport_pp</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">p</span>^ <span class="id" title="var">z</span>)^<br/>
&nbsp;&nbsp;@ <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">r</span> =&gt; <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">r</span> <span class="id" title="var">z</span>) (<span class="id" title="var">concat_pV</span> <span class="id" title="var">p</span>).<br/>

<br/>
</div>

<div class="doc">
In the future, we may expect to need some higher coherence for transport:
  for instance, that transport acting on the associator is trivial. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_p_pp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">z</span> = <span class="id" title="var">w</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">e</span> =&gt; <span class="id" title="var">e</span> # <span class="id" title="var">u</span>) (<span class="id" title="var">concat_p_pp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@ (<span class="id" title="var">transport_pp</span> <span class="id" title="var">P</span> (<span class="id" title="var">p@q</span>) <span class="id" title="var">r</span> <span class="id" title="var">u</span>) @ <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">r</span>) (<span class="id" title="var">transport_pp</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">u</span>)<br/>
&nbsp;&nbsp;= (<span class="id" title="var">transport_pp</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> (<span class="id" title="var">q@r</span>) <span class="id" title="var">u</span>) @ (<span class="id" title="var">transport_pp</span> <span class="id" title="var">P</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> (<span class="id" title="var">p</span>#<span class="id" title="var">u</span>))<br/>
&nbsp;&nbsp;:&gt; ((<span class="id" title="var">p</span> @ (<span class="id" title="var">q</span> @ <span class="id" title="var">r</span>)) # <span class="id" title="var">u</span> = <span class="id" title="var">r</span> # <span class="id" title="var">q</span> # <span class="id" title="var">p</span> # <span class="id" title="var">u</span>) .<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>, <span class="id" title="var">r</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exact</span> 1.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Here&nbsp;are&nbsp;other&nbsp;coherence&nbsp;lemmas&nbsp;for&nbsp;transport.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_pVp</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">A</span>} (<span class="id" title="var">p</span>:<span class="id" title="var">x</span>=<span class="id" title="var">y</span>) (<span class="id" title="var">z</span>:<span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport_pV</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;= <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>) (<span class="id" title="var">transport_Vp</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">z</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_VpV</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport_Vp</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>^ <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>^) (<span class="id" title="var">transport_pV</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">z</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_transport_transport_pV</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> = <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>) (<span class="id" title="var">moveL_transport_V</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">e</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">transport_pV</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">v</span> = <span class="id" title="var">e</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>, <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_transport_V_1</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">moveL_transport_V</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> (<span class="id" title="var">p</span> # <span class="id" title="var">u</span>) 1 = (<span class="id" title="var">transport_Vp</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span>)^.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;moveL_transport_V&nbsp;P&nbsp;p&nbsp;(transport&nbsp;P&nbsp;p^&nbsp;v)&nbsp;(transport&nbsp;P&nbsp;p&nbsp;(transport&nbsp;P&nbsp;p^&nbsp;v))&nbsp;1&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;=&nbsp;ap&nbsp;(transport&nbsp;P&nbsp;p^)&nbsp;(transport_pV&nbsp;P&nbsp;p&nbsp;v)^.&nbsp;*)</span><br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;pose&nbsp;(u&nbsp;:=&nbsp;p^&nbsp; v).  *)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;assert&nbsp;(moveL_transport_V&nbsp;P&nbsp;p&nbsp;u&nbsp;(p&nbsp; u) 1 = (transport_Vp P p u)^). *)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;subst&nbsp;u.&nbsp;rewrite&nbsp;X.&nbsp;*)</span><br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Occasionally the induction principles for the identity type show up explicitly; these let us turn them into transport. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">paths_rect_transport</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">paths_rect</span> <span class="id" title="var">A</span> <span class="id" title="var">x</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">P</span> <span class="id" title="var">a</span>) <span class="id" title="var">u</span> <span class="id" title="var">y</span> <span class="id" title="var">p</span> = <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span><br/>
&nbsp;&nbsp;:= 1.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">paths_ind_transport</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">paths_ind</span> <span class="id" title="var">x</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">P</span> <span class="id" title="var">a</span>) <span class="id" title="var">u</span> <span class="id" title="var">y</span> <span class="id" title="var">p</span> = <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span><br/>
&nbsp;&nbsp;:= 1.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">paths_ind_r_transport</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">paths_ind_r</span> <span class="id" title="var">y</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">P</span> <span class="id" title="var">b</span>) <span class="id" title="var">u</span> <span class="id" title="var">x</span> <span class="id" title="var">p</span> = <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>^ <span class="id" title="var">u</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab367"></a><h2 class="section"><span class="inlinecode"><span class="id" title="var">ap11</span></span></h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap11_is_ap10_ap01</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="var">B</span>} (<span class="id" title="var">h</span>:<span class="id" title="var">f</span>=<span class="id" title="var">g</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">A</span>} (<span class="id" title="var">p</span>:<span class="id" title="var">x</span>=<span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">ap11</span> <span class="id" title="var">h</span> <span class="id" title="var">p</span> = <span class="id" title="var">ap10</span> <span class="id" title="var">h</span> <span class="id" title="var">x</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">path_induction</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Dependent transport in doubly dependent types and more. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transportD</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">B</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) (<span class="id" title="var">C</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>:<span class="id" title="var">A</span>, <span class="id" title="var">B</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">B</span> <span class="id" title="var">x1</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">C</span> <span class="id" title="var">x1</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">C</span> <span class="id" title="var">x2</span> (<span class="id" title="var">p</span> # <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; <span class="id" title="var">z</span> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transportD2</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) (<span class="id" title="var">D</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>:<span class="id" title="var">A</span>, <span class="id" title="var">B</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="var">C</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">B</span> <span class="id" title="var">x1</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">C</span> <span class="id" title="var">x1</span>) (<span class="id" title="var">w</span> : <span class="id" title="var">D</span> <span class="id" title="var">x1</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">D</span> <span class="id" title="var">x2</span> (<span class="id" title="var">p</span> # <span class="id" title="var">y</span>) (<span class="id" title="var">p</span> # <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; <span class="id" title="var">w</span> <span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab368"></a><h3 class="section"><span class="inlinecode"><span class="id" title="var">ap</span></span> for curried two variable functions</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap011</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span>) {<span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">y</span> <span class="id" title="var">y'</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x'</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">y'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">x'</span> <span class="id" title="var">y'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap011_V</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span>) {<span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">y</span> <span class="id" title="var">y'</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x'</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">y'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap011</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>^ <span class="id" title="var">q</span>^ = (<span class="id" title="var">ap011</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>)^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ap_V</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap011_pp</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span>) {<span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span> <span class="id" title="var">y</span> <span class="id" title="var">y'</span> <span class="id" title="var">y''</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x'</span>) (<span class="id" title="var">p'</span> : <span class="id" title="var">x'</span> = <span class="id" title="var">x''</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">y'</span>) (<span class="id" title="var">q'</span> : <span class="id" title="var">y'</span> = <span class="id" title="var">y''</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap011</span> <span class="id" title="var">f</span> (<span class="id" title="var">p</span> @ <span class="id" title="var">p'</span>) (<span class="id" title="var">q</span> @ <span class="id" title="var">q'</span>) = <span class="id" title="var">ap011</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> @ <span class="id" title="var">ap011</span> <span class="id" title="var">f</span> <span class="id" title="var">p'</span> <span class="id" title="var">q'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">p'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ap_pp</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap011_compose</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">D</span>) {<span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">y</span> <span class="id" title="var">y'</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x'</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">y'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap011</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)) <span class="id" title="var">p</span> <span class="id" title="var">q</span> = <span class="id" title="var">ap</span> <span class="id" title="var">g</span> (<span class="id" title="var">ap011</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ap_compose</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap011_compose'</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span> <span class="id" title="var">E</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">D</span> -&gt; <span class="id" title="var">A</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">E</span> -&gt; <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">y</span> <span class="id" title="var">y'</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x'</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">y'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap011</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">f</span> (<span class="id" title="var">g</span> <span class="id" title="var">x</span>) (<span class="id" title="var">h</span> <span class="id" title="var">y</span>)) <span class="id" title="var">p</span> <span class="id" title="var">q</span> = <span class="id" title="var">ap011</span> <span class="id" title="var">f</span> (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">p</span>) (<span class="id" title="var">ap</span> <span class="id" title="var">h</span> <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ap_compose</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap011_is_ap</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span>) {<span class="id" title="var">x</span> <span class="id" title="var">x'</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">y</span> <span class="id" title="var">y'</span> : <span class="id" title="var">B</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x'</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">y'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap011</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> = <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="var">p</span> @ <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">x'</span> <span class="id" title="var">y</span>) <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">concat_1p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
It would be nice to have a consistent way to name the different ways in which this can be dependent.  The following are a sort of half-hearted attempt. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap011D</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>), <span class="id" title="var">B</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">x'</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x'</span>) {<span class="id" title="var">y</span> <span class="id" title="var">y'</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">p</span> # <span class="id" title="var">y</span> = <span class="id" title="var">y'</span>)<br/>
: <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">x'</span> <span class="id" title="var">y'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap01D1</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>), <span class="id" title="var">B</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="var">C</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">x'</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x'</span>) {<span class="id" title="var">y</span> <span class="id" title="var">y'</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">p</span> # <span class="id" title="var">y</span> = <span class="id" title="var">y'</span>)<br/>
: <span class="id" title="var">transport</span> <span class="id" title="var">C</span> <span class="id" title="var">p</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) = <span class="id" title="var">f</span> <span class="id" title="var">x'</span> <span class="id" title="var">y'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD011</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">b</span>:<span class="id" title="var">B</span> <span class="id" title="var">a</span>), <span class="id" title="var">C</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">x'</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x'</span>) {<span class="id" title="var">y</span> <span class="id" title="var">y'</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">p</span> # <span class="id" title="var">y</span> = <span class="id" title="var">y'</span>)<br/>
: <span class="id" title="var">transport</span> (<span class="id" title="var">C</span> <span class="id" title="var">x'</span>) <span class="id" title="var">q</span> (<span class="id" title="var">transportD</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">p</span> <span class="id" title="var">y</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)) = <span class="id" title="var">f</span> <span class="id" title="var">x'</span> <span class="id" title="var">y'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Transporting along two 1-dimensional paths 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport011</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">y1</span> <span class="id" title="var">y2</span> : <span class="id" title="var">B</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y1</span> = <span class="id" title="var">y2</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">P</span> <span class="id" title="var">x1</span> <span class="id" title="var">y1</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">P</span> <span class="id" title="var">x2</span> <span class="id" title="var">y2</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">P</span> <span class="id" title="var">x</span> <span class="id" title="var">y2</span>) <span class="id" title="var">p</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">P</span> <span class="id" title="var">x1</span> <span class="id" title="var">y</span>) <span class="id" title="var">q</span> <span class="id" title="var">z</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport011_pp</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> <span class="id" title="var">x3</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">y1</span> <span class="id" title="var">y2</span> <span class="id" title="var">y3</span> : <span class="id" title="var">B</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p1</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">p2</span> : <span class="id" title="var">x2</span> = <span class="id" title="var">x3</span>) (<span class="id" title="var">q1</span> : <span class="id" title="var">y1</span> = <span class="id" title="var">y2</span>) (<span class="id" title="var">q2</span> : <span class="id" title="var">y2</span> = <span class="id" title="var">y3</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">P</span> <span class="id" title="var">x1</span> <span class="id" title="var">y1</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport011</span> <span class="id" title="var">P</span> (<span class="id" title="var">p1</span> @ <span class="id" title="var">p2</span>) (<span class="id" title="var">q1</span> @ <span class="id" title="var">q2</span>) <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">transport011</span> <span class="id" title="var">P</span> <span class="id" title="var">p2</span> <span class="id" title="var">q2</span> (<span class="id" title="var">transport011</span> <span class="id" title="var">P</span> <span class="id" title="var">p1</span> <span class="id" title="var">q1</span> <span class="id" title="var">z</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p1</span>, <span class="id" title="var">p2</span>, <span class="id" title="var">q1</span>, <span class="id" title="var">q2</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport011_compose</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">A'</span> -&gt; <span class="id" title="var">A</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B'</span> -&gt; <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A'</span>} {<span class="id" title="var">y1</span> <span class="id" title="var">y2</span> : <span class="id" title="var">B'</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y1</span> = <span class="id" title="var">y2</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">x1</span>) (<span class="id" title="var">g</span> <span class="id" title="var">y1</span>))<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport011</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) (<span class="id" title="var">g</span> <span class="id" title="var">y</span>)) <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;&nbsp;= <span class="id" title="var">transport011</span> <span class="id" title="var">P</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span>) <span class="id" title="var">z</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Naturality of <span class="inlinecode"><span class="id" title="var">transport011</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_transport011</span>{<span class="id" title="var">A</span> <span class="id" title="var">B</span>} {<span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">a1</span> <span class="id" title="var">a2</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">b1</span> <span class="id" title="var">b2</span> : <span class="id" title="var">B</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">a1</span> = <span class="id" title="var">a2</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">b1</span> = <span class="id" title="var">b2</span>)  <br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">a</span> <span class="id" title="var">b</span>}, <span class="id" title="var">P</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">Q</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">P</span> <span class="id" title="var">a1</span> <span class="id" title="var">b1</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">f</span> (<span class="id" title="var">transport011</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">x</span>) = <span class="id" title="var">transport011</span> <span class="id" title="var">Q</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Transporting along higher-dimensional paths 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport2</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">p</span> # <span class="id" title="var">z</span> = <span class="id" title="var">q</span> # <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">p'</span> =&gt; <span class="id" title="var">p'</span> # <span class="id" title="var">z</span>) <span class="id" title="var">r</span>.<br/>

<br/>
</div>

<div class="doc">
An alternative definition. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport2_is_ap10</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">Q</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">Q</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport2</span> <span class="id" title="var">Q</span> <span class="id" title="var">r</span> <span class="id" title="var">z</span> = <span class="id" title="var">ap10</span> (<span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">Q</span>) <span class="id" title="var">r</span>) <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">match</span> <span class="id" title="var">r</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport2_p2p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">p3</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">r1</span> : <span class="id" title="var">p1</span> = <span class="id" title="var">p2</span>) (<span class="id" title="var">r2</span> : <span class="id" title="var">p2</span> = <span class="id" title="var">p3</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport2</span> <span class="id" title="var">P</span> (<span class="id" title="var">r1</span> @ <span class="id" title="var">r2</span>) <span class="id" title="var">z</span> = <span class="id" title="var">transport2</span> <span class="id" title="var">P</span> <span class="id" title="var">r1</span> <span class="id" title="var">z</span> @ <span class="id" title="var">transport2</span> <span class="id" title="var">P</span> <span class="id" title="var">r2</span> <span class="id" title="var">z</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r1</span>, <span class="id" title="var">r2</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport2_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">Q</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">Q</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport2</span> <span class="id" title="var">Q</span> (<span class="id" title="var">r</span>^) <span class="id" title="var">z</span> = (<span class="id" title="var">transport2</span> <span class="id" title="var">Q</span> <span class="id" title="var">r</span> <span class="id" title="var">z</span>)^<br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">match</span> <span class="id" title="var">r</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_AT</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">z</span> = <span class="id" title="var">w</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>) <span class="id" title="var">s</span>  @  <span class="id" title="var">transport2</span> <span class="id" title="var">P</span> <span class="id" title="var">r</span> <span class="id" title="var">w</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">transport2</span> <span class="id" title="var">P</span> <span class="id" title="var">r</span> <span class="id" title="var">z</span>  @  <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">q</span>) <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">match</span> <span class="id" title="var">r</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; (<span class="id" title="var">concat_p1_1p</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_pp_1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">a</span> <span class="id" title="var">b</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">a</span> = <span class="id" title="var">b</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">P</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport_pp</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> 1 <span class="id" title="var">x</span> = <span class="id" title="var">transport2</span> <span class="id" title="var">P</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">p</span>) <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;What&nbsp;should&nbsp;this&nbsp;be&nbsp;called?&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ap_transport</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">f</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">Q</span> <span class="id" title="var">x</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">f</span> <span class="id" title="var">y</span> (<span class="id" title="var">p</span> # <span class="id" title="var">z</span>) = (<span class="id" title="var">p</span> # (<span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ap_transportD</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">B</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) (<span class="id" title="var">C1</span> <span class="id" title="var">C2</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">A</span>, <span class="id" title="var">B</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">C1</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">C2</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">B</span> <span class="id" title="var">x1</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">C1</span> <span class="id" title="var">x1</span> <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">f</span> <span class="id" title="var">x2</span> (<span class="id" title="var">p</span> # <span class="id" title="var">y</span>) (<span class="id" title="var">transportD</span> <span class="id" title="var">B</span> <span class="id" title="var">C1</span> <span class="id" title="var">p</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;= <span class="id" title="var">transportD</span> <span class="id" title="var">B</span> <span class="id" title="var">C2</span> <span class="id" title="var">p</span> <span class="id" title="var">y</span> (<span class="id" title="var">f</span> <span class="id" title="var">x1</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ap_transportD2</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) (<span class="id" title="var">D1</span> <span class="id" title="var">D2</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">B</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="var">C</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">D1</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> -&gt; <span class="id" title="var">D2</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">B</span> <span class="id" title="var">x1</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">C</span> <span class="id" title="var">x1</span>) (<span class="id" title="var">w</span> : <span class="id" title="var">D1</span> <span class="id" title="var">x1</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>)<br/>
: <span class="id" title="var">f</span> <span class="id" title="var">x2</span> (<span class="id" title="var">p</span> # <span class="id" title="var">y</span>) (<span class="id" title="var">p</span> # <span class="id" title="var">z</span>) (<span class="id" title="var">transportD2</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D1</span> <span class="id" title="var">p</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span>)<br/>
&nbsp;&nbsp;= <span class="id" title="var">transportD2</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D2</span> <span class="id" title="var">p</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> (<span class="id" title="var">f</span> <span class="id" title="var">x1</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;What&nbsp;should&nbsp;this&nbsp;be&nbsp;called?&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ap_transport_pV</span> {<span class="id" title="var">X</span>} (<span class="id" title="var">Y</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">X</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">y1</span> <span class="id" title="var">y2</span> : <span class="id" title="var">Y</span> <span class="id" title="var">x2</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">y1</span> = <span class="id" title="var">y2</span>)<br/>
: <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">Y</span> <span class="id" title="var">p</span>) (<span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">Y</span> <span class="id" title="var">p</span>^) <span class="id" title="var">q</span>) =<br/>
&nbsp;&nbsp;<span class="id" title="var">transport_pV</span> <span class="id" title="var">Y</span> <span class="id" title="var">p</span> <span class="id" title="var">y1</span> @ <span class="id" title="var">q</span> @ (<span class="id" title="var">transport_pV</span> <span class="id" title="var">Y</span> <span class="id" title="var">p</span> <span class="id" title="var">y2</span>)^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;And&nbsp;this?&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_pV_ap</span> {<span class="id" title="var">X</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">X</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>)<br/>
: <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>) (<span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>^) @ <span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> = <span class="id" title="var">transport_pV</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> (<span class="id" title="var">f</span> <span class="id" title="var">x2</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD_pp</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">apD</span> <span class="id" title="var">f</span> (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">transport_pp</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) @ <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">q</span>) (<span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) @ <span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD_V</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>^ = <span class="id" title="var">moveR_transport_V</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>)^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab369"></a><h3 class="section">Transporting in particular fibrations.</h3>

<div class="paragraph"> </div>

 One frequently needs lemmas showing that transport in a certain dependent type is equal to some more explicitly defined operation, defined according to the structure of that dependent type.  For most dependent types, we prove these lemmas in the appropriate file in the types/ subdirectory.  Here we consider only the most basic cases. 
<div class="paragraph"> </div>

 Transporting in a constant fibration. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_const</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">B</span>) <span class="id" title="var">p</span> <span class="id" title="var">y</span> = <span class="id" title="var">y</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">exact</span> 1.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport2_const</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport_const</span> <span class="id" title="var">p</span> <span class="id" title="var">y</span> = <span class="id" title="var">transport2</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">B</span>) <span class="id" title="var">r</span> <span class="id" title="var">y</span> @ <span class="id" title="var">transport_const</span> <span class="id" title="var">q</span> <span class="id" title="var">y</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">match</span> <span class="id" title="var">r</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^ <span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Transporting in a pulled back fibration. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">transport_compose</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>))<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) <span class="id" title="var">p</span> <span class="id" title="var">z</span>  =  <span class="id" title="var">transport</span> <span class="id" title="var">P</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) <span class="id" title="var">z</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">transportD_compose</span> {<span class="id" title="var">A</span> <span class="id" title="var">A'</span>} <span class="id" title="var">B</span> {<span class="id" title="var">x</span> <span class="id" title="var">x'</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">C</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <span class="id" title="var">A'</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x'</span>) <span class="id" title="var">y</span> (<span class="id" title="var">z</span> : <span class="id" title="var">C</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">transportD</span> (<span class="id" title="var">B</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>) (<span class="id" title="var">C</span> <span class="id" title="var">oD</span> <span class="id" title="var">f</span>) <span class="id" title="var">p</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">transport</span> (<span class="id" title="var">C</span> (<span class="id" title="var">f</span> <span class="id" title="var">x'</span>)) (<span class="id" title="var">transport_compose</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> <span class="id" title="var">y</span>)^ (<span class="id" title="var">transportD</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) <span class="id" title="var">y</span> <span class="id" title="var">z</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;Is&nbsp;there&nbsp;a&nbsp;lemma&nbsp;like&nbsp;<span class="inlinecode"><span class="id" title="var">transportD_compose</span></span>,&nbsp;but&nbsp;for&nbsp;<span class="inlinecode"><span class="id" title="var">apD</span></span>,&nbsp;which&nbsp;subsumes&nbsp;this?&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">transport_apD_transportD</span> {<span class="id" title="var">A</span>} <span class="id" title="var">B</span> (<span class="id" title="var">f</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <span class="id" title="var">A</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span>) (<span class="id" title="var">C</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">C</span> <span class="id" title="var">x1</span> (<span class="id" title="var">f</span> <span class="id" title="var">x1</span>))<br/>
: <span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> # <span class="id" title="var">transportD</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">C</span> <span class="id" title="var">x</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) <span class="id" title="var">p</span> <span class="id" title="var">z</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">transport_precompose</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) (<span class="id" title="var">g</span> <span class="id" title="var">g'</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">g</span> = <span class="id" title="var">g'</span>)<br/>
: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span> =&gt; <span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span> = <span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>) <span class="id" title="var">p</span> 1 =<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> =&gt; <span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>) <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
A special case of <span class="inlinecode"><span class="id" title="var">transport_compose</span></span> which seems to come up a lot. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_idmap_ap</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
: <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> = <span class="id" title="var">transport</span> <span class="id" title="var">idmap</span> (<span class="id" title="var">ap</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>) <span class="id" title="var">u</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; <span class="id" title="var">idpath</span> <span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Sometimes, it's useful to have the goal be in terms of <span class="inlinecode"><span class="id" title="var">ap</span></span>, so we can use lemmas about <span class="inlinecode"><span class="id" title="var">ap</span></span>.  However, we can't just <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> <span class="inlinecode">!<span class="id" title="var">transport_idmap_ap</span></span>, as that's likely to loop.  So, instead, we provide a tactic <span class="inlinecode"><span class="id" title="var">transport_to_ap</span></span>, that replaces all <span class="inlinecode"><span class="id" title="var">transport</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode"><span class="id" title="var">u</span></span> with <span class="inlinecode"><span class="id" title="var">transport</span></span> <span class="inlinecode"><span class="id" title="var">idmap</span></span> <span class="inlinecode">(<span class="id" title="var">ap</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode"><span class="id" title="var">p</span>)</span> <span class="inlinecode"><span class="id" title="var">u</span></span> for non-<span class="inlinecode"><span class="id" title="var">idmap</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">transport_to_ap</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span>[<span class="id" title="var">transport</span> ?<span class="id" title="var">P</span> ?<span class="id" title="var">p</span> ?<span class="id" title="var">u</span>] ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">P</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">idmap</span> =&gt; <span class="id" title="tactic">fail</span> 1 <span class="comment">(*&nbsp;we&nbsp;don't&nbsp;want&nbsp;to&nbsp;turn&nbsp;<span class="inlinecode"><span class="id" title="var">transport</span></span> <span class="inlinecode"><span class="id" title="var">idmap</span></span> <span class="inlinecode">(<span class="id" title="var">ap</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">_</span>)</span>&nbsp;into&nbsp;<span class="inlinecode"><span class="id" title="var">transport</span></span> <span class="inlinecode"><span class="id" title="var">idmap</span></span> <span class="inlinecode">(<span class="id" title="var">ap</span></span> <span class="inlinecode"><span class="id" title="var">idmap</span></span> <span class="inlinecode">(<span class="id" title="var">ap</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">_</span>))</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">progress</span> <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">transport_idmap_ap</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Transporting in a fibration dependent on two independent types commutes. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_transport</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">C</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) {<span class="id" title="var">y1</span> <span class="id" title="var">y2</span> : <span class="id" title="var">B</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">y1</span> = <span class="id" title="var">y2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="var">C</span> <span class="id" title="var">x1</span> <span class="id" title="var">y1</span>)<br/>
: <span class="id" title="var">transport</span> (<span class="id" title="var">C</span> <span class="id" title="var">x2</span>) <span class="id" title="var">q</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">C</span> <span class="id" title="var">x</span> <span class="id" title="var">y1</span>) <span class="id" title="var">p</span> <span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;= <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">C</span> <span class="id" title="var">x</span> <span class="id" title="var">y2</span>) <span class="id" title="var">p</span> (<span class="id" title="var">transport</span> (<span class="id" title="var">C</span> <span class="id" title="var">x1</span>) <span class="id" title="var">q</span> <span class="id" title="var">c</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab370"></a><h3 class="section">The behavior of <span class="inlinecode"><span class="id" title="var">ap</span></span> and <span class="inlinecode"><span class="id" title="var">apD</span></span>.</h3>

<div class="paragraph"> </div>

 In a constant fibration, <span class="inlinecode"><span class="id" title="var">apD</span></span> reduces to <span class="inlinecode"><span class="id" title="var">ap</span></span>, modulo <span class="inlinecode"><span class="id" title="var">transport_const</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">apD_const</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) (<span class="id" title="var">p</span>: <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> = <span class="id" title="var">transport_const</span> <span class="id" title="var">p</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) @ <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD_compose</span> {<span class="id" title="var">A</span> <span class="id" title="var">A'</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">B</span> : <span class="id" title="var">A'</span> -&gt; <span class="id" title="keyword">Type</span>} (<span class="id" title="var">g</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A'</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">B</span> <span class="id" title="var">a</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">apD</span> (<span class="id" title="var">f</span> <span class="id" title="var">o</span> <span class="id" title="var">g</span>) <span class="id" title="var">p</span>  = (<span class="id" title="var">transport_compose</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) @ <span class="id" title="var">apD</span> <span class="id" title="var">f</span> (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">p</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD_compose'</span> {<span class="id" title="var">A</span> <span class="id" title="var">A'</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">B</span> : <span class="id" title="var">A'</span> -&gt; <span class="id" title="keyword">Type</span>} (<span class="id" title="var">g</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A'</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">B</span> <span class="id" title="var">a</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">apD</span> <span class="id" title="var">f</span> (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">p</span>) = (<span class="id" title="var">transport_compose</span> <span class="id" title="var">B</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">apD</span> (<span class="id" title="var">f</span> <span class="id" title="var">o</span> <span class="id" title="var">g</span>) <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab371"></a><h2 class="section">The 2-dimensional groupoid structure</h2>

<div class="paragraph"> </div>

 Horizontal composition of 2-dimensional paths. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat2</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} {<span class="id" title="var">q</span> <span class="id" title="var">q'</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">p</span> = <span class="id" title="var">p'</span>) (<span class="id" title="var">h'</span> : <span class="id" title="var">q</span> = <span class="id" title="var">q'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">p</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">p'</span> @ <span class="id" title="var">q'</span><br/>
:= <span class="id" title="keyword">match</span> <span class="id" title="var">h</span>, <span class="id" title="var">h'</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span>, <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;p @@ q" := (<span class="id" title="var">concat2</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>)%<span class="id" title="var">path</span> : <span class="id" title="var">path_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">concat2</span> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">nomatch</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">concat2_ap_ap</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x'</span> <span class="id" title="var">y'</span> <span class="id" title="var">z'</span> : <span class="id" title="var">B</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; (<span class="id" title="var">x'</span> = <span class="id" title="var">y'</span>)) (<span class="id" title="var">g</span> : <span class="id" title="var">A</span> -&gt; (<span class="id" title="var">y'</span> = <span class="id" title="var">z'</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
: (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) @@ (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">p</span>) = <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">u</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">u</span> @ <span class="id" title="var">g</span> <span class="id" title="var">u</span>) <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">path_induction</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
2-dimensional path inversion 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">inverse2</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">p</span>^ = <span class="id" title="var">q</span>^<br/>
:= <span class="id" title="var">ap</span> <span class="id" title="var">inverse</span> <span class="id" title="var">h</span>.<br/>

<br/>
</div>

<div class="doc">
Some higher coherences 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ap_pp_concat_p1</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) {<span class="id" title="var">a</span> <span class="id" title="var">b</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">a</span> = <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap_pp</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> 1 @ <span class="id" title="var">concat_p1</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) = <span class="id" title="var">ap</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>) (<span class="id" title="var">concat_p1</span> <span class="id" title="var">p</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ap_pp_concat_1p</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) {<span class="id" title="var">a</span> <span class="id" title="var">b</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">a</span> = <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap_pp</span> <span class="id" title="var">f</span> 1 <span class="id" title="var">p</span> @ <span class="id" title="var">concat_1p</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) = <span class="id" title="var">ap</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>) (<span class="id" title="var">concat_1p</span> <span class="id" title="var">p</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ap_pp_concat_pV</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">ap_pp</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> <span class="id" title="var">p</span>^ @ ((1 @@ <span class="id" title="var">ap_V</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) @ <span class="id" title="var">concat_pV</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>))<br/>
&nbsp;&nbsp;= <span class="id" title="var">ap</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>) (<span class="id" title="var">concat_pV</span> <span class="id" title="var">p</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ap_pp_concat_Vp</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">ap_pp</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>^ <span class="id" title="var">p</span> @ ((<span class="id" title="var">ap_V</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> @@ 1) @ <span class="id" title="var">concat_Vp</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>))<br/>
&nbsp;&nbsp;= <span class="id" title="var">ap</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>) (<span class="id" title="var">concat_Vp</span> <span class="id" title="var">p</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">concat_pV_inverse2</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>)<br/>
: (<span class="id" title="var">r</span> @@ <span class="id" title="var">inverse2</span> <span class="id" title="var">r</span>) @ <span class="id" title="var">concat_pV</span> <span class="id" title="var">q</span> = <span class="id" title="var">concat_pV</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>, <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">concat_Vp_inverse2</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>)<br/>
: (<span class="id" title="var">inverse2</span> <span class="id" title="var">r</span> @@ <span class="id" title="var">r</span>) @ <span class="id" title="var">concat_Vp</span> <span class="id" title="var">q</span> = <span class="id" title="var">concat_Vp</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>, <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab372"></a><h3 class="section">Whiskering</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerL</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">q</span> <span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">q</span> = <span class="id" title="var">r</span>) : <span class="id" title="var">p</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">p</span> @ <span class="id" title="var">r</span><br/>
:= 1 @@ <span class="id" title="var">h</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerR</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">h</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) : <span class="id" title="var">p</span> @ <span class="id" title="var">r</span> = <span class="id" title="var">q</span> @ <span class="id" title="var">r</span><br/>
:= <span class="id" title="var">h</span> @@ 1.<br/>

<br/>
</div>

<div class="doc">
<a id="lab373"></a><h3 class="section">Unwhiskering, a.k.a. cancelling.</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cancelL</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> <span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
: (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">p</span> @ <span class="id" title="var">r</span>) -&gt; (<span class="id" title="var">q</span> = <span class="id" title="var">r</span>)<br/>
:= <span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> =&gt; (<span class="id" title="var">concat_V_pp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>)^ @ <span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span>^ <span class="id" title="var">h</span> @ (<span class="id" title="var">concat_V_pp</span> <span class="id" title="var">p</span> <span class="id" title="var">r</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cancelR</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
: (<span class="id" title="var">p</span> @ <span class="id" title="var">r</span> = <span class="id" title="var">q</span> @ <span class="id" title="var">r</span>) -&gt; (<span class="id" title="var">p</span> = <span class="id" title="var">q</span>)<br/>
:= <span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> =&gt; (<span class="id" title="var">concat_pp_V</span> <span class="id" title="var">p</span> <span class="id" title="var">r</span>)^ @ <span class="id" title="var">whiskerR</span> <span class="id" title="var">h</span> <span class="id" title="var">r</span>^ @ (<span class="id" title="var">concat_pp_V</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>).<br/>

<br/>
</div>

<div class="doc">
Whiskering and identity paths. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerR_p1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">concat_p1</span> <span class="id" title="var">p</span>)^ @ <span class="id" title="var">whiskerR</span> <span class="id" title="var">h</span> 1 @ <span class="id" title="var">concat_p1</span> <span class="id" title="var">q</span> = <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">h</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerR_1p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">whiskerR</span> 1 <span class="id" title="var">q</span> = 1 :&gt; (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">p</span> @ <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">q</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerL_p1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> 1 = 1 :&gt; (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">p</span> @ <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">q</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1 <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerL_1p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">concat_1p</span> <span class="id" title="var">p</span>) ^ @ <span class="id" title="var">whiskerL</span> 1 <span class="id" title="var">h</span> @ <span class="id" title="var">concat_1p</span> <span class="id" title="var">q</span> = <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">h</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerR_p1_1</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">idpath</span> <span class="id" title="var">x</span> = <span class="id" title="var">idpath</span> <span class="id" title="var">x</span>)<br/>
: <span class="id" title="var">whiskerR</span> <span class="id" title="var">h</span> 1 = <span class="id" title="var">h</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @ <span class="id" title="var">whiskerR_p1</span> <span class="id" title="var">h</span>); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">refine</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span> @ <span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerL_1p_1</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">idpath</span> <span class="id" title="var">x</span> = <span class="id" title="var">idpath</span> <span class="id" title="var">x</span>)<br/>
: <span class="id" title="var">whiskerL</span> 1 <span class="id" title="var">h</span> = <span class="id" title="var">h</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @ <span class="id" title="var">whiskerL_1p</span> <span class="id" title="var">h</span>); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">refine</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span> @ <span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cancel2L</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} {<span class="id" title="var">q</span> <span class="id" title="var">q'</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">g</span> : <span class="id" title="var">p</span> = <span class="id" title="var">p'</span>) (<span class="id" title="var">h</span> <span class="id" title="var">k</span> : <span class="id" title="var">q</span> = <span class="id" title="var">q'</span>)<br/>
: (<span class="id" title="var">g</span> @@ <span class="id" title="var">h</span> = <span class="id" title="var">g</span> @@ <span class="id" title="var">k</span>) -&gt; (<span class="id" title="var">h</span> = <span class="id" title="var">k</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">r</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">g</span>, <span class="id" title="var">p</span>, <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">whiskerL_1p</span> <span class="id" title="var">h</span>)^ @ <span class="id" title="var">_</span>). <span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @ (<span class="id" title="var">whiskerL_1p</span> <span class="id" title="var">k</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">whiskerR</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">refine</span> (<span class="id" title="var">whiskerL</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cancel2R</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} {<span class="id" title="var">q</span> <span class="id" title="var">q'</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">g</span> <span class="id" title="var">h</span> : <span class="id" title="var">p</span> = <span class="id" title="var">p'</span>) (<span class="id" title="var">k</span> : <span class="id" title="var">q</span> = <span class="id" title="var">q'</span>)<br/>
: (<span class="id" title="var">g</span> @@ <span class="id" title="var">k</span> = <span class="id" title="var">h</span> @@ <span class="id" title="var">k</span>) -&gt; (<span class="id" title="var">g</span> = <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">r</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">k</span>, <span class="id" title="var">p</span>, <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">whiskerR_p1</span> <span class="id" title="var">g</span>)^ @ <span class="id" title="var">_</span>). <span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @ (<span class="id" title="var">whiskerR_p1</span> <span class="id" title="var">h</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">whiskerR</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">refine</span> (<span class="id" title="var">whiskerL</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Whiskering and composition 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;The&nbsp;naming&nbsp;scheme&nbsp;for&nbsp;these&nbsp;is&nbsp;a&nbsp;little&nbsp;unclear;&nbsp;should&nbsp;<span class="inlinecode"><span class="id" title="var">pp</span></span>&nbsp;refer&nbsp;to&nbsp;concatenation&nbsp;of&nbsp;the&nbsp;2-paths&nbsp;being&nbsp;whiskered&nbsp;or&nbsp;of&nbsp;the&nbsp;paths&nbsp;we&nbsp;are&nbsp;whiskering&nbsp;by?&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerL_pp</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) {<span class="id" title="var">q</span> <span class="id" title="var">q'</span> <span class="id" title="var">q''</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">q</span> = <span class="id" title="var">q'</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">q'</span> = <span class="id" title="var">q''</span>)<br/>
: <span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> (<span class="id" title="var">r</span> @ <span class="id" title="var">s</span>) = <span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> <span class="id" title="var">r</span> @ <span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> <span class="id" title="var">s</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">r</span>, <span class="id" title="var">s</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerR_pp</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">p'</span> <span class="id" title="var">p''</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">p'</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">p'</span> = <span class="id" title="var">p''</span>)<br/>
: <span class="id" title="var">whiskerR</span> (<span class="id" title="var">r</span> @ <span class="id" title="var">s</span>) <span class="id" title="var">q</span> = <span class="id" title="var">whiskerR</span> <span class="id" title="var">r</span> <span class="id" title="var">q</span> @ <span class="id" title="var">whiskerR</span> <span class="id" title="var">s</span> <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>, <span class="id" title="var">r</span>, <span class="id" title="var">s</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;For&nbsp;now,&nbsp;I've&nbsp;put&nbsp;an&nbsp;<span class="inlinecode"><span class="id" title="var">L</span></span>&nbsp;or&nbsp;<span class="inlinecode"><span class="id" title="var">R</span></span>&nbsp;to&nbsp;mark&nbsp;when&nbsp;we're&nbsp;referring&nbsp;to&nbsp;the&nbsp;whiskering&nbsp;paths.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerL_VpL</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">q</span> <span class="id" title="var">q'</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">q</span> = <span class="id" title="var">q'</span>)<br/>
: (<span class="id" title="var">concat_V_pp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>)^ @ <span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span>^ (<span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> <span class="id" title="var">r</span>) @ <span class="id" title="var">concat_V_pp</span> <span class="id" title="var">p</span> <span class="id" title="var">q'</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">r</span>, <span class="id" title="var">q</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerL_pVL</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">q</span> <span class="id" title="var">q'</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">q</span> = <span class="id" title="var">q'</span>)<br/>
: (<span class="id" title="var">concat_p_Vp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>)^ @ <span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> (<span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span>^ <span class="id" title="var">r</span>) @ <span class="id" title="var">concat_p_Vp</span> <span class="id" title="var">p</span> <span class="id" title="var">q'</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">r</span>, <span class="id" title="var">q</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerR_pVR</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">p'</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
: (<span class="id" title="var">concat_pp_V</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>)^ @ <span class="id" title="var">whiskerR</span> (<span class="id" title="var">whiskerR</span> <span class="id" title="var">r</span> <span class="id" title="var">q</span>) <span class="id" title="var">q</span>^ @ <span class="id" title="var">concat_pp_V</span> <span class="id" title="var">p'</span> <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">r</span>, <span class="id" title="var">q</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerR_VpR</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">p'</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">z</span> = <span class="id" title="var">y</span>)<br/>
: (<span class="id" title="var">concat_pV_p</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>)^ @ <span class="id" title="var">whiskerR</span> (<span class="id" title="var">whiskerR</span> <span class="id" title="var">r</span> <span class="id" title="var">q</span>^) <span class="id" title="var">q</span> @ <span class="id" title="var">concat_pV_p</span> <span class="id" title="var">p'</span> <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">r</span>, <span class="id" title="var">q</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Naturality of <span class="inlinecode"><span class="id" title="var">concat_p_pp</span></span> in left-most argument. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_p_pp_nat_l</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">w</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">w</span> = <span class="id" title="var">x</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">p</span> = <span class="id" title="var">p'</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">whiskerR</span> <span class="id" title="var">h</span> (<span class="id" title="var">q</span> @ <span class="id" title="var">r</span>) @ <span class="id" title="var">concat_p_pp</span> <span class="id" title="var">p'</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">concat_p_pp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> @ <span class="id" title="var">whiskerR</span> (<span class="id" title="var">whiskerR</span> <span class="id" title="var">h</span> <span class="id" title="var">q</span>) <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span>, <span class="id" title="var">p</span>, <span class="id" title="var">q</span>, <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Naturality of <span class="inlinecode"><span class="id" title="var">concat_p_pp</span></span> in middle argument. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_p_pp_nat_m</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">w</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">w</span> = <span class="id" title="var">x</span>) {<span class="id" title="var">q</span> <span class="id" title="var">q'</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">q</span> = <span class="id" title="var">q'</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> (<span class="id" title="var">whiskerR</span> <span class="id" title="var">h</span> <span class="id" title="var">r</span>) @ <span class="id" title="var">concat_p_pp</span> <span class="id" title="var">p</span> <span class="id" title="var">q'</span> <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">concat_p_pp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> @ <span class="id" title="var">whiskerR</span> (<span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> <span class="id" title="var">h</span>) <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span>, <span class="id" title="var">p</span>, <span class="id" title="var">q</span>, <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Naturality of <span class="inlinecode"><span class="id" title="var">concat_p_pp</span></span> in right-most argument. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_p_pp_nat_r</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">w</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">w</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) {<span class="id" title="var">r</span> <span class="id" title="var">r'</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">r</span> = <span class="id" title="var">r'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> (<span class="id" title="var">whiskerL</span> <span class="id" title="var">q</span> <span class="id" title="var">h</span>) @ <span class="id" title="var">concat_p_pp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">concat_p_pp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> @ <span class="id" title="var">whiskerL</span> (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>) <span class="id" title="var">h</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span>, <span class="id" title="var">p</span>, <span class="id" title="var">q</span>, <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The interchange law for concatenation. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_concat2</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">p'</span> <span class="id" title="var">p''</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} {<span class="id" title="var">q</span> <span class="id" title="var">q'</span> <span class="id" title="var">q''</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">a</span> : <span class="id" title="var">p</span> = <span class="id" title="var">p'</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">p'</span> = <span class="id" title="var">p''</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">q</span> = <span class="id" title="var">q'</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">q'</span> = <span class="id" title="var">q''</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">a</span> @@ <span class="id" title="var">c</span>) @ (<span class="id" title="var">b</span> @@ <span class="id" title="var">d</span>) = (<span class="id" title="var">a</span> @ <span class="id" title="var">b</span>) @@ (<span class="id" title="var">c</span> @ <span class="id" title="var">d</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The interchange law for whiskering.  Special case of <span class="inlinecode"><span class="id" title="var">concat_concat2</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_whisker</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> <span class="id" title="var">q'</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">p</span> = <span class="id" title="var">p'</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">q</span> = <span class="id" title="var">q'</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">whiskerR</span> <span class="id" title="var">a</span> <span class="id" title="var">q</span>) @ (<span class="id" title="var">whiskerL</span> <span class="id" title="var">p'</span> <span class="id" title="var">b</span>) = (<span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span>) @ (<span class="id" title="var">whiskerR</span> <span class="id" title="var">a</span> <span class="id" title="var">q'</span>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">b</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">idpath</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">a</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Structure corresponding to the coherence equations of a bicategory. 
<div class="paragraph"> </div>

 The "pentagonator": the 3-cell witnessing the associativity pentagon. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pentagon</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">v</span> <span class="id" title="var">w</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">v</span> = <span class="id" title="var">w</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">w</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> (<span class="id" title="var">concat_p_pp</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">concat_p_pp</span> <span class="id" title="var">p</span> (<span class="id" title="var">q@r</span>) <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">whiskerR</span> (<span class="id" title="var">concat_p_pp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>) <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">concat_p_pp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> (<span class="id" title="var">r@s</span>) @ <span class="id" title="var">concat_p_pp</span> (<span class="id" title="var">p@q</span>) <span class="id" title="var">r</span> <span class="id" title="var">s</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>, <span class="id" title="var">r</span>, <span class="id" title="var">s</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The 3-cell witnessing the left unit triangle. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">triangulator</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">concat_p_pp</span> <span class="id" title="var">p</span> 1 <span class="id" title="var">q</span> @ <span class="id" title="var">whiskerR</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">p</span>) <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> (<span class="id" title="var">concat_1p</span> <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The Eckmann-Hilton argument 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">eckmann_hilton</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span>:<span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : 1 = 1 :&gt; (<span class="id" title="var">x</span> = <span class="id" title="var">x</span>)) : <span class="id" title="var">p</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">q</span> @ <span class="id" title="var">p</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="var">whiskerR_p1</span> <span class="id" title="var">p</span> @@ <span class="id" title="var">whiskerL_1p</span> <span class="id" title="var">q</span>)^<br/>
&nbsp;&nbsp;@ (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span> @@ <span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;@ (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span> @@ <span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;@ (<span class="id" title="var">concat_whisker</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;@ (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span> @@ <span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^<br/>
&nbsp;&nbsp;@ (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span> @@ <span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)^<br/>
&nbsp;&nbsp;@ (<span class="id" title="var">whiskerL_1p</span> <span class="id" title="var">q</span> @@ <span class="id" title="var">whiskerR_p1</span> <span class="id" title="var">p</span>).<br/>

<br/>
</div>

<div class="doc">
The action of functions on 2-dimensional paths 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap02</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span>:<span class="id" title="var">x</span>=<span class="id" title="var">y</span>} (<span class="id" title="var">r</span>:<span class="id" title="var">p</span>=<span class="id" title="var">q</span>) : <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> = <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">ap</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>) <span class="id" title="var">r</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap02_pp</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">p'</span> <span class="id" title="var">p''</span>:<span class="id" title="var">x</span>=<span class="id" title="var">y</span>} (<span class="id" title="var">r</span>:<span class="id" title="var">p</span>=<span class="id" title="var">p'</span>) (<span class="id" title="var">r'</span>:<span class="id" title="var">p'</span>=<span class="id" title="var">p''</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap02</span> <span class="id" title="var">f</span> (<span class="id" title="var">r</span> @ <span class="id" title="var">r'</span>) = <span class="id" title="var">ap02</span> <span class="id" title="var">f</span> <span class="id" title="var">r</span> @ <span class="id" title="var">ap02</span> <span class="id" title="var">f</span> <span class="id" title="var">r'</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">ap_pp</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>) <span class="id" title="var">r</span> <span class="id" title="var">r'</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap02_p2p</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>:<span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">p'</span>:<span class="id" title="var">x</span>=<span class="id" title="var">y</span>} {<span class="id" title="var">q</span> <span class="id" title="var">q'</span>:<span class="id" title="var">y</span>=<span class="id" title="var">z</span>} (<span class="id" title="var">r</span>:<span class="id" title="var">p</span>=<span class="id" title="var">p'</span>) (<span class="id" title="var">s</span>:<span class="id" title="var">q</span>=<span class="id" title="var">q'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap02</span> <span class="id" title="var">f</span> (<span class="id" title="var">r</span> @@ <span class="id" title="var">s</span>) = <span class="id" title="var">ap_pp</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ (<span class="id" title="var">ap02</span> <span class="id" title="var">f</span> <span class="id" title="var">r</span> @@ <span class="id" title="var">ap02</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ (<span class="id" title="var">ap_pp</span> <span class="id" title="var">f</span> <span class="id" title="var">p'</span> <span class="id" title="var">q'</span>)^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <span class="id" title="var">r</span>, <span class="id" title="var">s</span>, <span class="id" title="var">p</span>, <span class="id" title="var">q</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD02</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">B</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> = <span class="id" title="var">transport2</span> <span class="id" title="var">B</span> <span class="id" title="var">r</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) @ <span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">match</span> <span class="id" title="var">r</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^ <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD02_const</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">apD02</span> <span class="id" title="var">f</span> <span class="id" title="var">r</span> = (<span class="id" title="var">apD_const</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ (<span class="id" title="var">transport2_const</span> <span class="id" title="var">r</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) @@ <span class="id" title="var">ap02</span> <span class="id" title="var">f</span> <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ (<span class="id" title="var">concat_p_pp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ (<span class="id" title="var">whiskerL</span> (<span class="id" title="var">transport2</span> <span class="id" title="var">_</span> <span class="id" title="var">r</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) (<span class="id" title="var">apD_const</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>)^)<br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">match</span> <span class="id" title="var">r</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">idpath</span> =&gt; 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;And&nbsp;now&nbsp;for&nbsp;a&nbsp;lemma&nbsp;whose&nbsp;statement&nbsp;is&nbsp;much&nbsp;longer&nbsp;than&nbsp;its&nbsp;proof.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD02_pp</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">B</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>:<span class="id" title="var">A</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">p3</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} (<span class="id" title="var">r1</span> : <span class="id" title="var">p1</span> = <span class="id" title="var">p2</span>) (<span class="id" title="var">r2</span> : <span class="id" title="var">p2</span> = <span class="id" title="var">p3</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">apD02</span> <span class="id" title="var">f</span> (<span class="id" title="var">r1</span> @ <span class="id" title="var">r2</span>)<br/>
&nbsp;&nbsp;= <span class="id" title="var">apD02</span> <span class="id" title="var">f</span> <span class="id" title="var">r1</span><br/>
&nbsp;&nbsp;@ <span class="id" title="var">whiskerL</span> (<span class="id" title="var">transport2</span> <span class="id" title="var">B</span> <span class="id" title="var">r1</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) (<span class="id" title="var">apD02</span> <span class="id" title="var">f</span> <span class="id" title="var">r2</span>)<br/>
&nbsp;&nbsp;@ <span class="id" title="var">concat_p_pp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;@ (<span class="id" title="var">whiskerR</span> (<span class="id" title="var">transport2_p2p</span> <span class="id" title="var">B</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>))^ (<span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">p3</span>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r1</span>, <span class="id" title="var">r2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p1</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap022</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span>) {<span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">y</span> <span class="id" title="var">y'</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x'</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">p'</span>) {<span class="id" title="var">q</span> <span class="id" title="var">q'</span> : <span class="id" title="var">y</span> = <span class="id" title="var">y'</span>} (<span class="id" title="var">s</span> : <span class="id" title="var">q</span> = <span class="id" title="var">q'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap011</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> = <span class="id" title="var">ap011</span> <span class="id" title="var">f</span> <span class="id" title="var">p'</span> <span class="id" title="var">q'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>, <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ap02</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">s</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
These lemmas need better names. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_transport_Vp_idmap</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">A</span> = <span class="id" title="var">B</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">q</span> = <span class="id" title="var">p</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">A</span>)<br/>
: <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">idmap</span> <span class="id" title="var">q</span>^) (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> =&gt; <span class="id" title="var">transport</span> <span class="id" title="var">idmap</span> <span class="id" title="var">s</span> <span class="id" title="var">z</span>) <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;@ <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> =&gt; <span class="id" title="var">transport</span> <span class="id" title="var">idmap</span> <span class="id" title="var">s</span> (<span class="id" title="var">p</span> # <span class="id" title="var">z</span>)) (<span class="id" title="var">inverse2</span> <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;@ <span class="id" title="var">transport_Vp</span> <span class="id" title="var">idmap</span> <span class="id" title="var">p</span> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">transport_Vp</span> <span class="id" title="var">idmap</span> <span class="id" title="var">q</span> <span class="id" title="var">z</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">path_induction</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_transport_pV_idmap</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">A</span> = <span class="id" title="var">B</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">q</span> = <span class="id" title="var">p</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">B</span>)<br/>
: <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">idmap</span> <span class="id" title="var">q</span>) (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> =&gt; <span class="id" title="var">transport</span> <span class="id" title="var">idmap</span> <span class="id" title="var">s</span>^ <span class="id" title="var">z</span>) <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;@ <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> =&gt; <span class="id" title="var">transport</span> <span class="id" title="var">idmap</span> <span class="id" title="var">s</span> (<span class="id" title="var">p</span>^ # <span class="id" title="var">z</span>)) <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;@ <span class="id" title="var">transport_pV</span> <span class="id" title="var">idmap</span> <span class="id" title="var">p</span> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">transport_pV</span> <span class="id" title="var">idmap</span> <span class="id" title="var">q</span> <span class="id" title="var">z</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">path_induction</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab374"></a><h2 class="section">Hints</h2>

<div class="paragraph"> </div>

 We declare some more <span class="inlinecode"><span class="id" title="keyword">Hint</span></span> <span class="inlinecode"><span class="id" title="keyword">Resolve</span></span> hints, now in the "hint database" <span class="inlinecode"><span class="id" title="var">path_hints</span></span>.  In general various hints (resolve, rewrite, unfold hints) can be grouped into "databases". This is necessary as sometimes different kinds of hints cannot be mixed, for example because they would cause a combinatorial explosion or rewriting cycles.  A specific <span class="inlinecode"><span class="id" title="keyword">Hint</span></span> <span class="inlinecode"><span class="id" title="keyword">Resolve</span></span> database <span class="inlinecode"><span class="id" title="var">db</span></span> can be used with <span class="inlinecode"><span class="id" title="tactic">auto</span></span> <span class="inlinecode"><span class="id" title="keyword">with</span></span> <span class="inlinecode"><span class="id" title="var">db</span></span>.

<div class="paragraph"> </div>

    The hints in <span class="inlinecode"><span class="id" title="var">path_hints</span></span> are designed to push concatenation *outwards*, eliminate identities and inverses, and associate to the left as far as possible. 
</div>
<div class="code">

<br/>
#[<span class="id" title="var">export</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span><br/>
&nbsp;&nbsp;<span class="id" title="var">inverse</span><br/>
&nbsp;&nbsp;<span class="id" title="var">concat_1p</span> <span class="id" title="var">concat_p1</span> <span class="id" title="var">concat_p_pp</span><br/>
&nbsp;&nbsp;<span class="id" title="var">inv_pp</span> <span class="id" title="var">inv_V</span><br/>
&nbsp;&nbsp;: <span class="id" title="var">path_hints</span>.<br/>

<br/>
<span class="comment">(*&nbsp;First&nbsp;try&nbsp;at&nbsp;a&nbsp;paths&nbsp;db.&nbsp;&nbsp;We&nbsp;want&nbsp;the&nbsp;RHS&nbsp;of&nbsp;the&nbsp;equation&nbsp;to&nbsp;become&nbsp;strictly&nbsp;simpler.&nbsp;*)</span><br/>
#[<span class="id" title="var">export</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">concat_p1</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">concat_1p</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">concat_p_pp</span> <span class="comment">(*&nbsp;there&nbsp;is&nbsp;a&nbsp;choice&nbsp;here&nbsp;!*)</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">concat_pV</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">concat_Vp</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">concat_V_pp</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">concat_p_Vp</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">concat_pp_V</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">concat_pV_p</span><br/>
&nbsp;&nbsp;<span class="comment">(*@inv_pp*)</span> <span class="comment">(*&nbsp;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;about&nbsp;this&nbsp;one&nbsp;*)</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">inv_V</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">moveR_Mp</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">moveR_pM</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">moveL_Mp</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">moveL_pM</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">moveL_1M</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">moveL_M1</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">moveR_M1</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">moveR_1M</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">ap_1</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;@ap_pp<br/>
&nbsp;&nbsp;@ap_p_pp&nbsp;?*)</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">inverse_ap</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">ap_idmap</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;@ap_compose<br/>
&nbsp;&nbsp;@ap_compose'*)</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">ap_const</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Unsure&nbsp;about&nbsp;naturality&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">ap</span></span>,&nbsp;was&nbsp;absent&nbsp;in&nbsp;the&nbsp;old&nbsp;implementation.&nbsp;*)</span><br/>
&nbsp;&nbsp;@<span class="id" title="var">apD10_1</span><br/>
&nbsp;&nbsp;: <span class="id" title="var">paths</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">hott_simpl</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">paths</span> <span class="id" title="tactic">in</span> * |- * ; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">path_hints</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>