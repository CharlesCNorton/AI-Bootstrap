<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>ExactSequence</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library ExactSequence</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Basics</span> <span class="id" title="keyword">Types</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">SuccessorStructure</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">WildCat</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Pointed</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Modalities.Identity</span> <span class="id" title="var">Modalities.Descent</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Truncations</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">HFiber</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ObjectClassifier</span>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">succ_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">pointed_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1118"></a><h1 class="section">Exact sequences</h1>

<div class="paragraph"> </div>

<a id="lab1119"></a><h2 class="section">Very short complexes</h2>

<div class="paragraph"> </div>

 A (very short) complex is a pair of pointed maps whose composite is the zero map. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">IsComplex</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>} (<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;:= (<span class="id" title="var">f</span> <span class="id" title="var">o</span>* <span class="id" title="var">i</span> ==* <span class="id" title="var">pconst</span>).<br/>

<br/>
</div>

<div class="doc">
This induces a map from the domain of <span class="inlinecode"><span class="id" title="var">i</span></span> to the fiber of <span class="inlinecode"><span class="id" title="var">f</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cxfib</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>} {<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">cx</span> : <span class="id" title="var">IsComplex</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">pfiber</span> <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">srapply</span> <span class="id" title="var">Build_pMap</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; (<span class="id" title="var">i</span> <span class="id" title="var">x</span>; <span class="id" title="var">cx</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">refine</span> (<span class="id" title="var">path_sigma'</span> <span class="id" title="var">_</span> (<span class="id" title="var">point_eq</span> <span class="id" title="var">i</span>) <span class="id" title="var">_</span>); <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">transport_paths_Fl</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> @ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_Vp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">point_htpy</span> <span class="id" title="var">cx</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
...whose composite with the projection <span class="inlinecode"><span class="id" title="var">pfib</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">pfiber</span></span> <span class="inlinecode"><span class="id" title="var">i</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">X</span></span> is <span class="inlinecode"><span class="id" title="var">i</span></span>.  
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pfib_cxfib</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>} {<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">cx</span> : <span class="id" title="var">IsComplex</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">pfib</span> <span class="id" title="var">f</span> <span class="id" title="var">o</span>* <span class="id" title="var">cxfib</span> <span class="id" title="var">cx</span> ==* <span class="id" title="var">i</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">srapply</span> <span class="id" title="var">Build_pHomotopy</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ap_pr1_path_sigma</span>; <span class="id" title="var">hott_simpl</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Truncation preserves complexes. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">iscomplex_ptr</span> (<span class="id" title="var">n</span> : <span class="id" title="var">trunc_index</span>) {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>) (<span class="id" title="var">cx</span> : <span class="id" title="var">IsComplex</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsComplex</span> (<span class="id" title="var">fmap</span> (<span class="id" title="var">pTr</span> <span class="id" title="var">n</span>) <span class="id" title="var">i</span>) (<span class="id" title="var">fmap</span> (<span class="id" title="var">pTr</span> <span class="id" title="var">n</span>) <span class="id" title="var">f</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">fmap_comp</span> (<span class="id" title="var">pTr</span> <span class="id" title="var">n</span>) <span class="id" title="var">i</span> <span class="id" title="var">f</span>)^* @* <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @* <span class="id" title="var">ptr_functor_pconst</span> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">rapply</span> (<span class="id" title="var">fmap2</span> (<span class="id" title="var">pTr</span> <span class="id" title="var">_</span>)); <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Loop spaces preserve complexes. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">iscomplex_loops</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>) (<span class="id" title="var">cx</span> : <span class="id" title="var">IsComplex</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsComplex</span> (<span class="id" title="var">fmap</span> <span class="id" title="var">loops</span> <span class="id" title="var">i</span>) (<span class="id" title="var">fmap</span> <span class="id" title="var">loops</span> <span class="id" title="var">f</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">fmap_comp</span> <span class="id" title="var">loops</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>)^$ $@ <span class="id" title="var">_</span> $@ <span class="id" title="var">fmap_zero_morphism</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">rapply</span> (<span class="id" title="var">fmap2</span> <span class="id" title="var">loops</span>); <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">iscomplex_iterated_loops</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>) (<span class="id" title="var">cx</span> : <span class="id" title="var">IsComplex</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>) (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsComplex</span> (<span class="id" title="var">fmap</span> (<span class="id" title="var">iterated_loops</span> <span class="id" title="var">n</span>) <span class="id" title="var">i</span>) (<span class="id" title="var">fmap</span> (<span class="id" title="var">iterated_loops</span> <span class="id" title="var">n</span>) <span class="id" title="var">f</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">n</span> <span class="id" title="var">IHn</span>]; [ <span class="id" title="tactic">exact</span> <span class="id" title="var">cx</span> | ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">iscomplex_loops</span>; <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Passage across homotopies preserves complexes. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">iscomplex_homotopic_i</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">i</span> <span class="id" title="var">i'</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>} (<span class="id" title="var">ii</span> : <span class="id" title="var">i'</span> ==* <span class="id" title="var">i</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>) (<span class="id" title="var">cx</span> : <span class="id" title="var">IsComplex</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsComplex</span> <span class="id" title="var">i'</span> <span class="id" title="var">f</span> := <span class="id" title="var">pmap_postwhisker</span> <span class="id" title="var">f</span> <span class="id" title="var">ii</span> @* <span class="id" title="var">cx</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">iscomplex_homotopic_f</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) {<span class="id" title="var">f</span> <span class="id" title="var">f'</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>} (<span class="id" title="var">ff</span> : <span class="id" title="var">f'</span> ==* <span class="id" title="var">f</span>) (<span class="id" title="var">cx</span> : <span class="id" title="var">IsComplex</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsComplex</span> <span class="id" title="var">i</span> <span class="id" title="var">f'</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">pmap_prewhisker</span> <span class="id" title="var">i</span> <span class="id" title="var">ff</span> @* <span class="id" title="var">cx</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">iscomplex_cancelL</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">Y'</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">Y</span> &lt;~&gt;* <span class="id" title="var">Y'</span>) (<span class="id" title="var">cx</span> : <span class="id" title="var">IsComplex</span> <span class="id" title="var">i</span> (<span class="id" title="var">e</span> <span class="id" title="var">o</span>* <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsComplex</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @* <span class="id" title="var">precompose_pconst</span> <span class="id" title="var">e</span>^-1*).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">compose_V_hh</span> <span class="id" title="var">e</span> (<span class="id" title="var">f</span> <span class="id" title="var">o</span>* <span class="id" title="var">i</span>))^$ $@ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">cat_postwhisker</span> <span class="id" title="var">e</span>^-1* <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">cat_assoc</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^$ $@ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">cx</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
And likewise passage across squares with equivalences 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">iscomplex_equiv_i</span> {<span class="id" title="var">F</span> <span class="id" title="var">F'</span> <span class="id" title="var">X</span> <span class="id" title="var">X'</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">i'</span> : <span class="id" title="var">F'</span> -&gt;* <span class="id" title="var">X'</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">g</span> : <span class="id" title="var">F'</span> &lt;~&gt;* <span class="id" title="var">F</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">X'</span> &lt;~&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">h</span> <span class="id" title="var">o</span>* <span class="id" title="var">i'</span> ==* <span class="id" title="var">i</span> <span class="id" title="var">o</span>* <span class="id" title="var">g</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">cx</span>: <span class="id" title="var">IsComplex</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsComplex</span> <span class="id" title="var">i'</span> (<span class="id" title="var">f</span> <span class="id" title="var">o</span>* <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">pmap_compose_assoc</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> @* <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">pmap_postwhisker</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> @* <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">pmap_compose_assoc</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^* @* <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">pmap_prewhisker</span> <span class="id" title="var">g</span> <span class="id" title="var">cx</span> @* <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">postcompose_pconst</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
A special version with only an equivalence on the fiber. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">iscomplex_equiv_fiber</span> {<span class="id" title="var">F</span> <span class="id" title="var">F'</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>) (<span class="id" title="var">phi</span> : <span class="id" title="var">F'</span> &lt;~&gt;* <span class="id" title="var">F</span>)<br/>
&nbsp;&nbsp;`{<span class="id" title="var">cx</span> : <span class="id" title="var">IsComplex</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsComplex</span> (<span class="id" title="var">i</span> <span class="id" title="var">o</span>* <span class="id" title="var">phi</span>) <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">pmap_compose_assoc</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^* @* <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">pmap_prewhisker</span> <span class="id" title="var">_</span> <span class="id" title="var">cx</span> @* <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">postcompose_pconst</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Any pointed map induces a trivial complex. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">iscomplex_trivial</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsComplex</span> (@<span class="id" title="var">pconst</span> <span class="id" title="var">pUnit</span> <span class="id" title="var">X</span>) <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">srapply</span> <span class="id" title="var">Build_pHomotopy</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">point_eq</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>; <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span> @ <span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
If Y is a set, then IsComplex is an HProp. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">ishprop_iscomplex_hset</span> `{<span class="id" title="var">Funext</span>} {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>} `{<span class="id" title="var">IsHSet</span> <span class="id" title="var">Y</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsHProp</span> (<span class="id" title="var">IsComplex</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>) := <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1120"></a><h2 class="section">Very short exact sequences and fiber sequences</h2>

<div class="paragraph"> </div>

 A complex is <span class="inlinecode"><span class="id" title="var">n</span></span>-exact if the induced map <span class="inlinecode"><span class="id" title="var">cxfib</span></span> is <span class="inlinecode"><span class="id" title="var">n</span></span>-connected.  
</div>
<div class="code">
<span class="id" title="keyword">Cumulative Class</span> <span class="id" title="var">IsExact</span> (<span class="id" title="var">n</span> : <span class="id" title="var">Modality</span>) {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>} (<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>) :=<br/>
{<br/>
&nbsp;&nbsp;<span class="id" title="var">cx_isexact</span> : <span class="id" title="var">IsComplex</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="var">conn_map_isexact</span> : <span class="id" title="var">IsConnMap</span> <span class="id" title="var">n</span> (<span class="id" title="var">cxfib</span> <span class="id" title="var">cx_isexact</span>)<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Global Existing Instance</span> <span class="id" title="var">conn_map_isexact</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">issig_isexact</span> (<span class="id" title="var">n</span> : <span class="id" title="var">Modality</span>) {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>} (<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">_</span> &lt;~&gt; <span class="id" title="var">IsExact</span> <span class="id" title="var">n</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span> := <span class="id" title="keyword">ltac</span>:(<span class="id" title="var">issig</span>).<br/>

<br/>
</div>

<div class="doc">
If Y is a set, then IsExact is an HProp. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">ishprop_isexact_hset</span> `{<span class="id" title="var">Univalence</span>} {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>} `{<span class="id" title="var">IsHSet</span> <span class="id" title="var">Y</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">n</span> : <span class="id" title="var">Modality</span>) (<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsHProp</span> (<span class="id" title="var">IsExact</span> <span class="id" title="var">n</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rapply</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">A</span> =&gt; <span class="id" title="var">IsHProp</span> <span class="id" title="var">A</span>) (<span class="id" title="var">x</span> := { <span class="id" title="var">cx</span> : <span class="id" title="var">IsComplex</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span> &amp; <span class="id" title="var">IsConnMap</span> <span class="id" title="var">n</span> (<span class="id" title="var">cxfib</span> <span class="id" title="var">cx</span>) })).<br/>
&nbsp;&nbsp;2: <span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_universe_uncurried</span>; <span class="id" title="var">issig</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
With exactness we can choose preimages. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isexact_preimage</span> (<span class="id" title="var">O</span> : <span class="id" title="var">Modality</span>) {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>) `{<span class="id" title="var">IsExact</span> <span class="id" title="var">O</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">x</span> : <span class="id" title="var">X</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">point</span> <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">O</span> (<span class="id" title="var">hfiber</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rapply</span> (<span class="id" title="var">O_functor</span> <span class="id" title="var">O</span> (<span class="id" title="var">A</span>:=<span class="id" title="var">hfiber</span> (<span class="id" title="var">cxfib</span> <span class="id" title="var">cx_isexact</span>) (<span class="id" title="var">x</span>; <span class="id" title="var">p</span>))).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">z</span> <span class="id" title="var">q</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">z</span>; <span class="id" title="var">ap</span> <span class="id" title="var">pr1</span> <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">center</span>, <span class="id" title="var">conn_map_isexact</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Bundled version of the above. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isexact_preimage_hfiber</span> (<span class="id" title="var">O</span> : <span class="id" title="var">Modality</span>) {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>) `{<span class="id" title="var">IsExact</span> <span class="id" title="var">O</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">x</span> : <span class="id" title="var">hfiber</span> <span class="id" title="var">f</span> <span class="id" title="var">pt</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">O</span> (<span class="id" title="var">hfiber</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span>.1).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">srapply</span> <span class="id" title="var">isexact_preimage</span>; <span class="id" title="tactic">exact</span> <span class="id" title="var">x</span>.2.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
If the base is contractible, then <span class="inlinecode"><span class="id" title="var">i</span></span> is <span class="inlinecode"><span class="id" title="var">O</span></span>-connected. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isconnmap_O_isexact_base_contr</span> (<span class="id" title="var">O</span> : <span class="id" title="var">Modality@</span>{<span class="id" title="var">u</span>}) {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;`{<span class="id" title="var">Contr</span> <span class="id" title="var">Y</span>} (<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;`{<span class="id" title="var">IsExact@</span>{<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">u</span> <span class="id" title="var">u</span> <span class="id" title="var">u</span>} <span class="id" title="var">O</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsConnMap</span> <span class="id" title="var">O</span> <span class="id" title="var">i</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">conn_map_compose@</span>{<span class="id" title="var">u</span> <span class="id" title="var">_</span> <span class="id" title="var">u</span> <span class="id" title="var">_</span>} <span class="id" title="var">O</span> (<span class="id" title="var">cxfib@</span>{<span class="id" title="var">u</span> <span class="id" title="var">u</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">cx_isexact</span>) <span class="id" title="var">pr1</span>.<br/>

<br/>
</div>

<div class="doc">
Passage across homotopies preserves exactness. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isexact_homotopic_i</span> <span class="id" title="var">n</span>  {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">i</span> <span class="id" title="var">i'</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>} (<span class="id" title="var">ii</span> : <span class="id" title="var">i'</span> ==* <span class="id" title="var">i</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;`{<span class="id" title="var">IsExact</span> <span class="id" title="var">n</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsExact</span> <span class="id" title="var">n</span> <span class="id" title="var">i'</span> <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">iscomplex_homotopic_i</span> <span class="id" title="var">ii</span> <span class="id" title="var">f</span> <span class="id" title="var">cx_isexact</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">conn_map_homotopic</span> <span class="id" title="var">n</span> (<span class="id" title="var">cxfib</span> <span class="id" title="var">cx_isexact</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">u</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">path_sigma'</span> <span class="id" title="var">_</span> (<span class="id" title="var">ii</span> <span class="id" title="var">u</span>)^ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">transport_paths_Fl</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> @ ((<span class="id" title="var">inverse2</span> (<span class="id" title="var">ap_V</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) @ <span class="id" title="var">inv_V</span> <span class="id" title="var">_</span>) @@ 1)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isexact_homotopic_f</span> <span class="id" title="var">n</span>  {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) {<span class="id" title="var">f</span> <span class="id" title="var">f'</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>} (<span class="id" title="var">ff</span> : <span class="id" title="var">f'</span> ==* <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;`{<span class="id" title="var">IsExact</span> <span class="id" title="var">n</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsExact</span> <span class="id" title="var">n</span> <span class="id" title="var">i</span> <span class="id" title="var">f'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">iscomplex_homotopic_f</span> <span class="id" title="var">i</span> <span class="id" title="var">ff</span> <span class="id" title="var">cx_isexact</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">e</span> := <span class="id" title="var">equiv_hfiber_homotopic</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">ff</span> <span class="id" title="var">pt</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">nrefine</span> (<span class="id" title="var">cancelL_isequiv_conn_map</span> <span class="id" title="var">n</span> <span class="id" title="var">_</span> <span class="id" title="var">e</span>).<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_isequiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">conn_map_homotopic</span> <span class="id" title="var">n</span> (<span class="id" title="var">cxfib</span> (<span class="id" title="var">cx_isexact</span>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">u</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">srapply</span> <span class="id" title="var">path_hfiber</span>.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span> @ <span class="id" title="var">concat_V_pp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
And also passage across squares with equivalences. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isexact_equiv_i</span> <span class="id" title="var">n</span>  {<span class="id" title="var">F</span> <span class="id" title="var">F'</span> <span class="id" title="var">X</span> <span class="id" title="var">X'</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">i'</span> : <span class="id" title="var">F'</span> -&gt;* <span class="id" title="var">X'</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">g</span> : <span class="id" title="var">F'</span> &lt;~&gt;* <span class="id" title="var">F</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">X'</span> &lt;~&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">h</span> <span class="id" title="var">o</span>* <span class="id" title="var">i'</span> ==* <span class="id" title="var">i</span> <span class="id" title="var">o</span>* <span class="id" title="var">g</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>) `{<span class="id" title="var">IsExact</span> <span class="id" title="var">n</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsExact</span> <span class="id" title="var">n</span> <span class="id" title="var">i'</span> (<span class="id" title="var">f</span> <span class="id" title="var">o</span>* <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">iscomplex_equiv_i</span> <span class="id" title="var">i</span> <span class="id" title="var">i'</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span> <span class="id" title="var">p</span> <span class="id" title="var">f</span> <span class="id" title="var">cx_isexact</span>); <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrefine</span> (<span class="id" title="var">cancelL_equiv_conn_map</span> <span class="id" title="var">n</span> (<span class="id" title="var">C</span> := <span class="id" title="var">pfiber</span> <span class="id" title="var">f</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (@<span class="id" title="var">equiv_functor_hfiber</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">f</span> <span class="id" title="var">o</span> <span class="id" title="var">h</span>) <span class="id" title="var">f</span> <span class="id" title="var">h</span> <span class="id" title="var">equiv_idmap</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; 1%<span class="id" title="var">path</span>) (<span class="id" title="var">point</span> <span class="id" title="var">Y</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">functor_hfiber</span>, <span class="id" title="var">functor_sigma</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">conn_map_homotopic</span> <span class="id" title="var">n</span> (@<span class="id" title="var">cxfib</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span> <span class="id" title="var">cx_isexact</span> <span class="id" title="var">o</span> <span class="id" title="var">g</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">u</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">path_sigma'</span> <span class="id" title="var">_</span> (<span class="id" title="var">p</span> <span class="id" title="var">u</span>)^ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">abstract</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">transport_paths_Fl</span>, <span class="id" title="var">ap_V</span>, <span class="id" title="var">inv_V</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!<span class="id" title="var">concat_1p</span>, <span class="id" title="var">concat_p1</span>, <span class="id" title="var">ap_idmap</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
In particular, we can transfer exactness across equivalences of the total space. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_isexact_equiv</span> <span class="id" title="var">n</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">X'</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X'</span> -&gt;* <span class="id" title="var">Y</span>) (<span class="id" title="var">phi</span> : <span class="id" title="var">X</span> &lt;~&gt;* <span class="id" title="var">X'</span>)<br/>
&nbsp;&nbsp;`{<span class="id" title="var">IsExact</span> <span class="id" title="var">n</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">phi</span> <span class="id" title="var">o</span>* <span class="id" title="var">i</span>) <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsExact</span> <span class="id" title="var">n</span> <span class="id" title="var">i</span> (<span class="id" title="var">f</span> <span class="id" title="var">o</span>* <span class="id" title="var">phi</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rapply</span> (<span class="id" title="var">isexact_equiv_i</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pequiv_pmap_idmap</span> <span class="id" title="var">phi</span>); <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">pmap_precompose_idmap</span> <span class="id" title="var">_</span>)^*.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Similarly, we can cancel equivalences on the fiber. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isexact_equiv_fiber</span> <span class="id" title="var">n</span> {<span class="id" title="var">F</span> <span class="id" title="var">F'</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>) (<span class="id" title="var">phi</span> : <span class="id" title="var">F'</span> &lt;~&gt;* <span class="id" title="var">F</span>)<br/>
&nbsp;&nbsp;`{<span class="id" title="var">E</span> : <span class="id" title="var">IsExact</span> <span class="id" title="var">n</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsExact</span> <span class="id" title="var">n</span> (<span class="id" title="var">i</span> <span class="id" title="var">o</span>* <span class="id" title="var">phi</span>) <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Build_IsExact</span>.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> <span class="id" title="var">iscomplex_equiv_fiber</span>, <span class="id" title="var">cx_isexact</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">conn_map_homotopic</span> <span class="id" title="var">_</span> (<span class="id" title="var">cxfib</span> <span class="id" title="var">cx_isexact</span> <span class="id" title="var">o</span>* <span class="id" title="var">phi</span>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_p1</span>, <span class="id" title="var">concat_1p</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
An equivalence of short sequences preserves exactness. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isexact_square_if</span> <span class="id" title="var">n</span>  {<span class="id" title="var">F</span> <span class="id" title="var">F'</span> <span class="id" title="var">X</span> <span class="id" title="var">X'</span> <span class="id" title="var">Y</span> <span class="id" title="var">Y'</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>} {<span class="id" title="var">i'</span> : <span class="id" title="var">F'</span> -&gt;* <span class="id" title="var">X'</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>} {<span class="id" title="var">f'</span> : <span class="id" title="var">X'</span> -&gt;* <span class="id" title="var">Y'</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">g</span> : <span class="id" title="var">F'</span> &lt;~&gt;* <span class="id" title="var">F</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">X'</span> &lt;~&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">k</span> : <span class="id" title="var">Y'</span> &lt;~&gt;* <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">h</span> <span class="id" title="var">o</span>* <span class="id" title="var">i'</span> ==* <span class="id" title="var">i</span> <span class="id" title="var">o</span>* <span class="id" title="var">g</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">k</span> <span class="id" title="var">o</span>* <span class="id" title="var">f'</span> ==* <span class="id" title="var">f</span> <span class="id" title="var">o</span>* <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;`{<span class="id" title="var">IsExact</span> <span class="id" title="var">n</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsExact</span> <span class="id" title="var">n</span> <span class="id" title="var">i'</span> <span class="id" title="var">f'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">I</span> := <span class="id" title="var">isexact_equiv_i</span> <span class="id" title="var">n</span> <span class="id" title="var">i</span> <span class="id" title="var">i'</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span> <span class="id" title="var">p</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">I2</span> := <span class="id" title="var">isexact_homotopic_f</span> <span class="id" title="var">n</span> <span class="id" title="var">i'</span> <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">iscomplex_cancelL</span> <span class="id" title="var">i'</span> <span class="id" title="var">f'</span> <span class="id" title="var">k</span> <span class="id" title="var">cx_isexact</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">epose</span> (<span class="id" title="var">e</span> := (<span class="id" title="var">pequiv_pfiber</span> <span class="id" title="var">pequiv_pmap_idmap</span> <span class="id" title="var">k</span> (<span class="id" title="var">pmap_precompose_idmap</span> (<span class="id" title="var">k</span> <span class="id" title="var">o</span>* <span class="id" title="var">f'</span>))^*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">pfiber</span> <span class="id" title="var">f'</span> &lt;~&gt;* <span class="id" title="var">pfiber</span> (<span class="id" title="var">k</span> <span class="id" title="var">o</span>* <span class="id" title="var">f'</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="var">nrefine</span> (<span class="id" title="var">cancelL_isequiv_conn_map</span> <span class="id" title="var">n</span> <span class="id" title="var">_</span> <span class="id" title="var">e</span>).<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> <span class="id" title="var">pointed_isequiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">conn_map_homotopic</span> <span class="id" title="var">n</span> (<span class="id" title="var">cxfib</span> (<span class="id" title="var">cx_isexact</span>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">u</span>. <span class="id" title="var">srapply</span> <span class="id" title="var">path_hfiber</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">moveR_equiv_V</span>. <span class="id" title="tactic">rewrite</span> !<span class="id" title="var">concat_1p</span>, !<span class="id" title="var">concat_p1</span>, <span class="id" title="var">ap_pp_p</span>, <span class="id" title="var">ap_pp</span>, (<span class="id" title="var">ap_pp</span> <span class="id" title="var">k</span> <span class="id" title="var">_</span> (<span class="id" title="var">eissect</span> <span class="id" title="var">k</span> (<span class="id" title="var">point</span> <span class="id" title="var">Y'</span>))), <span class="id" title="var">ap_V</span>, &lt;- !<span class="id" title="var">eisadj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- !<span class="id" title="var">ap_compose</span>, <span class="id" title="var">concat_pp_p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">concat_A1p</span> (<span class="id" title="var">eisretr</span> <span class="id" title="var">k</span>)), <span class="id" title="var">concat_pV_p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">concat_A1p</span> (<span class="id" title="var">eisretr</span> <span class="id" title="var">k</span>)), <span class="id" title="var">concat_V_pp</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
If a complex <span class="inlinecode"><span class="id" title="var">F</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">E</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">B</span></span> is <span class="inlinecode"><span class="id" title="var">O</span></span>-exact, the map <span class="inlinecode"><span class="id" title="var">F</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">B</span></span> is <span class="inlinecode"><span class="id" title="var">O</span></span>-local, and path types in <span class="inlinecode"><span class="id" title="var">Y</span></span> are <span class="inlinecode"><span class="id" title="var">O</span></span>-local, then the induced map <span class="inlinecode"><span class="id" title="var">cxfib</span></span> is an equivalence. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_cxfib</span> {<span class="id" title="var">O</span> : <span class="id" title="var">Modality</span>} {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>} {<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>}<br/>
&nbsp;&nbsp;`{<span class="id" title="keyword">forall</span> <span class="id" title="var">y</span> <span class="id" title="var">y'</span> : <span class="id" title="var">Y</span>, <span class="id" title="var">In</span> <span class="id" title="var">O</span> (<span class="id" title="var">y</span> = <span class="id" title="var">y'</span>)} `{<span class="id" title="var">MapIn</span> <span class="id" title="var">O</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">i</span>} (<span class="id" title="var">ex</span> : <span class="id" title="var">IsExact</span> <span class="id" title="var">O</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">cxfib</span> <span class="id" title="var">cx_isexact</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rapply</span> <span class="id" title="var">isequiv_conn_ino_map</span>.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> <span class="id" title="var">ex</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rapply</span> (<span class="id" title="var">cancelL_mapinO</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pr1</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_cxfib</span> {<span class="id" title="var">O</span> : <span class="id" title="var">Modality</span>} {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>} {<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>}<br/>
&nbsp;&nbsp;`{<span class="id" title="keyword">forall</span> <span class="id" title="var">y</span> <span class="id" title="var">y'</span> : <span class="id" title="var">Y</span>, <span class="id" title="var">In</span> <span class="id" title="var">O</span> (<span class="id" title="var">y</span> = <span class="id" title="var">y'</span>)} `{<span class="id" title="var">MapIn</span> <span class="id" title="var">O</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">i</span>} (<span class="id" title="var">ex</span> : <span class="id" title="var">IsExact</span> <span class="id" title="var">O</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">F</span> &lt;~&gt;* <span class="id" title="var">pfiber</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">Build_pEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">isequiv_cxfib</span> <span class="id" title="var">ex</span>).<br/>

<br/>
<span class="id" title="keyword">Proposition</span> <span class="id" title="var">equiv_cxfib_beta</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>} {<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>}<br/>
&nbsp;&nbsp;`{<span class="id" title="keyword">forall</span> <span class="id" title="var">y</span> <span class="id" title="var">y'</span> : <span class="id" title="var">Y</span>, <span class="id" title="var">In</span> <span class="id" title="var">O</span> (<span class="id" title="var">y</span> = <span class="id" title="var">y'</span>)} `{<span class="id" title="var">MapIn</span> <span class="id" title="var">O</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">i</span>} (<span class="id" title="var">ex</span> : <span class="id" title="var">IsExact</span> <span class="id" title="var">O</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">i</span> <span class="id" title="var">o</span> <span class="id" title="var">pequiv_inverse</span> (<span class="id" title="var">equiv_cxfib</span> <span class="id" title="var">ex</span>) == <span class="id" title="var">pfib</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rapply</span> <span class="id" title="var">equiv_ind</span>.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">exact</span> (<span class="id" title="var">isequiv_cxfib</span> <span class="id" title="var">ex</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">g</span> =&gt; <span class="id" title="var">i</span> <span class="id" title="var">g</span>) (<span class="id" title="var">eissect</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
A purely exact sequence is <span class="inlinecode"><span class="id" title="var">O</span></span>-exact for any modality <span class="inlinecode"><span class="id" title="var">O</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isexact_purely_O</span> {<span class="id" title="var">O</span> : <span class="id" title="var">Modality</span>} {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>) `{<span class="id" title="var">IsExact</span> <span class="id" title="var">purely</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsExact</span> <span class="id" title="var">O</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">srapply</span> <span class="id" title="var">Build_IsExact</span>.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> <span class="id" title="var">cx_isexact</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
When <span class="inlinecode"><span class="id" title="var">n</span></span> is the identity modality <span class="inlinecode"><span class="id" title="var">purely</span></span>, so that <span class="inlinecode"><span class="id" title="var">cxfib</span></span> is an equivalence, we get simply a fiber sequence.  In particular, the fiber of a given map yields an purely-exact sequence. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">iscomplex_pfib</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsComplex</span> (<span class="id" title="var">pfib</span> <span class="id" title="var">f</span>) <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">srapply</span> <span class="id" title="var">Build_pHomotopy</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">x</span> <span class="id" title="var">p</span>]; <span class="id" title="tactic">exact</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span> @ <span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isexact_pfib</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsExact</span> <span class="id" title="var">purely</span> (<span class="id" title="var">pfib</span> <span class="id" title="var">f</span>) <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">iscomplex_pfib</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Fiber sequences can alternatively be defined as an equivalence to the fiber of some map. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">FiberSeq</span> (<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>) := { <span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span> &amp; <span class="id" title="var">F</span> &lt;~&gt;* <span class="id" title="var">pfiber</span> <span class="id" title="var">f</span> }.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">i_fiberseq</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>} (<span class="id" title="var">fs</span> : <span class="id" title="var">FiberSeq</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">pfib</span> <span class="id" title="var">fs</span>.1 <span class="id" title="var">o</span>* <span class="id" title="var">fs</span>.2.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isexact_purely_fiberseq</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>} (<span class="id" title="var">fs</span> : <span class="id" title="var">FiberSeq</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsExact</span> <span class="id" title="var">purely</span> (<span class="id" title="var">i_fiberseq</span> <span class="id" title="var">fs</span>) <span class="id" title="var">fs</span>.1.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">srapply</span> <span class="id" title="var">Build_IsExact</span>; [ <span class="id" title="var">srapply</span> <span class="id" title="var">Build_pHomotopy</span> | ].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">u</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> ((<span class="id" title="var">fs</span>.2 <span class="id" title="var">u</span>).2).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">moveL_pV</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span> @ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveL_Mp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @ (<span class="id" title="var">point_eq</span> <span class="id" title="var">fs</span>.2)..2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @ (<span class="id" title="var">transport_paths_Fl</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">whiskerR</span>, <span class="id" title="var">inverse2</span>, <span class="id" title="var">ap</span>, <span class="id" title="var">concat_p1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">x</span> <span class="id" title="var">p</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">contr_map_isequiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">IsEquiv</span> <span class="id" title="var">fs</span>.2); <span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pequiv_cxfib</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>} {<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>}<br/>
&nbsp;&nbsp;`{<span class="id" title="var">IsExact</span> <span class="id" title="var">purely</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">F</span> &lt;~&gt;* <span class="id" title="var">pfiber</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">Build_pEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">cxfib</span> <span class="id" title="var">cx_isexact</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">fiberseq_isexact_purely</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>} (<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;`{<span class="id" title="var">IsExact</span> <span class="id" title="var">purely</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>} : <span class="id" title="var">FiberSeq</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span><br/>
&nbsp;&nbsp;:= (<span class="id" title="var">f</span>; <span class="id" title="var">pequiv_cxfib</span>).<br/>

<br/>
</div>

<div class="doc">
It's easier to show that <span class="inlinecode"><span class="id" title="var">loops</span></span> preserves fiber sequences than that it preserves purely-exact sequences. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">fiberseq_loops</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>} (<span class="id" title="var">fs</span> : <span class="id" title="var">FiberSeq</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">FiberSeq</span> (<span class="id" title="var">loops</span> <span class="id" title="var">F</span>) (<span class="id" title="var">loops</span> <span class="id" title="var">X</span>) (<span class="id" title="var">loops</span> <span class="id" title="var">Y</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
</div>

<div class="doc">
TODO: doesn't work?! 
</div>
<div class="code">
<span class="comment">(*&nbsp;&nbsp;&nbsp;exists&nbsp;(fmap&nbsp;loops&nbsp;fs.1).&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">fmap</span> <span class="id" title="var">loops</span> <span class="id" title="var">fs</span>.1; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> <span class="id" title="var">o</span>*<span class="id" title="var">E</span> <span class="id" title="var">emap</span> <span class="id" title="var">loops</span> <span class="id" title="var">fs</span>.2).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">pfiber_fmap_loops</span> <span class="id" title="var">fs</span>.1)^-1*.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Now we can deduce that <span class="inlinecode"><span class="id" title="var">loops</span></span> preserves purely-exact sequences. The hardest part is modifying the first map back to <span class="inlinecode"><span class="id" title="var">fmap</span></span> <span class="inlinecode"><span class="id" title="var">loops</span></span> <span class="inlinecode"><span class="id" title="var">i</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isexact_loops</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>} (<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;`{<span class="id" title="var">IsExact</span> <span class="id" title="var">purely</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsExact</span> <span class="id" title="var">purely</span> (<span class="id" title="var">fmap</span> <span class="id" title="var">loops</span> <span class="id" title="var">i</span>) (<span class="id" title="var">fmap</span> <span class="id" title="var">loops</span> <span class="id" title="var">f</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (@<span class="id" title="var">isexact_homotopic_i</span> <span class="id" title="var">purely</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">fmap</span> <span class="id" title="var">loops</span> <span class="id" title="var">i</span>) <span class="id" title="var">_</span> (<span class="id" title="var">fmap</span> <span class="id" title="var">loops</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">isexact_purely_fiberseq</span> (<span class="id" title="var">fiberseq_loops</span> (<span class="id" title="var">fiberseq_isexact_purely</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>)))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">fmap</span> <span class="id" title="var">loops</span> (<span class="id" title="var">pfib</span> <span class="id" title="var">f</span>) <span class="id" title="var">o</span>* <span class="id" title="var">fmap</span> <span class="id" title="var">loops</span> (<span class="id" title="var">cxfib</span> <span class="id" title="var">cx_isexact</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @* <span class="id" title="var">fmap_comp</span> <span class="id" title="var">loops</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rapply</span> (<span class="id" title="var">fmap2</span> <span class="id" title="var">loops</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">pfib_cxfib</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @* <span class="id" title="var">pmap_compose_assoc</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">pmap_prewhisker</span> (<span class="id" title="var">fmap</span> <span class="id" title="var">loops</span> (<span class="id" title="var">cxfib</span> <span class="id" title="var">cx_isexact</span>)) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_pequiv_fV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">pr1_pfiber_fmap_loops</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isexact_iterated_loops</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>) `{<span class="id" title="var">IsExact</span> <span class="id" title="var">purely</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>} (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsExact</span> <span class="id" title="var">purely</span> (<span class="id" title="var">fmap</span> (<span class="id" title="var">iterated_loops</span> <span class="id" title="var">n</span>) <span class="id" title="var">i</span>) (<span class="id" title="var">fmap</span> (<span class="id" title="var">iterated_loops</span> <span class="id" title="var">n</span>) <span class="id" title="var">f</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">n</span> <span class="id" title="var">IHn</span>]; [ <span class="id" title="tactic">assumption</span> | <span class="id" title="tactic">apply</span> <span class="id" title="var">isexact_loops</span>; <span class="id" title="tactic">assumption</span> ].<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
(n.+1)-truncation preserves n-exactness. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isexact_ptr</span> `{<span class="id" title="var">Univalence</span>} (<span class="id" title="var">n</span> : <span class="id" title="var">trunc_index</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>} (<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;`{<span class="id" title="var">IsExact</span> (<span class="id" title="var">Tr</span> <span class="id" title="var">n</span>) <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsExact</span> (<span class="id" title="var">Tr</span> <span class="id" title="var">n</span>) (<span class="id" title="var">fmap</span> (<span class="id" title="var">pTr</span> <span class="id" title="var">n</span>.+1) <span class="id" title="var">i</span>) (<span class="id" title="var">fmap</span> (<span class="id" title="var">pTr</span> <span class="id" title="var">n</span>.+1) <span class="id" title="var">f</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">iscomplex_ptr</span> <span class="id" title="var">n</span>.+1 <span class="id" title="var">i</span> <span class="id" title="var">f</span> <span class="id" title="var">cx_isexact</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">srefine</span> (<span class="id" title="var">cancelR_conn_map</span> (<span class="id" title="var">Tr</span> <span class="id" title="var">n</span>) (@<span class="id" title="var">tr</span> <span class="id" title="var">n</span>.+1 <span class="id" title="var">F</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id" title="var">cxfib</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">fmap</span> (<span class="id" title="var">pTr</span> <span class="id" title="var">n</span>.+1) <span class="id" title="var">i</span>) (<span class="id" title="var">fmap</span> (<span class="id" title="var">pTr</span> <span class="id" title="var">n</span>.+1) <span class="id" title="var">f</span>) <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>; <span class="id" title="var">rapply</span> <span class="id" title="var">isconnected_pred</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">nrapply</span> <span class="id" title="var">conn_map_homotopic</span>.<br/>
&nbsp;&nbsp;2:<span class="id" title="var">nrapply</span> (<span class="id" title="var">conn_map_compose</span> <span class="id" title="var">_</span> (<span class="id" title="var">cxfib</span> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">functor_hfiber</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; (<span class="id" title="var">to_O_natural</span> (<span class="id" title="var">Tr</span> <span class="id" title="var">n</span>.+1) <span class="id" title="var">f</span> <span class="id" title="var">y</span>)^)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">point</span> <span class="id" title="var">Y</span>))).<br/>
&nbsp;&nbsp;3:<span class="id" title="tactic">pose</span> @<span class="id" title="var">O_lex_leq_Tr</span>; <span class="id" title="var">rapply</span> (<span class="id" title="var">OO_conn_map_functor_hfiber_to_O</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">refine</span> (<span class="id" title="var">path_sigma'</span> <span class="id" title="var">_</span> 1 <span class="id" title="var">_</span>); <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;is&nbsp;even&nbsp;simpler&nbsp;than&nbsp;it&nbsp;looks,&nbsp;because&nbsp;for&nbsp;truncations&nbsp;<span class="inlinecode"><span class="id" title="var">to_O_natural</span></span> <span class="inlinecode"><span class="id" title="var">n</span>.+1</span> <span class="inlinecode">:=</span> <span class="inlinecode">1</span>,&nbsp;<span class="inlinecode"><span class="id" title="var">to</span></span> <span class="inlinecode"><span class="id" title="var">n</span>.+1</span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">tr</span></span>,&nbsp;and&nbsp;<span class="inlinecode"><span class="id" title="var">cx_const</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">H</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (1 @@ (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)^).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
In particular, (n.+1)-truncation takes fiber sequences to n-exact ones. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isexact_ptr_purely</span> `{<span class="id" title="var">Univalence</span>} (<span class="id" title="var">n</span> : <span class="id" title="var">trunc_index</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>} (<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>) `{<span class="id" title="var">IsExact</span> <span class="id" title="var">purely</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsExact</span> (<span class="id" title="var">Tr</span> <span class="id" title="var">n</span>) (<span class="id" title="var">fmap</span> (<span class="id" title="var">pTr</span> <span class="id" title="var">n</span>.+1) <span class="id" title="var">i</span>) (<span class="id" title="var">fmap</span> (<span class="id" title="var">pTr</span> <span class="id" title="var">n</span>.+1) <span class="id" title="var">f</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rapply</span> <span class="id" title="var">isexact_ptr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">cx_isexact</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">z</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">isconnected_contr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">conn_map_isexact</span> (<span class="id" title="var">f</span> := <span class="id" title="var">f</span>) (<span class="id" title="var">i</span> := <span class="id" title="var">i</span>) <span class="id" title="var">z</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1121"></a><h2 class="section">Connecting maps</h2>

<div class="paragraph"> </div>

 It's useful to see <span class="inlinecode"><span class="id" title="var">pfib_cxfib</span></span> as a degenerate square. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">square_pfib_pequiv_cxfib</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>) `{<span class="id" title="var">IsExact</span> <span class="id" title="var">purely</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">pequiv_pmap_idmap</span> <span class="id" title="var">o</span>* <span class="id" title="var">i</span> ==* <span class="id" title="var">pfib</span> <span class="id" title="var">f</span> <span class="id" title="var">o</span>* <span class="id" title="var">pequiv_cxfib</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Square</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">pmap_postcompose_idmap</span> <span class="id" title="var">_</span> @* <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">pfib_cxfib</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The connecting maps for the long exact sequence of loop spaces, defined as an extension to a fiber sequence. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">connect_fiberseq</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>) `{<span class="id" title="var">IsExact</span> <span class="id" title="var">purely</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">FiberSeq</span> (<span class="id" title="var">loops</span> <span class="id" title="var">Y</span>) <span class="id" title="var">F</span> <span class="id" title="var">X</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (((<span class="id" title="var">pfiber2_loops</span> <span class="id" title="var">f</span>) <span class="id" title="var">o</span>*<span class="id" title="var">E</span> (<span class="id" title="var">pequiv_pfiber</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">square_pfib_pequiv_cxfib</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>)))^-1*).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">connecting_map</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>) `{<span class="id" title="var">IsExact</span> <span class="id" title="var">purely</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">loops</span> <span class="id" title="var">Y</span> -&gt;* <span class="id" title="var">F</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">i_fiberseq</span> (<span class="id" title="var">connect_fiberseq</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isexact_connect_R</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>) `{<span class="id" title="var">IsExact</span> <span class="id" title="var">purely</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsExact</span> <span class="id" title="var">purely</span> (<span class="id" title="var">fmap</span> <span class="id" title="var">loops</span> <span class="id" title="var">f</span>) (<span class="id" title="var">connecting_map</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">isexact_equiv_i</span> (<span class="id" title="var">Y</span> := <span class="id" title="var">F</span>) <span class="id" title="var">purely</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pfib</span> (<span class="id" title="var">pfib</span> <span class="id" title="var">i</span>)) (<span class="id" title="var">fmap</span> <span class="id" title="var">loops</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(((<span class="id" title="var">loops_inv</span> <span class="id" title="var">X</span>) <span class="id" title="var">o</span>*<span class="id" title="var">E</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pfiber2_loops</span> (<span class="id" title="var">pfib</span> <span class="id" title="var">f</span>)) <span class="id" title="var">o</span>*<span class="id" title="var">E</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pequiv_pfiber</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">square_pequiv_pfiber</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">square_pfib_pequiv_cxfib</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>))))^-1*)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(((<span class="id" title="var">pfiber2_loops</span> <span class="id" title="var">f</span>) <span class="id" title="var">o</span>*<span class="id" title="var">E</span> (<span class="id" title="var">pequiv_pfiber</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">square_pfib_pequiv_cxfib</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>)))^-1*)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> (<span class="id" title="var">pfib</span> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">vinverse</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="var">loops_inv</span> <span class="id" title="var">X</span>) <span class="id" title="var">o</span>*<span class="id" title="var">E</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pfiber2_loops</span> (<span class="id" title="var">pfib</span> <span class="id" title="var">f</span>)) <span class="id" title="var">o</span>*<span class="id" title="var">E</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pequiv_pfiber</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">square_pequiv_pfiber</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">square_pfib_pequiv_cxfib</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="var">pfiber2_loops</span> <span class="id" title="var">f</span>) <span class="id" title="var">o</span>*<span class="id" title="var">E</span> (<span class="id" title="var">pequiv_pfiber</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">square_pfib_pequiv_cxfib</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>))) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">vconcat</span> (<span class="id" title="var">f03</span> := <span class="id" title="var">loops_inv</span> <span class="id" title="var">X</span> <span class="id" title="var">o</span>* <span class="id" title="var">pfiber2_loops</span> (<span class="id" title="var">pfib</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f01</span> := <span class="id" title="var">pequiv_pfiber</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">square_pequiv_pfiber</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">square_pfib_pequiv_cxfib</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f23</span> := <span class="id" title="var">pfiber2_loops</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f21</span> := <span class="id" title="var">pequiv_pfiber</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">square_pfib_pequiv_cxfib</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">square_pequiv_pfiber</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">square_pequiv_pfiber</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">square_pfib_pequiv_cxfib</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>))).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">pfiber2_fmap_loops</span> <span class="id" title="var">f</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The connecting map associated to a pointed family. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">connecting_map_family</span> {<span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">pFam</span> <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">loops</span> <span class="id" title="var">Y</span> -&gt;* [<span class="id" title="var">P</span> <span class="id" title="var">pt</span>, <span class="id" title="var">dpoint</span> <span class="id" title="var">P</span>].<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">srapply</span> <span class="id" title="var">Build_pMap</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1122"></a><h2 class="section">Long exact sequences</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Record</span> <span class="id" title="var">LongExactSequence</span> (<span class="id" title="var">k</span> : <span class="id" title="var">Modality</span>) (<span class="id" title="var">N</span> : <span class="id" title="var">SuccStr</span>) : <span class="id" title="keyword">Type</span> :=<br/>
{<br/>
&nbsp;&nbsp;<span class="id" title="var">les_carrier</span> : <span class="id" title="var">N</span> -&gt; <span class="id" title="var">pType</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">les_fn</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, <span class="id" title="var">les_carrier</span> <span class="id" title="var">n</span>.+1 -&gt;* <span class="id" title="var">les_carrier</span> <span class="id" title="var">n</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">les_isexact</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, <span class="id" title="var">IsExact</span> <span class="id" title="var">k</span> (<span class="id" title="var">les_fn</span> <span class="id" title="var">n</span>.+1) (<span class="id" title="var">les_fn</span> <span class="id" title="var">n</span>)<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">les_carrier</span> : <span class="id" title="var">LongExactSequence</span> &gt;-&gt; <span class="id" title="var">Funclass</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">les_fn</span> {<span class="id" title="var">k</span> <span class="id" title="var">N</span>} <span class="id" title="var">S</span> <span class="id" title="var">n</span> : <span class="id" title="tactic">rename</span>.<br/>
<span class="id" title="keyword">Global Existing Instance</span> <span class="id" title="var">les_isexact</span>.<br/>

<br/>
</div>

<div class="doc">
Long exact sequences are preserved by truncation. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trunc_les</span> `{<span class="id" title="var">Univalence</span>} (<span class="id" title="var">k</span> : <span class="id" title="var">trunc_index</span>) {<span class="id" title="var">N</span> : <span class="id" title="var">SuccStr</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">S</span> : <span class="id" title="var">LongExactSequence</span> <span class="id" title="var">purely</span> <span class="id" title="var">N</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">LongExactSequence</span> (<span class="id" title="var">Tr</span> <span class="id" title="var">k</span>) <span class="id" title="var">N</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">Build_LongExactSequence</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Tr</span> <span class="id" title="var">k</span>) <span class="id" title="var">N</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> =&gt; <span class="id" title="var">pTr</span> <span class="id" title="var">k</span>.+1 (<span class="id" title="var">S</span> <span class="id" title="var">n</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> =&gt; <span class="id" title="var">fmap</span> (<span class="id" title="var">pTr</span> <span class="id" title="var">k</span>.+1) (<span class="id" title="var">les_fn</span> <span class="id" title="var">S</span> <span class="id" title="var">n</span>)) <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1123"></a><h2 class="section">LES of loop spaces and homotopy groups</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">loops_carrier</span> (<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>) (<span class="id" title="var">n</span> : <span class="id" title="var">N3</span>) : <span class="id" title="var">pType</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| (<span class="id" title="var">n</span>, <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> <span class="id" title="var">x</span>))) =&gt; <span class="id" title="var">Empty_ind</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;| (<span class="id" title="var">n</span>, <span class="id" title="var">inl</span> (<span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">tt</span>))) =&gt; <span class="id" title="var">iterated_loops</span> <span class="id" title="var">n</span> <span class="id" title="var">Y</span><br/>
&nbsp;&nbsp;| (<span class="id" title="var">n</span>, <span class="id" title="var">inl</span> (<span class="id" title="var">inr</span> <span class="id" title="var">tt</span>)) =&gt; <span class="id" title="var">iterated_loops</span> <span class="id" title="var">n</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;| (<span class="id" title="var">n</span>, <span class="id" title="var">inr</span> <span class="id" title="var">tt</span>) =&gt; <span class="id" title="var">iterated_loops</span> <span class="id" title="var">n</span> <span class="id" title="var">F</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Starting from a fiber sequence, we can obtain a long purely-exact sequence of loop spaces. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">loops_les</span> {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>) `{<span class="id" title="var">IsExact</span> <span class="id" title="var">purely</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">LongExactSequence</span> <span class="id" title="var">purely</span> (<span class="id" title="var">N3</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">srefine</span> (<span class="id" title="var">Build_LongExactSequence</span> <span class="id" title="var">purely</span> (<span class="id" title="var">N3</span>) (<span class="id" title="var">loops_carrier</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">intros</span> [<span class="id" title="var">n</span> [[[[]|[]]|[]]|[]]]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">exact</span> (<span class="id" title="var">fmap</span> (<span class="id" title="var">iterated_loops</span> <span class="id" title="var">n</span>) <span class="id" title="var">f</span>). }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">exact</span> (<span class="id" title="var">fmap</span> (<span class="id" title="var">iterated_loops</span> <span class="id" title="var">n</span>) <span class="id" title="var">i</span>). }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">exact</span> (<span class="id" title="var">connecting_map</span> (<span class="id" title="var">fmap</span> (<span class="id" title="var">iterated_loops</span> <span class="id" title="var">n</span>) <span class="id" title="var">i</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">fmap</span> (<span class="id" title="var">iterated_loops</span> <span class="id" title="var">n</span>) <span class="id" title="var">f</span>)). }<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
And from that, a long exact sequence of homotopy groups (though for now it is just a sequence of pointed sets). 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Pi_les</span> `{<span class="id" title="var">Univalence</span>} {<span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">pType</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">F</span> -&gt;* <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt;* <span class="id" title="var">Y</span>) `{<span class="id" title="var">IsExact</span> <span class="id" title="var">purely</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">LongExactSequence</span> (<span class="id" title="var">Tr</span> (-1)) (<span class="id" title="var">N3</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">trunc_les</span> (-1) (<span class="id" title="var">loops_les</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab1124"></a><h1 class="section">Classifying fiber sequences</h1>

<div class="paragraph"> </div>

 Fiber sequences correspond to pointed maps into the universe. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">classify_fiberseq</span> `{<span class="id" title="var">Univalence</span>} {<span class="id" title="var">Y</span> <span class="id" title="var">F</span> : <span class="id" title="var">pType@</span>{<span class="id" title="var">u</span>}}<br/>
&nbsp;&nbsp;: (<span class="id" title="var">Y</span> -&gt;* [<span class="id" title="var">Type@</span>{<span class="id" title="var">u</span>}, <span class="id" title="var">F</span>]) &lt;~&gt; { <span class="id" title="var">X</span> : <span class="id" title="var">pType@</span>{<span class="id" title="var">u</span>} &amp; <span class="id" title="var">FiberSeq</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> }.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> <span class="id" title="var">oE</span> <span class="id" title="var">_</span>).<br/>
</div>

<div class="doc">
To apply <span class="inlinecode"><span class="id" title="var">equiv_sigma_pfibration</span></span> we need to invert the equivalence on the fiber. 
</div>
<div class="code">
&nbsp;&nbsp;{ <span class="id" title="tactic">do</span> 2 (<span class="id" title="var">rapply</span> <span class="id" title="var">equiv_functor_sigma_id</span>; <span class="id" title="tactic">intro</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_pequiv_inverse</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> ((<span class="id" title="var">equiv_sigma_assoc</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^-1 <span class="id" title="var">oE</span> <span class="id" title="var">equiv_sigma_pfibration</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>