<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Circle</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Circle</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Basics</span> <span class="id" title="keyword">Types</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Pointed.Core</span> <span class="id" title="var">Pointed.Loops</span> <span class="id" title="var">Pointed.pEquiv</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">HSet</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Spaces.Int</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Colimits.Coeq</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Truncations.Core</span> <span class="id" title="var">Truncations.Connectedness</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1342"></a><h1 class="section">Theorems about the <span class="inlinecode"><span class="id" title="var">Circle</span></span>.</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">pointed_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">path_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Generalizable Variables</span> <span class="id" title="var">X</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">n</span>.<br/>

<br/>
<span class="comment">(*&nbsp;**&nbsp;Definition&nbsp;of&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">Circle</span></span>.&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
We define the circle as the coequalizer of two copies of the identity map of <span class="inlinecode"><span class="id" title="var">Unit</span></span>.  This is easily equivalent to the naive definition

<div class="paragraph"> </div>

<pre>
Private Inductive Circle : Type0 :=
| base : Circle
| loop : base = base.
</pre>

<div class="paragraph"> </div>

but it allows us to apply the flattening lemma directly rather than having to pass across that equivalence.  
<div class="paragraph"> </div>

 The circle is defined to be the coequalizer of two copies of the identity map on <span class="inlinecode"><span class="id" title="var">Unit</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Circle</span> := @<span class="id" title="var">Coeq</span> <span class="id" title="var">Unit</span> <span class="id" title="var">Unit</span> <span class="id" title="var">idmap</span> <span class="id" title="var">idmap</span>.<br/>

<br/>
</div>

<div class="doc">
It has a basepoint. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">base</span> : <span class="id" title="var">Circle</span> := <span class="id" title="var">coeq</span> <span class="id" title="var">tt</span>.<br/>

<br/>
</div>

<div class="doc">
And a non-trivial path. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">loop</span> : <span class="id" title="var">base</span> = <span class="id" title="var">base</span> := <span class="id" title="var">cglue</span> <span class="id" title="var">tt</span>.<br/>

<br/>
</div>

<div class="doc">
Here is a notation for the circle that can be imported. 
</div>
<div class="code">
<span class="id" title="keyword">Module</span> <span class="id" title="var">CircleNotation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <span class="id" title="var">S1</span> := <span class="id" title="var">Circle</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">CircleNotation</span>.<br/>

<br/>
</div>

<div class="doc">
Circle induction 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Circle_ind</span> (<span class="id" title="var">P</span> : <span class="id" title="var">Circle</span> -&gt; <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">b</span> : <span class="id" title="var">P</span> <span class="id" title="var">base</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">loop</span> # <span class="id" title="var">b</span> = <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span> : <span class="id" title="var">Circle</span>), <span class="id" title="var">P</span> <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">Coeq_ind</span> <span class="id" title="var">P</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">u</span> =&gt; <span class="id" title="var">transport</span> <span class="id" title="var">P</span> (<span class="id" title="var">ap</span> <span class="id" title="var">coeq</span> (<span class="id" title="var">path_unit</span> <span class="id" title="var">tt</span> <span class="id" title="var">u</span>)) <span class="id" title="var">b</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> []; <span class="id" title="tactic">exact</span> <span class="id" title="var">l</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Computation rule for circle induction. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Circle_ind_beta_loop</span> (<span class="id" title="var">P</span> : <span class="id" title="var">Circle</span> -&gt; <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">b</span> : <span class="id" title="var">P</span> <span class="id" title="var">base</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">loop</span> # <span class="id" title="var">b</span> = <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">apD</span> (<span class="id" title="var">Circle_ind</span> <span class="id" title="var">P</span> <span class="id" title="var">b</span> <span class="id" title="var">l</span>) <span class="id" title="var">loop</span> = <span class="id" title="var">l</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">Coeq_ind_beta_cglue</span> <span class="id" title="var">P</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">tt</span>.<br/>

<br/>
</div>

<div class="doc">
We mark <span class="inlinecode"><span class="id" title="var">Circle</span></span>, <span class="inlinecode"><span class="id" title="var">base</span></span> and <span class="inlinecode"><span class="id" title="var">loop</span></span> to never be simplified by <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> or <span class="inlinecode"><span class="id" title="var">cbn</span></span> in order to hide how we defined it from the user. 
</div>
<div class="code">
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">Circle</span> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">never</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">base</span> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">never</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">loop</span> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">never</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">Circle_ind_beta_loop</span> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">never</span>.<br/>

<br/>
</div>

<div class="doc">
The recursion princple or non-dependent eliminator. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Circle_rec</span> (<span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">P</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">b</span> = <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">Circle</span> -&gt; <span class="id" title="var">P</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">Circle_ind</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">P</span>) <span class="id" title="var">b</span> (<span class="id" title="var">transport_const</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> @ <span class="id" title="var">l</span>).<br/>

<br/>
</div>

<div class="doc">
Computation rule for non-dependent eliminator. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Circle_rec_beta_loop</span> (<span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">P</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">b</span> = <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap</span> (<span class="id" title="var">Circle_rec</span> <span class="id" title="var">P</span> <span class="id" title="var">b</span> <span class="id" title="var">l</span>) <span class="id" title="var">loop</span> = <span class="id" title="var">l</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Circle_rec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">cancelL</span> (<span class="id" title="var">transport_const</span> <span class="id" title="var">loop</span> <span class="id" title="var">b</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">apD_const</span> (<span class="id" title="var">Circle_ind</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">P</span>) <span class="id" title="var">b</span> <span class="id" title="var">_</span>) <span class="id" title="var">loop</span>)^ @ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">Circle_ind_beta_loop</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">P</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The <span class="inlinecode"><span class="id" title="var">Circle</span></span> is pointed by <span class="inlinecode"><span class="id" title="var">base</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">ispointed_Circle</span> : <span class="id" title="var">IsPointed</span> <span class="id" title="var">Circle</span> := <span class="id" title="var">base</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pCircle</span> : <span class="id" title="var">pType</span> := [<span class="id" title="var">Circle</span>, <span class="id" title="var">base</span>].<br/>

<br/>
</div>

<div class="doc">
<a id="lab1343"></a><h2 class="section">The loop space of the <span class="inlinecode"><span class="id" title="var">Circle</span></span> is the Integers <span class="inlinecode"><span class="id" title="var">Int</span></span></h2>


<div class="paragraph"> </div>

  This is the encode-decode style proof a la Licata-Shulman. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">EncodeDecode</span>.<br/>
</div>

<div class="doc">
We assume univalence throughout this section. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">Univalence</span>}.<br/>

<br/>
</div>

<div class="doc">
First we define the type of codes, this is a type family over the circle. This can be thought of as the covering space by the homotopical real numbers. It is defined by mapping loop to the path given by univalence applied to the automorphism of the integers. We will show that the section of this family at <span class="inlinecode"><span class="id" title="var">base</span></span> is equivalent to the loop space of the circle. Giving us an equivalence <span class="inlinecode"><span class="id" title="var">base</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">base</span></span> <span class="inlinecode">&lt;~&gt;</span> <span class="inlinecode"><span class="id" title="var">Int</span></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Circle_code</span> : <span class="id" title="var">Circle</span> -&gt; <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">Circle_rec</span> <span class="id" title="keyword">Type</span> <span class="id" title="var">Int</span> (<span class="id" title="var">path_universe</span> <span class="id" title="var">int_succ</span>).<br/>

<br/>
</div>

<div class="doc">
Transporting along <span class="inlinecode"><span class="id" title="var">loop</span></span> gives us the successor automorphism on <span class="inlinecode"><span class="id" title="var">Int</span></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_Circle_code_loop</span> (<span class="id" title="var">z</span> : <span class="id" title="var">Int</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">transport</span> <span class="id" title="var">Circle_code</span> <span class="id" title="var">loop</span> <span class="id" title="var">z</span> = <span class="id" title="var">int_succ</span> <span class="id" title="var">z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">transport_compose</span> <span class="id" title="var">idmap</span> <span class="id" title="var">Circle_code</span> <span class="id" title="var">loop</span> <span class="id" title="var">z</span> @ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Circle_code</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Circle_rec_beta_loop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">transport_path_universe</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Transporting along <span class="inlinecode"><span class="id" title="var">loop</span>^</span> gives us the predecessor on <span class="inlinecode"><span class="id" title="var">Int</span></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_Circle_code_loopV</span> (<span class="id" title="var">z</span> : <span class="id" title="var">Int</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">transport</span> <span class="id" title="var">Circle_code</span> <span class="id" title="var">loop</span>^ <span class="id" title="var">z</span> = <span class="id" title="var">int_pred</span> <span class="id" title="var">z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">transport_compose</span> <span class="id" title="var">idmap</span> <span class="id" title="var">Circle_code</span> <span class="id" title="var">loop</span>^ <span class="id" title="var">z</span> @ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">ap_V</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Circle_code</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Circle_rec_beta_loop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">path_universe_V</span> <span class="id" title="var">int_succ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">transport_path_universe</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
To turn a path in <span class="inlinecode"><span class="id" title="var">Circle</span></span> based at <span class="inlinecode"><span class="id" title="var">base</span></span> into a code we transport along it. We call this encoding. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Circle_encode</span> (<span class="id" title="var">x</span>:<span class="id" title="var">Circle</span>) : (<span class="id" title="var">base</span> = <span class="id" title="var">x</span>) -&gt; <span class="id" title="var">Circle_code</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> =&gt; <span class="id" title="var">p</span> # <span class="id" title="var">zero</span>.<br/>

<br/>
</div>

<div class="doc">
TODO: explain this proof in more detail.  Turning a code into a path based at <span class="inlinecode"><span class="id" title="var">base</span></span>. We call this decoding. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Circle_decode</span> (<span class="id" title="var">x</span> : <span class="id" title="var">Circle</span>) : <span class="id" title="var">Circle_code</span> <span class="id" title="var">x</span> -&gt; (<span class="id" title="var">base</span> = <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">refine</span> (<span class="id" title="var">Circle_ind</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">Circle_code</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">base</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">loopexp</span> <span class="id" title="var">loop</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_forall</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">z</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">transport_arrow</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> @ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">transport_paths_r</span> <span class="id" title="var">loop</span> <span class="id" title="var">_</span> @ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">transport_Circle_code_loopV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">loopexp_pred_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">concat_pV_p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The non-trivial part of the proof that decode and encode are equivalences is showing that decoding followed by encoding is the identity on the fibers over <span class="inlinecode"><span class="id" title="var">base</span></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Circle_encode_loopexp</span> (<span class="id" title="var">z</span> : <span class="id" title="var">Int</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">Circle_encode</span> <span class="id" title="var">base</span> (<span class="id" title="var">loopexp</span> <span class="id" title="var">loop</span> <span class="id" title="var">z</span>) = <span class="id" title="var">z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">z</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">n</span> | <span class="id" title="var">n</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">loopexp_succ_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Circle_encode</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHz</span> |- *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">transport_pp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHz</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">transport_Circle_code_loop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">loopexp_pred_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Circle_encode</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHz</span> |- *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">transport_pp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHz</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">transport_Circle_code_loopV</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Now we put it together. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Circle_encode_isequiv</span> (<span class="id" title="var">x</span>:<span class="id" title="var">Circle</span>) : <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">Circle_encode</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">isequiv_adjointify</span> (<span class="id" title="var">Circle_encode</span> <span class="id" title="var">x</span>) (<span class="id" title="var">Circle_decode</span> <span class="id" title="var">x</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Here&nbsp;we&nbsp;induct&nbsp;on&nbsp;<span class="inlinecode"><span class="id" title="var">x</span>:<span class="id" title="var">Circle</span></span>.&nbsp;&nbsp;We&nbsp;just&nbsp;did&nbsp;the&nbsp;case&nbsp;when&nbsp;<span class="inlinecode"><span class="id" title="var">x</span></span>&nbsp;is&nbsp;<span class="inlinecode"><span class="id" title="var">base</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">refine</span> (<span class="id" title="var">Circle_ind</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; (<span class="id" title="var">Circle_encode</span> <span class="id" title="var">x</span>) <span class="id" title="var">o</span> (<span class="id" title="var">Circle_decode</span> <span class="id" title="var">x</span>) == <span class="id" title="var">idmap</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Circle_encode_loopexp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;What&nbsp;remains&nbsp;is&nbsp;easy&nbsp;since&nbsp;<span class="inlinecode"><span class="id" title="var">Int</span></span>&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;set.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">path_forall</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">z</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">hset_path2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;other&nbsp;side&nbsp;is&nbsp;trivial&nbsp;by&nbsp;path&nbsp;induction.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> []; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Finally giving us an equivalence between the loop space of the <span class="inlinecode"><span class="id" title="var">Circle</span></span> and <span class="inlinecode"><span class="id" title="var">Int</span></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_loopCircle_int</span> : (<span class="id" title="var">base</span> = <span class="id" title="var">base</span>) &lt;~&gt; <span class="id" title="var">Int</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">Build_Equiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">Circle_encode</span> <span class="id" title="var">base</span>) (<span class="id" title="var">Circle_encode_isequiv</span> <span class="id" title="var">base</span>).<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">EncodeDecode</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1344"></a><h2 class="section">Connectedness and truncatedness of the <span class="inlinecode"><span class="id" title="var">Circle</span></span></h2>

<div class="paragraph"> </div>

 The circle is 0-connected. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isconnected_Circle</span> `{<span class="id" title="var">Univalence</span>} : <span class="id" title="var">IsConnected</span> 0 <span class="id" title="var">Circle</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">is0connected_merely_allpath</span>.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">exact</span> (<span class="id" title="var">tr</span> <span class="id" title="var">base</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">srefine</span> (<span class="id" title="var">Circle_ind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">Circle_ind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">tr</span> 1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">path_ishprop</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">path_ishprop</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
It follows that the circle is a 1-type. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">istrunc_Circle</span> `{<span class="id" title="var">Univalence</span>} : <span class="id" title="var">IsTrunc</span> 1 <span class="id" title="var">Circle</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">istrunc_S</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span> := <span class="id" title="var">merely_path_is0connected</span> <span class="id" title="var">Circle</span> <span class="id" title="var">base</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> := <span class="id" title="var">merely_path_is0connected</span> <span class="id" title="var">Circle</span> <span class="id" title="var">base</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">strip_truncations</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">istrunc_equiv_istrunc</span> (<span class="id" title="var">n</span> := 0) <span class="id" title="var">Int</span> <span class="id" title="var">equiv_loopCircle_int</span>^-1).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1345"></a><h2 class="section">Iteration of equivalences</h2>

<div class="paragraph"> </div>

 If <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">Circle</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="keyword">Type</span></span> is defined by a type <span class="inlinecode"><span class="id" title="var">X</span></span> and an autoequivalence <span class="inlinecode"><span class="id" title="var">f</span></span>, then the image of <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">Int</span></span> regarded as in <span class="inlinecode"><span class="id" title="var">base</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">base</span></span> is <span class="inlinecode"><span class="id" title="var">iter_int</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Circle_action_is_iter</span> `{<span class="id" title="var">Univalence</span>} <span class="id" title="var">X</span> (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> &lt;~&gt; <span class="id" title="var">X</span>) (<span class="id" title="var">n</span> : <span class="id" title="var">Int</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">X</span>)<br/>
: <span class="id" title="var">transport</span> (<span class="id" title="var">Circle_rec</span> <span class="id" title="keyword">Type</span> <span class="id" title="var">X</span> (<span class="id" title="var">path_universe</span> <span class="id" title="var">f</span>)) (<span class="id" title="var">equiv_loopCircle_int</span>^-1 <span class="id" title="var">n</span>) <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">int_iter</span> <span class="id" title="var">f</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @ <span class="id" title="var">loopexp_path_universe</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">transport_compose</span> <span class="id" title="var">idmap</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> @ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> =&gt; <span class="id" title="var">transport</span> <span class="id" title="var">idmap</span> <span class="id" title="var">p</span> <span class="id" title="var">x</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">equiv_loopCircle_int</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Circle_decode</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">ap_loopexp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> =&gt; <span class="id" title="var">loopexp</span> <span class="id" title="var">p</span> <span class="id" title="var">n</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Circle_rec_beta_loop</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The universal property of the circle (Lemma 6.2.9 in the Book).  We could deduce this from <span class="inlinecode"><span class="id" title="var">isequiv_Coeq_rec</span></span>, but it's nice to see a direct proof too. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Circle_rec_uncurried</span> (<span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: {<span class="id" title="var">b</span> : <span class="id" title="var">P</span> &amp; <span class="id" title="var">b</span> = <span class="id" title="var">b</span>} -&gt; (<span class="id" title="var">Circle</span> -&gt; <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">Circle_rec</span> <span class="id" title="var">P</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">x</span>).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_Circle_rec_uncurried</span> `{<span class="id" title="var">Funext</span>} (<span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>) : <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">Circle_rec_uncurried</span> <span class="id" title="var">P</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">srapply</span> <span class="id" title="var">isequiv_adjointify</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">g</span> =&gt; (<span class="id" title="var">g</span> <span class="id" title="var">base</span> ; <span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">loop</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">g</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_arrow</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">srapply</span> <span class="id" title="var">Circle_ind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <span class="id" title="var">Circle_rec_uncurried</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">transport_paths_FlFr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_p1_1q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Circle_rec_beta_loop</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">p</span>]; <span class="id" title="tactic">apply</span> <span class="id" title="var">ap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Circle_rec_beta_loop</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_Circle_rec</span> `{<span class="id" title="var">Funext</span>} (<span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: {<span class="id" title="var">b</span> : <span class="id" title="var">P</span> &amp; <span class="id" title="var">b</span> = <span class="id" title="var">b</span>} &lt;~&gt; (<span class="id" title="var">Circle</span> -&gt; <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">Build_Equiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">isequiv_Circle_rec_uncurried</span> <span class="id" title="var">P</span>).<br/>

<br/>
</div>

<div class="doc">
A pointed version of the universal property of the circle. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pmap_from_circle_loops</span> `{<span class="id" title="var">Funext</span>} (<span class="id" title="var">X</span> : <span class="id" title="var">pType</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">pCircle</span> -&gt;** <span class="id" title="var">X</span>) &lt;~&gt;* <span class="id" title="var">loops</span> <span class="id" title="var">X</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Build_pEquiv'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> <span class="id" title="var">oE</span> (<span class="id" title="var">issig_pmap</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^-1%<span class="id" title="var">equiv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">equiv_via</span> { <span class="id" title="var">xp</span> : { <span class="id" title="var">x</span> : <span class="id" title="var">X</span> &amp; <span class="id" title="var">x</span> = <span class="id" title="var">x</span> } &amp; <span class="id" title="var">xp</span>.1 = <span class="id" title="var">pt</span> }.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="var">make_equiv_contr_basedpaths</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> ((<span class="id" title="var">equiv_functor_sigma_pb</span> (<span class="id" title="var">equiv_Circle_rec</span> <span class="id" title="var">X</span>)^-1%<span class="id" title="var">equiv</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">ap_const</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>