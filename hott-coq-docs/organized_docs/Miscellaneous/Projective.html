<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Projective</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Projective</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Basics</span> <span class="id" title="keyword">Types</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Truncations.Core</span> <span class="id" title="var">Truncations.SeparatedTrunc</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Modalities.Modality</span> <span class="id" title="var">Modalities.Identity</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Limits.Pullback</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab73"></a><h1 class="section">Projective types</h1>

<div class="paragraph"> </div>

 To quantify over all truncation levels including infinity, we parametrize <span class="inlinecode"><span class="id" title="var">IsOProjective</span></span> by a <span class="inlinecode"><span class="id" title="var">Modality</span></span>. When specializing to <span class="inlinecode"><span class="id" title="var">IsOProjective</span></span> <span class="inlinecode"><span class="id" title="var">purely</span></span> we get an (oo,-1)-projectivity predicate, <span class="inlinecode"><span class="id" title="var">IsProjective</span></span>. When specializing to <span class="inlinecode"><span class="id" title="var">IsOProjective</span></span> <span class="inlinecode">(<span class="id" title="var">Tr</span></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span> we get an (n,-1)-projectivity predicate, <span class="inlinecode"><span class="id" title="var">IsTrProjective</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">IsOProjective</span> (<span class="id" title="var">O</span> : <span class="id" title="var">Modality</span>) (<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>) : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span>, <span class="id" title="var">In</span> <span class="id" title="var">O</span> <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">forall</span> <span class="id" title="var">B</span>, <span class="id" title="var">In</span> <span class="id" title="var">O</span> <span class="id" title="var">B</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">B</span>, <span class="id" title="keyword">forall</span> <span class="id" title="var">p</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">IsSurjection</span> <span class="id" title="var">p</span> -&gt; <span class="id" title="var">merely</span> (<span class="id" title="tactic">exists</span> <span class="id" title="var">s</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">A</span>, <span class="id" title="var">p</span> <span class="id" title="var">o</span> <span class="id" title="var">s</span> == <span class="id" title="var">f</span>).<br/>

<br/>
</div>

<div class="doc">
(oo,-1)-projectivity. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Notation</span> <span class="id" title="var">IsProjective</span> := (<span class="id" title="var">IsOProjective</span> <span class="id" title="var">purely</span>).<br/>

<br/>
</div>

<div class="doc">
(n,-1)-projectivity. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Notation</span> <span class="id" title="var">IsTrProjective</span> <span class="id" title="var">n</span> := (<span class="id" title="var">IsOProjective</span> (<span class="id" title="var">Tr</span> <span class="id" title="var">n</span>)).<br/>

<br/>
</div>

<div class="doc">
A type X is projective if and only if surjections into X merely split. 
</div>
<div class="code">
<span class="id" title="keyword">Proposition</span> <span class="id" title="var">iff_isoprojective_surjections_split</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">O</span> : <span class="id" title="var">Modality</span>) (<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>) `{<span class="id" title="var">In</span> <span class="id" title="var">O</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsOProjective</span> <span class="id" title="var">O</span> <span class="id" title="var">X</span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> (<span class="id" title="var">Y</span> : <span class="id" title="keyword">Type</span>), <span class="id" title="var">In</span> <span class="id" title="var">O</span> <span class="id" title="var">Y</span> -&gt; <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> : <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">X</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">IsSurjection</span> <span class="id" title="var">p</span> -&gt; <span class="id" title="var">merely</span> (<span class="id" title="tactic">exists</span> <span class="id" title="var">s</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>, <span class="id" title="var">p</span> <span class="id" title="var">o</span> <span class="id" title="var">s</span> == <span class="id" title="var">idmap</span>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">isprojX</span> <span class="id" title="var">Y</span> <span class="id" title="var">oY</span> <span class="id" title="var">p</span> <span class="id" title="var">S</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">IsOProjective</span> <span class="id" title="tactic">in</span> <span class="id" title="var">isprojX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">isprojX</span> <span class="id" title="var">Y</span> <span class="id" title="var">_</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">idmap</span> <span class="id" title="var">p</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">splits</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">IsOProjective</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">oA</span> <span class="id" title="var">B</span> <span class="id" title="var">oB</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> <span class="id" title="var">S</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">splits</span> (<span class="id" title="var">Pullback</span> <span class="id" title="var">p</span> <span class="id" title="var">f</span>) <span class="id" title="var">_</span> <span class="id" title="var">pullback_pr2</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">strip_truncations</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">E</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">tr</span> (<span class="id" title="var">pullback_pr1</span> <span class="id" title="var">o</span> <span class="id" title="var">s</span>; <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">pullback_commsq</span> <span class="id" title="var">p</span> <span class="id" title="var">f</span> (<span class="id" title="var">s</span> <span class="id" title="var">x</span>) @ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">E</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">equiv_isoprojective_surjections_split</span><br/>
&nbsp;&nbsp;`{<span class="id" title="var">Funext</span>} (<span class="id" title="var">O</span> : <span class="id" title="var">Modality</span>) (<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>) `{<span class="id" title="var">In</span> <span class="id" title="var">O</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsOProjective</span> <span class="id" title="var">O</span> <span class="id" title="var">X</span> &lt;~&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> (<span class="id" title="var">Y</span> : <span class="id" title="keyword">Type</span>), <span class="id" title="var">In</span> <span class="id" title="var">O</span> <span class="id" title="var">Y</span> -&gt; <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> : <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">X</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">IsSurjection</span> <span class="id" title="var">p</span> -&gt; <span class="id" title="var">merely</span> (<span class="id" title="tactic">exists</span> <span class="id" title="var">s</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>, <span class="id" title="var">p</span> <span class="id" title="var">o</span> <span class="id" title="var">s</span> == <span class="id" title="var">idmap</span>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">equiv_iff_hprop_uncurried</span> (<span class="id" title="var">iff_isoprojective_surjections_split</span> <span class="id" title="var">O</span> <span class="id" title="var">X</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab74"></a><h2 class="section">Projectivity and the axiom of choice</h2>

<div class="paragraph"> </div>

 In topos theory, an object X is said to be projective if the axiom of choice holds when making choices indexed by X. We will refer to this as <span class="inlinecode"><span class="id" title="var">HasOChoice</span></span>, to avoid confusion with <span class="inlinecode"><span class="id" title="var">IsOProjective</span></span> above. In similarity with <span class="inlinecode"><span class="id" title="var">IsOProjective</span></span>, we parametrize it by a <span class="inlinecode"><span class="id" title="var">Modality</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">HasOChoice</span> (<span class="id" title="var">O</span> : <span class="id" title="var">Modality</span>) (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">hasochoice</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">B</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>), (<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">O</span> (<span class="id" title="var">B</span> <span class="id" title="var">x</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">merely</span> (<span class="id" title="var">B</span> <span class="id" title="var">x</span>)) -&gt; <span class="id" title="var">merely</span> (<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span>).<br/>

<br/>
</div>

<div class="doc">
(oo,-1)-choice. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Notation</span> <span class="id" title="var">HasChoice</span> := (<span class="id" title="var">HasOChoice</span> <span class="id" title="var">purely</span>).<br/>

<br/>
</div>

<div class="doc">
(n,-1)-choice. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Notation</span> <span class="id" title="var">HasTrChoice</span> <span class="id" title="var">n</span> := (<span class="id" title="var">HasOChoice</span> (<span class="id" title="var">Tr</span> <span class="id" title="var">n</span>)).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">hasochoice_sigma</span><br/>
&nbsp;&nbsp;`{<span class="id" title="var">Funext</span>} {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">B</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>} (<span class="id" title="var">O</span> : <span class="id" title="var">Modality</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">chA</span> : <span class="id" title="var">HasOChoice</span> <span class="id" title="var">O</span> <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">chB</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">A</span>, <span class="id" title="var">HasOChoice</span> <span class="id" title="var">O</span> (<span class="id" title="var">B</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;: <span class="id" title="var">HasOChoice</span> <span class="id" title="var">O</span> {<span class="id" title="var">a</span> : <span class="id" title="var">A</span> | <span class="id" title="var">B</span> <span class="id" title="var">a</span>}.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">C</span> <span class="id" title="var">sC</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">f'</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> =&gt; <span class="id" title="var">chB</span> <span class="id" title="var">a</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> =&gt; <span class="id" title="var">C</span> (<span class="id" title="var">a</span>; <span class="id" title="var">b</span>)) <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> =&gt; <span class="id" title="var">f</span> (<span class="id" title="var">a</span>; <span class="id" title="var">b</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">chA</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> =&gt; <span class="id" title="keyword">forall</span> <span class="id" title="var">b</span>, <span class="id" title="var">C</span> (<span class="id" title="var">a</span>; <span class="id" title="var">b</span>)) <span class="id" title="var">_</span> <span class="id" title="var">f'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">strip_truncations</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">chA</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Proposition</span> <span class="id" title="var">isoprojective_ochoice</span> (<span class="id" title="var">O</span> : <span class="id" title="var">Modality</span>) (<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">HasOChoice</span> <span class="id" title="var">O</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">IsOProjective</span> <span class="id" title="var">O</span> <span class="id" title="var">X</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">chX</span> <span class="id" title="var">A</span> ? <span class="id" title="var">B</span> ? <span class="id" title="var">f</span> <span class="id" title="var">p</span> <span class="id" title="var">S</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">g</span> : <span class="id" title="var">merely</span> (<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>:<span class="id" title="var">X</span>, <span class="id" title="var">hfiber</span> <span class="id" title="var">p</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>))).<br/>
&nbsp;&nbsp;- <span class="id" title="var">rapply</span> <span class="id" title="var">chX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">center</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">strip_truncations</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span>:<span class="id" title="var">X</span> =&gt; <span class="id" title="var">pr1</span> (<span class="id" title="var">g</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">g</span> <span class="id" title="var">x</span>).2.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Proposition</span> <span class="id" title="var">hasochoice_oprojective</span> (<span class="id" title="var">O</span> : <span class="id" title="var">Modality</span>) (<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>) `{<span class="id" title="var">In</span> <span class="id" title="var">O</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsOProjective</span> <span class="id" title="var">O</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">HasOChoice</span> <span class="id" title="var">O</span> <span class="id" title="var">X</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> <span class="id" title="var">o</span> <span class="id" title="var">fst</span> (<span class="id" title="var">iff_isoprojective_surjections_split</span> <span class="id" title="var">O</span> <span class="id" title="var">X</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">splits</span> <span class="id" title="var">P</span> <span class="id" title="var">oP</span> <span class="id" title="var">S</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <span class="id" title="var">splits</span> <span class="id" title="keyword">with</span> {<span class="id" title="var">x</span> : <span class="id" title="var">X</span> &amp; <span class="id" title="var">P</span> <span class="id" title="var">x</span>} <span class="id" title="var">pr1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">splits</span> <span class="id" title="var">_</span> (<span class="id" title="var">fst</span> (<span class="id" title="var">iff_merely_issurjection</span> <span class="id" title="var">P</span>) <span class="id" title="var">S</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">M</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">S</span> <span class="id" title="var">splits</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">strip_truncations</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">M</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">p</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">transport</span> <span class="id" title="var">_</span> (<span class="id" title="var">p</span> <span class="id" title="var">x</span>) (<span class="id" title="var">s</span> <span class="id" title="var">x</span>).2).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Proposition</span> <span class="id" title="var">iff_isoprojective_hasochoice</span> (<span class="id" title="var">O</span> : <span class="id" title="var">Modality</span>) (<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>) `{<span class="id" title="var">In</span> <span class="id" title="var">O</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsOProjective</span> <span class="id" title="var">O</span> <span class="id" title="var">X</span> &lt;-&gt; <span class="id" title="var">HasOChoice</span> <span class="id" title="var">O</span> <span class="id" title="var">X</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">hasochoice_oprojective</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">isoprojective_ochoice</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Proposition</span> <span class="id" title="var">equiv_isoprojective_hasochoice</span><br/>
&nbsp;&nbsp;`{<span class="id" title="var">Funext</span>} (<span class="id" title="var">O</span> : <span class="id" title="var">Modality</span>) (<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>) `{<span class="id" title="var">In</span> <span class="id" title="var">O</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsOProjective</span> <span class="id" title="var">O</span> <span class="id" title="var">X</span> &lt;~&gt; <span class="id" title="var">HasOChoice</span> <span class="id" title="var">O</span> <span class="id" title="var">X</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">equiv_iff_hprop_uncurried</span> (<span class="id" title="var">iff_isoprojective_hasochoice</span> <span class="id" title="var">O</span> <span class="id" title="var">X</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">istrunc_forall</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Proposition</span> <span class="id" title="var">isprojective_unit</span> : <span class="id" title="var">IsProjective</span> <span class="id" title="var">Unit</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isoprojective_ochoice</span> <span class="id" title="var">purely</span> <span class="id" title="var">Unit</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">trP</span> <span class="id" title="var">S</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <span class="id" title="var">S</span> <span class="id" title="keyword">with</span> <span class="id" title="var">tt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">strip_truncations</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Unit_ind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">S</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">AC_oo_neg1</span>.<br/>
</div>

<div class="doc">
<a id="lab75"></a><h2 class="section">Projectivity and AC(oo,-1) (defined in HoTT book, Exercise 7.8)</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;Generalize&nbsp;to&nbsp;n,&nbsp;m.&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">AC</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">X</span> : <span class="id" title="var">HSet</span>, <span class="id" title="var">HasChoice</span> <span class="id" title="var">X</span>}.<br/>

<br/>
</div>

<div class="doc">
(Exercise 7.9) Assuming AC(oo,-1) every type merely has a projective cover. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Proposition</span> <span class="id" title="var">projective_cover_AC</span> `{<span class="id" title="var">Univalence</span>} (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">merely</span> (<span class="id" title="tactic">exists</span> <span class="id" title="var">X</span>:<span class="id" title="var">HSet</span>, <span class="id" title="tactic">exists</span> <span class="id" title="var">p</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">A</span>, <span class="id" title="var">IsSurjection</span> <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">X</span> := <span class="id" title="var">Build_HSet</span> (<span class="id" title="var">Tr</span> 0 <span class="id" title="var">A</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> ((<span class="id" title="var">equiv_isoprojective_hasochoice</span> <span class="id" title="var">_</span> <span class="id" title="var">X</span>)^-1 (<span class="id" title="var">AC</span> <span class="id" title="var">X</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">P</span> <span class="id" title="var">A</span> <span class="id" title="var">_</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">idmap</span> <span class="id" title="var">tr</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">F</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">strip_truncations</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">F</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">f</span> <span class="id" title="var">p</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">tr</span> (<span class="id" title="var">X</span>; (<span class="id" title="var">f</span>; <span class="id" title="var">BuildIsSurjection</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">hfiber</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_O_sigma_O</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">tr</span> (<span class="id" title="var">tr</span> <span class="id" title="var">a</span>; <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rapply</span> (<span class="id" title="var">equiv_path_Tr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^-1%<span class="id" title="var">equiv</span>. <span class="comment">(*&nbsp;Uses&nbsp;Univalence.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Assuming AC(oo,-1), projective types are exactly sets. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">equiv_isprojective_ishset_AC</span> `{<span class="id" title="var">Univalence</span>} (<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">IsProjective</span> <span class="id" title="var">X</span> &lt;~&gt; <span class="id" title="var">IsHSet</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_iff_hprop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">isprojX</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">IsOProjective</span> <span class="id" title="tactic">in</span> <span class="id" title="var">isprojX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">projective_cover_AC</span> <span class="id" title="var">X</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">P</span>; <span class="id" title="var">strip_truncations</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">P</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">P</span> [<span class="id" title="var">p</span> <span class="id" title="var">issurj_p</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">isprojX</span> <span class="id" title="var">P</span> <span class="id" title="var">_</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">idmap</span> <span class="id" title="var">p</span> <span class="id" title="var">issurj_p</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">S</span>; <span class="id" title="var">strip_truncations</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">inO_retract_inO</span> (<span class="id" title="var">Tr</span> 0) <span class="id" title="var">X</span> <span class="id" title="var">P</span> <span class="id" title="var">S</span>.1 <span class="id" title="var">p</span> <span class="id" title="var">S</span>.2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">ishsetX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">equiv_isoprojective_hasochoice</span> <span class="id" title="var">purely</span> <span class="id" title="var">X</span>)^-1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rapply</span> <span class="id" title="var">AC</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">AC_oo_neg1</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>