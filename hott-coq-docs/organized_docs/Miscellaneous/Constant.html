<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Constant</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Constant</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">HoTT.Basics</span> <span class="id" title="var">HoTT.Types</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Extensions</span> <span class="id" title="var">Factorization</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Truncations.Core</span> <span class="id" title="var">Modalities.Modality</span>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">path_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">trunc_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab37"></a><h1 class="section">Varieties of constant function</h1>

<div class="paragraph"> </div>

 Recall that a function <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">Y</span></span> is *weakly constant*, <span class="inlinecode"><span class="id" title="var">WeaklyConstant</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span>, if <span class="inlinecode"><span class="id" title="keyword">forall</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">y</span>,</span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">y</span></span>.  We show, following Kraus, Escardo, Coquand, and Altenkirch, that the type of fixed points of a weakly constant endofunction is an hprop.  However, to avoid potential confusion with <span class="inlinecode"><span class="id" title="var">Coq.Init.Wf.Fix</span></span>, instead of their notation <span class="inlinecode"><span class="id" title="keyword">Fix</span></span>, we denote this type by <span class="inlinecode"><span class="id" title="var">FixedBy</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">FixedBy</span> {<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">X</span>) := {<span class="id" title="var">x</span> : <span class="id" title="var">X</span> &amp; <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">x</span>}.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">ishprop_fix_wconst</span> {<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">wc</span> : <span class="id" title="var">WeaklyConstant</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsHProp</span> (<span class="id" title="var">FixedBy</span> <span class="id" title="var">f</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hprop_inhabited_contr</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">x0</span> <span class="id" title="var">p0</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">contr_equiv'</span> {<span class="id" title="var">x</span>:<span class="id" title="var">X</span> &amp; <span class="id" title="var">f</span> <span class="id" title="var">x0</span> = <span class="id" title="var">x</span>} <span class="id" title="var">_</span>); <span class="id" title="tactic">unfold</span> <span class="id" title="var">FixedBy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_functor_sigma_id</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_concat_l</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">wconst</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
It follows that if a type <span class="inlinecode"><span class="id" title="var">X</span></span> admits a weakly constant endofunction <span class="inlinecode"><span class="id" title="var">f</span></span>, then <span class="inlinecode"><span class="id" title="var">FixedBy</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> is equivalent to <span class="inlinecode"><span class="id" title="var">merely</span></span> <span class="inlinecode"><span class="id" title="var">X</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_fix_merely</span> {<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">wc</span> : <span class="id" title="var">WeaklyConstant</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">FixedBy</span> <span class="id" title="var">f</span> &lt;~&gt; <span class="id" title="var">merely</span> <span class="id" title="var">X</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_iff_hprop</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">x</span> <span class="id" title="var">p</span>]; <span class="id" title="tactic">exact</span> (<span class="id" title="var">tr</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Trunc_rec</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">wconst</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Therefore, a type is collapsible (admits a weakly constant endomap) if and only if <span class="inlinecode"><span class="id" title="var">merely</span></span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">X</span></span> (it has "split support"). 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">splitsupp_collapsible</span> {<span class="id" title="var">X</span>} `{<span class="id" title="var">Collapsible</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">merely</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">X</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> <span class="id" title="var">o</span> (<span class="id" title="var">equiv_fix_merely</span> <span class="id" title="var">collapse</span>)^-1).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">pr1</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">collapsible_splitsupp</span> {<span class="id" title="var">X</span>} (<span class="id" title="var">s</span> : <span class="id" title="var">merely</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">Collapsible</span> <span class="id" title="var">X</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">Build_Collapsible</span> <span class="id" title="var">_</span> (<span class="id" title="var">s</span> <span class="id" title="var">o</span> <span class="id" title="var">tr</span>) <span class="id" title="var">_</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">ap</span> <span class="id" title="var">s</span>), <span class="id" title="var">path_ishprop</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
 We say that <span class="inlinecode"><span class="id" title="var">f</span></span> is *conditionally constant* if it factors through the propositional truncation <span class="inlinecode"><span class="id" title="var">merely</span></span> <span class="inlinecode"><span class="id" title="var">X</span></span>, and *constant* if it factors through <span class="inlinecode"><span class="id" title="var">Unit</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ConditionallyConstant</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">ExtensionAlong</span> (@<span class="id" title="var">tr</span> (-1) <span class="id" title="var">X</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">Y</span>) <span class="id" title="var">f</span>.<br/>

<br/>
</div>

<div class="doc">
We don't yet have a need for a predicate <span class="inlinecode"><span class="id" title="var">Constant</span></span> on functions; we do already have the operation <span class="inlinecode"><span class="id" title="var">const</span></span> which constructs the constant function at a given point.  Every such constant function is, of course, conditionally constant. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cconst_const</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span>} (<span class="id" title="var">y</span> : <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ConditionallyConstant</span> (@<span class="id" title="var">const</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">y</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">const</span> <span class="id" title="var">y</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The type of conditionally constant functions is equivalent to <span class="inlinecode"><span class="id" title="var">merely</span></span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">Y</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_cconst_from_merely</span> `{<span class="id" title="var">Funext</span>} (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: { <span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span> &amp; <span class="id" title="var">ConditionallyConstant</span> <span class="id" title="var">f</span> } &lt;~&gt; (<span class="id" title="var">merely</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> <span class="id" title="var">oE</span> (<span class="id" title="var">equiv_sigma_symm</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">equiv_sigma_contr</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
If a function factors through any hprop, it is conditionally constant. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cconst_factors_hprop</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>) `{<span class="id" title="var">IsHProp</span> <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">g</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">P</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">P</span> -&gt; <span class="id" title="var">Y</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">g</span> == <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ConditionallyConstant</span> <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">g'</span> := <span class="id" title="var">Trunc_rec</span> <span class="id" title="var">g</span> : <span class="id" title="var">merely</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">P</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">g'</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Thus, if it factors through a type that <span class="inlinecode"><span class="id" title="var">X</span></span> implies is contractible, then it is also conditionally constant. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cconst_factors_contr</span> `{<span class="id" title="var">Funext</span>}  {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>) {<span class="id" title="var">Pc</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Contr</span> <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">g</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">P</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">P</span> -&gt; <span class="id" title="var">Y</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">g</span> == <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ConditionallyConstant</span> <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">merely</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">IsHProp</span> <span class="id" title="var">P</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">Trunc_rec</span>. </div>

<div class="doc">
Uses funext 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">pose</span> (<span class="id" title="var">Pc</span> <span class="id" title="var">x</span>); <span class="id" title="tactic">apply</span> <span class="id" title="var">istrunc_succ</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">g'</span> := <span class="id" title="var">Trunc_ind</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">P</span>) <span class="id" title="var">g</span> : <span class="id" title="var">merely</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">P</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">g'</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Any weakly constant function with collapsible domain is conditionally constant. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cconst_wconst_collapsible</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">Collapsible</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>) {<span class="id" title="var">wc</span> : <span class="id" title="var">WeaklyConstant</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">ConditionallyConstant</span> <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">f</span> <span class="id" title="var">o</span> <span class="id" title="var">splitsupp_collapsible</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">splitsupp_collapsible</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">wconst</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The image of a weakly constant function with hset codomain is an hprop. In fact, we just need to assume that <span class="inlinecode"><span class="id" title="var">merely</span></span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">IsHSet</span></span> <span class="inlinecode"><span class="id" title="var">Y</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Local Instance</span> <span class="id" title="var">hprop_image_wconst_hset_if_merely_domain</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">Ys</span> : <span class="id" title="var">merely</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">IsHSet</span> <span class="id" title="var">Y</span>} {<span class="id" title="var">wc</span>: <span class="id" title="var">WeaklyConstant</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsHProp</span> (<span class="id" title="var">image</span> (-1) <span class="id" title="var">f</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hprop_allpath</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">m</span>] [<span class="id" title="var">b'</span> <span class="id" title="var">m'</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_sigma_hprop</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Ys'</span> : <span class="id" title="var">IsHSet</span> <span class="id" title="var">Y</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">Ys</span>. <span class="id" title="var">strip_truncations</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">tr</span> <span class="id" title="var">m</span>.1). }<br/>
&nbsp;&nbsp;<span class="id" title="var">strip_truncations</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">p</span>], <span class="id" title="var">m'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x'</span> <span class="id" title="var">p'</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">p</span>^ @ <span class="id" title="var">wc</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> @ <span class="id" title="var">p'</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
When <span class="inlinecode"><span class="id" title="var">merely</span></span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">IsHSet</span></span> <span class="inlinecode"><span class="id" title="var">Y</span></span>, any weakly constant function <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">Y</span></span> is conditionally constant. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cconst_wconst_hset_if_merely_domain</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">Ys</span> : <span class="id" title="var">merely</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">IsHSet</span> <span class="id" title="var">Y</span>} {<span class="id" title="var">wc</span>: <span class="id" title="var">WeaklyConstant</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">ConditionallyConstant</span> <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">srapply</span> (<span class="id" title="var">cconst_factors_hprop</span> <span class="id" title="var">f</span> (<span class="id" title="var">image</span> (-1) <span class="id" title="var">f</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">factor1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">factor2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">fact_factors</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The previous result will be most often used when we know <span class="inlinecode"><span class="id" title="var">Y</span></span> is an hset, so we specialize to this case. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cconst_wconst_hset</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">Ys</span> : <span class="id" title="var">IsHSet</span> <span class="id" title="var">Y</span>} {<span class="id" title="var">wc</span> : <span class="id" title="var">WeaklyConstant</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">ConditionallyConstant</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">cconst_wconst_hset_if_merely_domain</span> <span class="id" title="var">f</span> (<span class="id" title="var">Ys</span>:=<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">Ys</span>).<br/>

<br/>
</div>

<div class="doc">
We can decompose this into an "induction principle" and its computation rule. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">merely_rec_hset</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">Ys</span> : <span class="id" title="var">IsHSet</span> <span class="id" title="var">Y</span>} {<span class="id" title="var">wc</span> : <span class="id" title="var">WeaklyConstant</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">merely</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span><br/>
&nbsp;&nbsp;:= (<span class="id" title="var">cconst_wconst_hset</span> <span class="id" title="var">f</span>).1.<br/>

<br/>
</div>

<div class="doc">
The computation rule is <span class="inlinecode">(<span class="id" title="var">cconst_wconst_hset</span></span> <span class="inlinecode"><span class="id" title="var">f</span>).2</span> <span class="inlinecode"><span class="id" title="var">x</span></span>, but that's reflexivity. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">merely_rec_hset_beta</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">Ys</span> : <span class="id" title="var">IsHSet</span> <span class="id" title="var">Y</span>} {<span class="id" title="var">wc</span> : <span class="id" title="var">WeaklyConstant</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">x</span> : <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">merely_rec_hset</span> <span class="id" title="var">f</span> (<span class="id" title="var">tr</span> <span class="id" title="var">x</span>) = <span class="id" title="var">f</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">idpath</span>.<br/>

<br/>
</div>

<div class="doc">
If we assume <span class="inlinecode"><span class="id" title="var">Funext</span></span>, then we can weaken the hypothesis from <span class="inlinecode"><span class="id" title="var">merely</span></span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">IsHSet</span></span> <span class="inlinecode"><span class="id" title="var">Y</span></span> to <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">IsHSet</span></span> <span class="inlinecode"><span class="id" title="var">Y</span></span>, since with <span class="inlinecode"><span class="id" title="var">Funext</span></span>, we know that <span class="inlinecode"><span class="id" title="var">IsHSet</span></span> <span class="inlinecode"><span class="id" title="var">Y</span></span> is an hprop. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cconst_wconst_hset_if_domain</span> `{<span class="id" title="var">Funext</span>} {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">Ys</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">IsHSet</span> <span class="id" title="var">Y</span>} {<span class="id" title="var">wc</span> : <span class="id" title="var">WeaklyConstant</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">ConditionallyConstant</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">cconst_wconst_hset_if_merely_domain</span> <span class="id" title="var">f</span> (<span class="id" title="var">Ys</span>:=<span class="id" title="var">Trunc_rec</span> <span class="id" title="var">Ys</span>).<br/>

<br/>
</div>

<div class="doc">
We record the corresponding induction principle, but not the computation principle, since it is again definitional. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">merely_rec_hset_if_domain</span> `{<span class="id" title="var">Funext</span>} {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">Ys</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">IsHSet</span> <span class="id" title="var">Y</span>} {<span class="id" title="var">wc</span> : <span class="id" title="var">WeaklyConstant</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">merely</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span><br/>
&nbsp;&nbsp;:= (<span class="id" title="var">cconst_wconst_hset_if_domain</span> <span class="id" title="var">f</span>).1.<br/>

<br/>
</div>

<div class="doc">
The type of weakly constant functions <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">Y</span></span>, when <span class="inlinecode"><span class="id" title="var">Y</span></span> is a set, is equivalent to <span class="inlinecode"><span class="id" title="var">merely</span></span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">Y</span></span>. This uses <span class="inlinecode"><span class="id" title="var">Funext</span></span> for the main argument, so we may as well state it with the more general assumption <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">IsHSet</span></span> <span class="inlinecode"><span class="id" title="var">Y</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_merely_rec_hset_if_domain</span> `{<span class="id" title="var">Funext</span>} (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">Ys</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">IsHSet</span> <span class="id" title="var">Y</span>}<br/>
&nbsp;&nbsp;: { <span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span> &amp; <span class="id" title="var">WeaklyConstant</span> <span class="id" title="var">f</span> } &lt;~&gt; (<span class="id" title="var">merely</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Ys'</span> := <span class="id" title="var">Trunc_rec</span> <span class="id" title="var">Ys</span> : <span class="id" title="var">merely</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">IsHSet</span> <span class="id" title="var">Y</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">equiv_adjointify</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">f</span> <span class="id" title="var">wc</span>]. <span class="id" title="tactic">exact</span> (<span class="id" title="var">merely_rec_hset_if_domain</span> <span class="id" title="var">f</span> (<span class="id" title="var">wc</span>:=<span class="id" title="var">wc</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">g</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">tr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>; <span class="id" title="tactic">apply</span> (<span class="id" title="var">ap</span> <span class="id" title="var">g</span>), <span class="id" title="var">path_ishprop</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">g</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">path_arrow</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">mx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Ys'</span> <span class="id" title="var">mx</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">strip_truncations</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">f</span> <span class="id" title="var">wc</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">path_sigma</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="var">funext</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">Ys</span> <span class="id" title="var">x</span>); <span class="id" title="tactic">apply</span> <span class="id" title="var">path_ishprop</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>