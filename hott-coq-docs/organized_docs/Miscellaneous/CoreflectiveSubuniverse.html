<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>CoreflectiveSubuniverse</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library CoreflectiveSubuniverse</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">HoTT.Basics</span> <span class="id" title="var">HoTT.Types</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Modalities.Modality</span> <span class="id" title="var">Modalities.Open</span>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">path_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1213"></a><h1 class="section">Coreflective subuniverses.</h1>

<div class="paragraph"> </div>

 In this file we study "coreflective subuniverses" that are defined dually to reflective subuniverses.  However, it turns out that there are many fewer examples of these.  The "internal" nature of such definitions, which in the reflective case makes the subuniverse automatically an exponential ideal, in the coreflective case has much stronger consequences: it forces the entire coreflection to be determined by the image of <span class="inlinecode"><span class="id" title="var">Unit</span></span>, which can be an arbitrary hprop.  Thus, this file is essentially just a no-go theorem: there are no coreflective subuniverses other than a certain class of fairly simple ones (which we call "co-open" since they are dual to open modalities).

<div class="paragraph"> </div>

In particular, since we do not foresee many applications of this file, we don't bother introducing modules to make the definitions more universe polymorphic the way we did for reflective subuniverses. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Record</span> <span class="id" title="var">CoreflectiveSubuniverse</span> :=<br/>
&nbsp;&nbsp;{ <span class="id" title="var">inF</span> : <span class="id" title="keyword">Type</span> -&gt; <span class="id" title="var">HProp</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">F_coreflector</span> : <span class="id" title="keyword">Type</span> -&gt; <span class="id" title="keyword">Type</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">F_inF</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">X</span>, <span class="id" title="var">inF</span> (<span class="id" title="var">F_coreflector</span> <span class="id" title="var">X</span>) ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fromF</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">X</span>, <span class="id" title="var">F_coreflector</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">X</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
We also don't bother defining <span class="inlinecode"><span class="id" title="var">ooLiftableAlong</span></span> so as to state the universal property without <span class="inlinecode"><span class="id" title="var">Funext</span></span>. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">isequiv_fromF_postcompose</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">forall</span> {<span class="id" title="var">Y</span> <span class="id" title="var">X</span>} {<span class="id" title="var">Y_inF</span> : <span class="id" title="var">inF</span> <span class="id" title="var">Y</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">IsEquiv</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">g</span> : <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">F_coreflector</span> <span class="id" title="var">X</span>) =&gt; <span class="id" title="var">fromF</span> <span class="id" title="var">X</span> <span class="id" title="var">o</span> <span class="id" title="var">g</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
Similarly, we don't bother asserting repleteness; we'll just use univalence. 
</div>
<div class="code">
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">F_coreflector</span> : <span class="id" title="var">CoreflectiveSubuniverse</span> &gt;-&gt; <span class="id" title="var">Funclass</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">CoreflectiveSubuniverse</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">Univalence</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">F</span> : <span class="id" title="var">CoreflectiveSubuniverse</span>}.<br/>

<br/>
</div>

<div class="doc">
We begin by extracting the corecursor, its computation rule, and its eta principle. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">F_corec</span> {<span class="id" title="var">Y</span> <span class="id" title="var">X</span>} `(<span class="id" title="var">inF</span> <span class="id" title="var">F</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">X</span>) : <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">F</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="keyword">fun</span> (<span class="id" title="var">g</span> : <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">F</span> <span class="id" title="var">X</span>) =&gt; <span class="id" title="var">fromF</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">o</span> <span class="id" title="var">g</span>)^-1 <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">isequiv_fromF_postcompose</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">F_corec_beta</span> {<span class="id" title="var">Y</span> <span class="id" title="var">X</span>} (<span class="id" title="var">YF</span> : <span class="id" title="var">inF</span> <span class="id" title="var">F</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">fromF</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">o</span> <span class="id" title="var">F_corec</span> <span class="id" title="var">YF</span> <span class="id" title="var">f</span> == <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ap10</span>, (<span class="id" title="var">eisretr</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">g</span> =&gt; <span class="id" title="var">fromF</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">o</span> <span class="id" title="var">g</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">F_coindpaths</span> {<span class="id" title="var">Y</span> <span class="id" title="var">X</span>} `(<span class="id" title="var">inF</span> <span class="id" title="var">F</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">g</span> <span class="id" title="var">h</span> : <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">F</span> <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">fromF</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">o</span> <span class="id" title="var">g</span> == <span class="id" title="var">fromF</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">o</span> <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">g</span> == <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ap10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">equiv_inj</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">k</span> =&gt; <span class="id" title="var">fromF</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">o</span> <span class="id" title="var">k</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">isequiv_fromF_postcompose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">path_arrow</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The functorial action of the coreflector. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">F_functor</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>) : <span class="id" title="var">F</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">F</span> <span class="id" title="var">Y</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">F_corec</span> (<span class="id" title="var">F_inF</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span>) (<span class="id" title="var">f</span> <span class="id" title="var">o</span> <span class="id" title="var">fromF</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span>).<br/>

<br/>
</div>

<div class="doc">
The coreflector preserves hprops (since it is a right adjoint and thus preserves limits). 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Local Instance</span> <span class="id" title="var">ishprop_coreflection</span> <span class="id" title="var">A</span> `{<span class="id" title="var">IsHProp</span> <span class="id" title="var">A</span>} : <span class="id" title="var">IsHProp</span> (<span class="id" title="var">F</span> <span class="id" title="var">A</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hprop_allpath</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">F_coindpaths</span> (<span class="id" title="var">F_inF</span> <span class="id" title="var">F</span> <span class="id" title="var">A</span>) (<span class="id" title="var">const</span> <span class="id" title="var">x</span>) (<span class="id" title="var">const</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">path_ishprop</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
A type lies in <span class="inlinecode"><span class="id" title="var">F</span></span> as soon as <span class="inlinecode"><span class="id" title="var">fromF</span></span> admits a section. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">inF_fromF_sect</span> <span class="id" title="var">X</span> (<span class="id" title="var">s</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">F</span> <span class="id" title="var">X</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">fromF</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">o</span> <span class="id" title="var">s</span> == <span class="id" title="var">idmap</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">inF</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">transport</span> (<span class="id" title="var">inF</span> <span class="id" title="var">F</span>) (<span class="id" title="var">path_universe</span> (<span class="id" title="var">fromF</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span>)) (<span class="id" title="var">F_inF</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">isequiv_adjointify</span> <span class="id" title="var">_</span> <span class="id" title="var">s</span> <span class="id" title="var">p</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">s</span> <span class="id" title="var">o</span> <span class="id" title="var">fromF</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> == <span class="id" title="var">idmap</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">F_coindpaths</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">F_inF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
So far, nothing unexpected has happened.  Now, however, we claim that <span class="inlinecode"><span class="id" title="var">F</span></span> is completely determined by the image of <span class="inlinecode"><span class="id" title="var">Unit</span></span>, which by <span class="inlinecode"><span class="id" title="var">ishprop_coreflection</span></span> is an hprop.  Specifically, we claim that <span class="inlinecode"><span class="id" title="var">X</span></span> lies in <span class="inlinecode"><span class="id" title="var">F</span></span> exactly when <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">F</span></span> <span class="inlinecode"><span class="id" title="var">Unit</span></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">inF_equiv_implies_funit</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;: <span class="id" title="var">inF</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> &lt;~&gt; (<span class="id" title="var">X</span> -&gt; <span class="id" title="var">F</span> <span class="id" title="var">Unit</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_iff_hprop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> ?. <span class="id" title="tactic">apply</span> <span class="id" title="var">F_corec</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">tt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">inF_fromF_sect</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">F_functor</span> (<span class="id" title="var">unit_name</span> <span class="id" title="var">x</span>) (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">F_functor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">F_corec_beta</span> (<span class="id" title="var">F_inF</span> <span class="id" title="var">F</span> <span class="id" title="var">Unit</span>) (<span class="id" title="var">const</span> <span class="id" title="var">x</span>) (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">CoreflectiveSubuniverse</span>.<br/>

<br/>
</div>

<div class="doc">
Conversely, we will now show that for any hprop <span class="inlinecode"><span class="id" title="var">U</span></span>, the types <span class="inlinecode"><span class="id" title="var">X</span></span> such that <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">U</span></span> are a coreflective subuniverse, which we call "co-open" since it is dual to the open modality. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">CoOpen</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">Funext</span>} (<span class="id" title="var">U</span> : <span class="id" title="var">HProp</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">coOp</span> : <span class="id" title="var">CoreflectiveSubuniverse</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">Build_CoreflectiveSubuniverse</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">X</span> =&gt; <span class="id" title="var">Build_HProp</span> (<span class="id" title="var">X</span> -&gt; <span class="id" title="var">U</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">X</span> =&gt; <span class="id" title="var">X</span> * <span class="id" title="var">U</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">X</span> =&gt; @<span class="id" title="var">snd</span> <span class="id" title="var">X</span> <span class="id" title="var">U</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">X</span> =&gt; @<span class="id" title="var">fst</span> <span class="id" title="var">X</span> <span class="id" title="var">U</span>) <span class="id" title="var">_</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Y</span> <span class="id" title="var">X</span> <span class="id" title="var">YU</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">isequiv_adjointify</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> <span class="id" title="var">y</span> =&gt; (<span class="id" title="var">h</span> <span class="id" title="var">y</span> , <span class="id" title="var">YU</span> <span class="id" title="var">y</span>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">g</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">path_arrow</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">h</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">path_arrow</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_prod</span>; [ <span class="id" title="tactic">reflexivity</span> | <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">path_ishprop</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Thus, each coreflective subuniverses are uniquely determined by an hprop.  Moreover, the coreflective subuniverse corresponding to an hprop <span class="inlinecode"><span class="id" title="var">U</span></span> is closely related to the open modality <span class="inlinecode"><span class="id" title="var">Op</span></span> <span class="inlinecode"><span class="id" title="var">U</span></span>.  Specifically, they form an <i>adjoint modality pair</i> in the sense that the subuniverses are canonically equivalent, and the coreflection and reflection respect this equivalence.  In categorical language, this says that the inclusion of an open subtopos is the center of a local geometric morphism in the other direction.  We express this concisely as follows. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">coopen_isequiv_open</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">O_functor</span> (<span class="id" title="var">Op</span> <span class="id" title="var">U</span>) (<span class="id" title="var">fromF</span> <span class="id" title="var">coOp</span> <span class="id" title="var">X</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">isequiv_adjointify</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">ux</span> =&gt; <span class="id" title="keyword">fun</span> <span class="id" title="var">u</span> =&gt; (<span class="id" title="var">ux</span> <span class="id" title="var">u</span> , <span class="id" title="var">u</span>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">ux</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_arrow</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">u</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">O_functor</span> (<span class="id" title="var">Op</span> <span class="id" title="var">U</span>) <span class="id" title="var">fst</span> (<span class="id" title="var">to</span> (<span class="id" title="var">Op</span> <span class="id" title="var">U</span>) (<span class="id" title="var">X</span> * <span class="id" title="var">U</span>) (<span class="id" title="var">ux</span> <span class="id" title="var">u</span> , <span class="id" title="var">u</span>)) <span class="id" title="var">u</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">ap10</span>, <span class="id" title="var">ap</span>, <span class="id" title="var">path_arrow</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">u'</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_prod</span>; <span class="id" title="tactic">simpl</span>; [ <span class="id" title="tactic">apply</span> <span class="id" title="var">ap</span> | ]; <span class="id" title="tactic">apply</span> <span class="id" title="var">path_ishprop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">ap10</span> (<span class="id" title="var">to_O_natural</span> (<span class="id" title="var">Op</span> <span class="id" title="var">U</span>) (@<span class="id" title="var">fst</span> <span class="id" title="var">X</span> <span class="id" title="var">U</span>) (<span class="id" title="var">ux</span> <span class="id" title="var">u</span> , <span class="id" title="var">u</span>)) <span class="id" title="var">u</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">uux</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_arrow</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">u</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_prod</span>; [ <span class="id" title="tactic">simpl</span> | <span class="id" title="tactic">apply</span> <span class="id" title="var">path_ishprop</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">O_functor</span> (<span class="id" title="var">Op</span> <span class="id" title="var">U</span>) <span class="id" title="var">fst</span> (<span class="id" title="var">to</span> (<span class="id" title="var">Op</span> <span class="id" title="var">U</span>) <span class="id" title="var">_</span> (<span class="id" title="var">fst</span> (<span class="id" title="var">uux</span> <span class="id" title="var">u</span>) , <span class="id" title="var">u</span>)) <span class="id" title="var">u</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">ap10</span>, <span class="id" title="var">ap</span>, <span class="id" title="var">path_arrow</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">u'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_prod</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">ap</span> <span class="id" title="var">fst</span> (<span class="id" title="var">ap</span> <span class="id" title="var">uux</span> (<span class="id" title="var">path_ishprop</span> <span class="id" title="var">u'</span> <span class="id" title="var">u</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">path_ishprop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">ap10</span> (<span class="id" title="var">to_O_natural</span> (<span class="id" title="var">Op</span> <span class="id" title="var">U</span>) (@<span class="id" title="var">fst</span> <span class="id" title="var">X</span> <span class="id" title="var">U</span>) (<span class="id" title="var">fst</span> (<span class="id" title="var">uux</span> <span class="id" title="var">u</span>) , <span class="id" title="var">u</span>)) <span class="id" title="var">u</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">coopen_equiv_open</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;: <span class="id" title="var">Op</span> <span class="id" title="var">U</span> (<span class="id" title="var">coOp</span> <span class="id" title="var">X</span>) &lt;~&gt; <span class="id" title="var">Op</span> <span class="id" title="var">U</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">Build_Equiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">O_functor</span> (<span class="id" title="var">Op</span> <span class="id" title="var">U</span>) (<span class="id" title="var">fromF</span> <span class="id" title="var">coOp</span> <span class="id" title="var">X</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">coopen_isequiv_open</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">CoOpen</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>