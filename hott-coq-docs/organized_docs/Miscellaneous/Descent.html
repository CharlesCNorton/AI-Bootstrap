<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Descent</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Descent</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">HoTT.Basics</span> <span class="id" title="var">HoTT.Types</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">HFiber</span> <span class="id" title="var">Extensions</span> <span class="id" title="var">Limits.Pullback</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Modality</span> <span class="id" title="var">Accessible</span> <span class="id" title="var">Modalities.Localization</span>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">path_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">subuniverse_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1214"></a><h1 class="section">Descent between subuniverses</h1>

<div class="paragraph"> </div>

 We study here a strengthening of the relation <span class="inlinecode"><span class="id" title="var">O</span></span> <span class="inlinecode">&lt;&lt;</span> <span class="inlinecode"><span class="id" title="var">O'</span></span> saying that <span class="inlinecode"><span class="id" title="var">O</span></span>-modal type families descend along <span class="inlinecode"><span class="id" title="var">O'</span></span>-equivalences.  Pairs of reflective subuniverses with this relation share nearly all the properties of a reflective subuniverse <span class="inlinecode"><span class="id" title="var">O</span></span> paired with its subuniverse <span class="inlinecode"><span class="id" title="var">Sep</span></span> <span class="inlinecode"><span class="id" title="var">O</span></span> of separated types (see <span class="inlinecode"><span class="id" title="var">Separated.v</span></span>) and also many of those of a single left exact modality (see <span class="inlinecode"><span class="id" title="var">Lex.v</span></span>).  Thus, many of the results herein generalize those of RSS for lex modalities and those of CORS for separated subuniverses.

<div class="paragraph"> </div>

Note that this kind of descent is not the same as the "modal descent" of Cherubini and Rijke.  When we get around to formalizing that, we may need to worry about disambiguating the names. 
<div class="paragraph"> </div>

<a id="lab1215"></a><h2 class="section">Definitions</h2>

<div class="paragraph"> </div>

 This definition is an analogue of the statement of Lemma 2.19 of CORS, and of Theorem 3.1(xiii) of RSS.  Note that CORS Lemma 2.19 includes uniqueness of the extension, which we don't assert explicitly.  However, uniqueness follows from the <span class="inlinecode"><span class="id" title="var">ReflectsD</span></span> parameter -- see <span class="inlinecode"><span class="id" title="var">ooextendable_TypeO_lex_leq</span></span> below. 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <span class="id" title="var">Descends@</span>{<span class="id" title="var">i</span>} (<span class="id" title="var">O'</span> <span class="id" title="var">O</span> : <span class="id" title="var">Subuniverse@</span>{<span class="id" title="var">i</span>}) (<span class="id" title="var">T</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>})<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">ReflectsD@</span>{<span class="id" title="var">i</span>} <span class="id" title="var">O'</span> <span class="id" title="var">O</span> <span class="id" title="var">T</span>} :=<br/>
{<br/>
&nbsp;&nbsp;<span class="id" title="var">OO_descend</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">P</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}) {<span class="id" title="var">P_inO</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">O</span> (<span class="id" title="var">P</span> <span class="id" title="var">x</span>)},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">O_reflector</span> <span class="id" title="var">O'</span> <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>} ;<br/>
&nbsp;&nbsp;<span class="id" title="var">OO_descend_inO</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">P</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}) {<span class="id" title="var">P_inO</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">O</span> (<span class="id" title="var">P</span> <span class="id" title="var">x</span>)} (<span class="id" title="var">x</span> : <span class="id" title="var">O_reflector</span> <span class="id" title="var">O'</span> <span class="id" title="var">T</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">O</span> (<span class="id" title="var">OO_descend</span> <span class="id" title="var">P</span> <span class="id" title="var">x</span>) ;<br/>
&nbsp;&nbsp;<span class="id" title="var">OO_descend_beta</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">P</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}) {<span class="id" title="var">P_inO</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">O</span> (<span class="id" title="var">P</span> <span class="id" title="var">x</span>)} (<span class="id" title="var">x</span> : <span class="id" title="var">T</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">OO_descend</span> <span class="id" title="var">P</span> (<span class="id" title="var">to</span> <span class="id" title="var">O'</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>) &lt;~&gt; <span class="id" title="var">P</span> <span class="id" title="var">x</span> ;<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Global Existing Instance</span> <span class="id" title="var">OO_descend_inO</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">OO_descend</span> <span class="id" title="var">O'</span> <span class="id" title="var">O</span> {<span class="id" title="var">T</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">P</span> {<span class="id" title="var">P_inO</span>} <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">OO_descend_inO</span> <span class="id" title="var">O'</span> <span class="id" title="var">O</span> {<span class="id" title="var">T</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">P</span> {<span class="id" title="var">P_inO</span>} <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">OO_descend_beta</span> <span class="id" title="var">O'</span> <span class="id" title="var">O</span> {<span class="id" title="var">T</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">P</span> {<span class="id" title="var">P_inO</span>} <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">O_lex_leq</span> (<span class="id" title="var">O1</span> <span class="id" title="var">O2</span> : <span class="id" title="var">ReflectiveSubuniverse</span>) `{<span class="id" title="var">O1</span> &lt;&lt; <span class="id" title="var">O2</span>} :=<br/>
&nbsp;&nbsp;<span class="id" title="var">O_lex_leq_descends</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span>, <span class="id" title="var">Descends</span> <span class="id" title="var">O2</span> <span class="id" title="var">O1</span> <span class="id" title="var">A</span>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> &quot;&lt;&lt;&lt;" := <span class="id" title="var">O_lex_leq</span> : <span class="id" title="var">subuniverse_scope</span>.<br/>
<span class="id" title="keyword">Global Existing Instance</span> <span class="id" title="var">O_lex_leq_descends</span>.<br/>

<br/>
</div>

<div class="doc">
Unfortunately, it seems that generalizing binders don't work on notations: writing <span class="inlinecode">`{<span class="id" title="var">O</span></span> <span class="inlinecode">&lt;&lt;&lt;</span> <span class="inlinecode"><span class="id" title="var">O'</span>}</span> doesn't automatically add the precondition <span class="inlinecode"><span class="id" title="var">O</span></span> <span class="inlinecode">&lt;&lt;</span> <span class="inlinecode"><span class="id" title="var">O'</span></span>, although writing <span class="inlinecode">`{<span class="id" title="var">O_lex_leq</span></span> <span class="inlinecode"><span class="id" title="var">O</span></span> <span class="inlinecode"><span class="id" title="var">O'</span>}</span> does. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">O_lex_leq_eq</span> {<span class="id" title="var">O1</span> <span class="id" title="var">O2</span> <span class="id" title="var">O3</span> : <span class="id" title="var">ReflectiveSubuniverse</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">O1</span> &lt;=&gt; <span class="id" title="var">O2</span>} `{<span class="id" title="var">O2</span> &lt;&lt; <span class="id" title="var">O3</span>, <span class="id" title="var">O2</span> &lt;&lt;&lt; <span class="id" title="var">O3</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hstrong</span> := <span class="id" title="var">O_strong_leq_trans_l</span> <span class="id" title="var">O1</span> <span class="id" title="var">O2</span> <span class="id" title="var">O3</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">O1</span> &lt;&lt;&lt; <span class="id" title="var">O3</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span>; <span class="id" title="var">unshelve</span> <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">P_inO1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">pose</span> (<span class="id" title="var">P_inO2</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">inO_leq</span> <span class="id" title="var">O1</span> <span class="id" title="var">O2</span> <span class="id" title="var">_</span> (<span class="id" title="var">P_inO1</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">OO_descend</span> <span class="id" title="var">O3</span> <span class="id" title="var">O2</span> <span class="id" title="var">P</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">apply</span> (<span class="id" title="var">inO_leq</span> <span class="id" title="var">O2</span> <span class="id" title="var">O1</span>), (<span class="id" title="var">OO_descend_inO</span> <span class="id" title="var">O3</span> <span class="id" title="var">O2</span> <span class="id" title="var">P</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">OO_descend_beta</span> <span class="id" title="var">O3</span> <span class="id" title="var">O2</span> <span class="id" title="var">P</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1216"></a><h2 class="section">Left exactness properties</h2>

<div class="paragraph"> </div>

 We prove analogues of the properties in section 2.4 of CORS and Theorem 3.1 of RSS, but in a different order, with different proofs, to increase the generality.  The proofs in CORS use Proposition 2.26 for everything else, but it seems that most of the other results are true in the generality of two reflective subuniverses with <span class="inlinecode"><span class="id" title="var">O</span></span> <span class="inlinecode">&lt;&lt;&lt;</span> <span class="inlinecode"><span class="id" title="var">O'</span></span>, so we give different proofs for some of them.  (To show that this generality is non-spurious, note that a lex modality <span class="inlinecode"><span class="id" title="var">O</span></span> satisfies <span class="inlinecode"><span class="id" title="var">O</span></span> <span class="inlinecode">&lt;&lt;&lt;</span> <span class="inlinecode"><span class="id" title="var">O</span></span>, but does not generally coincide with <span class="inlinecode"><span class="id" title="var">Sep</span></span> <span class="inlinecode"><span class="id" title="var">O</span></span>.)

<div class="paragraph"> </div>

In the case of a single modality, most of these statements are equivalent to lex-ness (as stated in Theorem 3.1 of RSS).  We do not know if anything similar is true more generally. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">LeftExactness</span>.<br/>
<span class="id" title="keyword">Universe</span> <span class="id" title="var">i</span>.<br/>
<span class="id" title="keyword">Context</span> (<span class="id" title="var">O'</span> <span class="id" title="var">O</span> : <span class="id" title="var">ReflectiveSubuniverse@</span>{<span class="id" title="var">i</span>}) `{<span class="id" title="var">O</span> &lt;&lt; <span class="id" title="var">O'</span>, <span class="id" title="var">O</span> &lt;&lt;&lt; <span class="id" title="var">O'</span>}.<br/>

<br/>
</div>

<div class="doc">
Proposition 2.30 of CORS and Theorem 3.1(xii) of RSS: any <span class="inlinecode"><span class="id" title="var">O'</span></span>-equivalence is <span class="inlinecode"><span class="id" title="var">O</span></span>-connected.  The special case when <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">to</span></span> <span class="inlinecode"><span class="id" title="var">O'</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> requires only <span class="inlinecode"><span class="id" title="var">O</span></span> <span class="inlinecode">&lt;&lt;</span> <span class="inlinecode"><span class="id" title="var">O'</span></span>, but the general case seems to require <span class="inlinecode"><span class="id" title="var">O</span></span> <span class="inlinecode">&lt;&lt;&lt;</span> <span class="inlinecode"><span class="id" title="var">O'</span></span>. It is convenient to have this as an instance in this file, but we don't make it global, as it requires that Coq guess <span class="inlinecode"><span class="id" title="var">O'</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Local Instance</span> <span class="id" title="var">conn_map_OO_inverts</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) `{<span class="id" title="var">O_inverts</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsConnMap</span> <span class="id" title="var">O</span> <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">conn_map_from_extension_elim</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">P_inO</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">E</span> : <span class="id" title="var">ExtendableAlong</span> 1%<span class="id" title="var">nat</span> <span class="id" title="var">f</span> <span class="id" title="var">P</span>); [ | <span class="id" title="tactic">exact</span> (<span class="id" title="var">fst</span> <span class="id" title="var">E</span>) ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Qp</span> := <span class="id" title="var">OO_descend_beta</span> <span class="id" title="var">O'</span> <span class="id" title="var">O</span> <span class="id" title="var">P</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Q_inO</span> := <span class="id" title="var">OO_descend_inO</span> <span class="id" title="var">O'</span> <span class="id" title="var">O</span> <span class="id" title="var">P</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Q</span> := <span class="id" title="var">OO_descend</span> <span class="id" title="var">O'</span> <span class="id" title="var">O</span> <span class="id" title="var">P</span>) <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">extendable_postcompose'</span> <span class="id" title="var">_</span> (<span class="id" title="var">Q</span> <span class="id" title="var">o</span> <span class="id" title="var">to</span> <span class="id" title="var">O'</span> <span class="id" title="var">B</span>) <span class="id" title="var">P</span> <span class="id" title="var">f</span> <span class="id" title="var">Qp</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">cancelL_extendable</span> <span class="id" title="var">_</span> <span class="id" title="var">Q</span> <span class="id" title="var">f</span> (<span class="id" title="var">to</span> <span class="id" title="var">O'</span> <span class="id" title="var">B</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;1:<span class="id" title="var">srapply</span> (<span class="id" title="var">extendable_conn_map_inO</span> <span class="id" title="var">O</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">extendable_homotopic</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">O_functor</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span> <span class="id" title="var">o</span> <span class="id" title="var">to</span> <span class="id" title="var">O'</span> <span class="id" title="var">A</span>) (<span class="id" title="var">to_O_natural</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">srapply</span> <span class="id" title="var">extendable_compose</span>.<br/>
&nbsp;&nbsp;1:<span class="id" title="var">srapply</span> <span class="id" title="var">extendable_equiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">srapply</span> (<span class="id" title="var">extendable_conn_map_inO</span> <span class="id" title="var">O</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
A generalization of Lemma 2.27 of CORS: <span class="inlinecode"><span class="id" title="var">functor_sigma</span></span> of a family of <span class="inlinecode"><span class="id" title="var">O</span></span>-equivalences over an <span class="inlinecode"><span class="id" title="var">O'</span></span>-equivalence is an <span class="inlinecode"><span class="id" title="var">O</span></span>-equivalence.  CORS Lemma 2.27 is the case when <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">to</span></span> <span class="inlinecode"><span class="id" title="var">O'</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> and <span class="inlinecode"><span class="id" title="var">g</span></span> is a family of identities. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">OO_inverts_functor_sigma</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>} {<span class="id" title="var">Q</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) (<span class="id" title="var">g</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="var">Q</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">O_inverts</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span>} `{<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">O_inverts</span> <span class="id" title="var">O</span> (<span class="id" title="var">g</span> <span class="id" title="var">a</span>)}<br/>
&nbsp;&nbsp;: <span class="id" title="var">O_inverts</span> <span class="id" title="var">O</span> (<span class="id" title="var">functor_sigma</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">srapply</span> <span class="id" title="var">isequiv_homotopic'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">refine</span> (<span class="id" title="var">equiv_O_sigma_O</span> <span class="id" title="var">O</span> <span class="id" title="var">_</span> <span class="id" title="var">oE</span> <span class="id" title="var">_</span> <span class="id" title="var">oE</span> (<span class="id" title="var">equiv_O_sigma_O</span> <span class="id" title="var">O</span> <span class="id" title="var">_</span>)^-1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">Build_Equiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">O_functor</span> <span class="id" title="var">O</span> (<span class="id" title="var">functor_sigma</span> <span class="id" title="var">f</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">O_functor</span> <span class="id" title="var">O</span> (<span class="id" title="var">g</span> <span class="id" title="var">x</span>)))) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">O_indpaths</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">x</span> <span class="id" title="var">u</span>]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<span class="id" title="var">to_O_natural</span>, <span class="id" title="var">O_rec_beta</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<span class="id" title="var">to_O_natural</span>, <span class="id" title="var">O_rec_beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Families of <span class="inlinecode"><span class="id" title="var">O</span></span>-modal types descend along all <span class="inlinecode"><span class="id" title="var">O'</span></span>-equivalences (not just the <span class="inlinecode"><span class="id" title="var">O'</span></span>-units, as asserted in the definition of <span class="inlinecode">&lt;&lt;&lt;</span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">OO_descend_O_inverts</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) `{<span class="id" title="var">O_inverts</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">P_inO</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">O</span> (<span class="id" title="var">P</span> <span class="id" title="var">x</span>)}<br/>
&nbsp;&nbsp;: <span class="id" title="var">B</span> -&gt; <span class="id" title="keyword">Type</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">Q</span> := <span class="id" title="var">OO_descend</span> <span class="id" title="var">O'</span> <span class="id" title="var">O</span> <span class="id" title="var">P</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">Q</span> ((<span class="id" title="var">O_functor</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span>)^-1 (<span class="id" title="var">to</span> <span class="id" title="var">O'</span> <span class="id" title="var">B</span> <span class="id" title="var">b</span>))).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">OO_descend_O_inverts_inO</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) `{<span class="id" title="var">O_inverts</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">P_inO</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">O</span> (<span class="id" title="var">P</span> <span class="id" title="var">x</span>)} (<span class="id" title="var">b</span> : <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">In</span> <span class="id" title="var">O</span> (<span class="id" title="var">OO_descend_O_inverts</span> <span class="id" title="var">f</span> <span class="id" title="var">P</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">OO_descend_O_inverts_beta</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) `{<span class="id" title="var">O_inverts</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) {<span class="id" title="var">P_inO</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">O</span> (<span class="id" title="var">P</span> <span class="id" title="var">x</span>)} (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">OO_descend_O_inverts</span> <span class="id" title="var">f</span> <span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)) &lt;~&gt; <span class="id" title="var">P</span> <span class="id" title="var">a</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">OO_descend_O_inverts</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">OO_descend_beta</span> <span class="id" title="var">O'</span> <span class="id" title="var">O</span> <span class="id" title="var">P</span> <span class="id" title="var">a</span> <span class="id" title="var">oE</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span> := (<span class="id" title="var">to_O_natural</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span>)^).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_equiv_V</span> <span class="id" title="tactic">in</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">equiv_transport</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Morally, an equivalent way of saying <span class="inlinecode"><span class="id" title="var">O</span></span> <span class="inlinecode">&lt;&lt;&lt;</span> <span class="inlinecode"><span class="id" title="var">O'</span></span> is that the universe of <span class="inlinecode"><span class="id" title="var">O</span></span>-modal types is <span class="inlinecode"><span class="id" title="var">O'</span></span>-modal.  We can't say this directly since this type lives in a higher universe, but here is a rephrasing of it. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ooextendable_TypeO_lex_leq</span> `{<span class="id" title="var">Univalence</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) `{<span class="id" title="var">O_inverts</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">ooExtendableAlong</span> <span class="id" title="var">f</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">Type_</span> <span class="id" title="var">O</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rapply</span> <span class="id" title="var">ooextendable_TypeO_from_extension</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; (<span class="id" title="var">OO_descend_O_inverts</span> <span class="id" title="var">f</span> <span class="id" title="var">P</span> <span class="id" title="var">x</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">OO_descend_O_inverts_inO</span> <span class="id" title="var">f</span> <span class="id" title="var">P</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">path_TypeO</span>, <span class="id" title="var">path_universe_uncurried</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">OO_descend_O_inverts_beta</span> <span class="id" title="var">f</span> <span class="id" title="var">P</span> <span class="id" title="var">x</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
We can also state it in terms of belonging to a subuniverse if we lift <span class="inlinecode"><span class="id" title="var">O'</span></span> accessibly (an analogue of Theorem 3.11(iii) of RSS). 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">inO_TypeO_lex_leq</span> `{<span class="id" title="var">Univalence</span>} `{<span class="id" title="var">IsAccRSU</span> <span class="id" title="var">O'</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">In</span> (<span class="id" title="var">lift_accrsu</span> <span class="id" title="var">O'</span>) (<span class="id" title="var">Type_</span> <span class="id" title="var">O</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> =&gt; <span class="id" title="var">ooextendable_TypeO_lex_leq</span> (<span class="id" title="var">acc_lgen</span> <span class="id" title="var">O'</span> <span class="id" title="var">i</span>).<br/>

<br/>
</div>

<div class="doc">
If <span class="inlinecode"><span class="id" title="var">f</span></span> is an <span class="inlinecode"><span class="id" title="var">O'</span></span>-equivalence, then <span class="inlinecode"><span class="id" title="var">ap</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> is an <span class="inlinecode"><span class="id" title="var">O</span></span>-equivalence. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">OO_inverts_ap@</span>{}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) `{<span class="id" title="var">O_inverts</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span>} (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">O_inverts</span> <span class="id" title="var">O</span> (@<span class="id" title="var">ap</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Pb</span> := <span class="id" title="var">OO_descend_O_inverts_beta</span> <span class="id" title="var">f</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span>:<span class="id" title="var">A</span> =&gt; <span class="id" title="var">O</span> (<span class="id" title="var">x</span> = <span class="id" title="var">y</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">P_inO</span> := <span class="id" title="var">OO_descend_O_inverts_inO</span> <span class="id" title="var">f</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span>:<span class="id" title="var">A</span> =&gt; <span class="id" title="var">O</span> (<span class="id" title="var">x</span> = <span class="id" title="var">y</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">P</span> := <span class="id" title="var">OO_descend_O_inverts</span> <span class="id" title="var">f</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span>:<span class="id" title="var">A</span> =&gt; <span class="id" title="var">O</span> (<span class="id" title="var">x</span> = <span class="id" title="var">y</span>))) <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">P</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">srapply</span> <span class="id" title="var">isequiv_adjointify</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">t</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> =&gt; @<span class="id" title="var">transport</span> <span class="id" title="var">B</span> <span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) (<span class="id" title="var">f</span> <span class="id" title="var">y</span>) <span class="id" title="var">p</span> ((<span class="id" title="var">Pb</span> <span class="id" title="var">x</span>)^-1 (<span class="id" title="var">to</span> <span class="id" title="var">O</span> (<span class="id" title="var">x</span> = <span class="id" title="var">x</span>) 1))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">Pb</span> <span class="id" title="var">y</span> (<span class="id" title="var">O_rec</span> <span class="id" title="var">t</span> <span class="id" title="var">q</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">O_indpaths</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">p</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">O_rec_beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">g</span> := <span class="id" title="var">extension_conn_map_elim</span> <span class="id" title="var">O</span> (<span class="id" title="var">functor_sigma</span> <span class="id" title="var">f</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">p</span>:<span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)) =&gt; <span class="id" title="var">p</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">bp</span> =&gt; <span class="id" title="var">O</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">bp</span>.1)) (<span class="id" title="keyword">fun</span> <span class="id" title="var">u</span> =&gt; <span class="id" title="var">O_functor</span> <span class="id" title="var">O</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>) (<span class="id" title="var">Pb</span> <span class="id" title="var">u</span>.1 <span class="id" title="var">u</span>.2))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">g1</span> <span class="id" title="var">b</span> <span class="id" title="var">p</span> := <span class="id" title="var">g</span>.1 (<span class="id" title="var">b</span>;<span class="id" title="var">p</span>)). <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">g1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : (<span class="id" title="keyword">fun</span> <span class="id" title="var">u</span> =&gt; <span class="id" title="var">g1</span> <span class="id" title="var">u</span>.1 <span class="id" title="var">u</span>.2) == <span class="id" title="var">g</span>.1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1:<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">b</span>]; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">g2</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">p</span> =&gt; <span class="id" title="var">e</span> <span class="id" title="var">_</span> @ <span class="id" title="var">g</span>.2 (<span class="id" title="var">a</span>;<span class="id" title="var">p</span>)); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">g2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">g2</span> <span class="id" title="var">y</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ap_transport</span> <span class="id" title="var">p</span> <span class="id" title="var">g1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">g2</span> <span class="id" title="var">x</span> ((<span class="id" title="var">Pb</span> <span class="id" title="var">x</span>)^-1 (<span class="id" title="var">to</span> <span class="id" title="var">O</span> (<span class="id" title="var">x</span> = <span class="id" title="var">x</span>) 1))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eisretr</span>, <span class="id" title="var">to_O_natural</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">ap_transport</span> <span class="id" title="var">p</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> =&gt; <span class="id" title="var">to</span> <span class="id" title="var">O</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">b</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">transport_paths_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">concat_1p</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">O_indpaths</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">p</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">to_O_natural</span>, <span class="id" title="var">O_rec_beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">srapply</span> <span class="id" title="var">eisretr</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_O_functor_ap_OO_inverts</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) `{<span class="id" title="var">O_inverts</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span>} (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">O</span> (<span class="id" title="var">x</span> = <span class="id" title="var">y</span>) &lt;~&gt; <span class="id" title="var">O</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">f</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">Build_Equiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">O_functor</span> <span class="id" title="var">O</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>)) <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
Theorem 3.1(i) of RSS: path-spaces of <span class="inlinecode"><span class="id" title="var">O'</span></span>-connected types are <span class="inlinecode"><span class="id" title="var">O</span></span>-connected. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">OO_isconnected_paths</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">IsConnected</span> <span class="id" title="var">O'</span> <span class="id" title="var">A</span>} (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsConnected</span> <span class="id" title="var">O</span> (<span class="id" title="var">x</span> = <span class="id" title="var">y</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rapply</span> (<span class="id" title="var">contr_equiv'</span> <span class="id" title="var">_</span> (<span class="id" title="var">equiv_O_functor_ap_OO_inverts</span> (<span class="id" title="var">const_tt</span> <span class="id" title="var">_</span>) <span class="id" title="var">x</span> <span class="id" title="var">y</span>)^-1).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Proposition 2.26 of CORS and Theorem 3.1(ix) of RSS; also generalizes Theorem 7.3.12 of the book.  Here we need to add the extra assumption that <span class="inlinecode"><span class="id" title="var">O'</span></span> <span class="inlinecode">&lt;=</span> <span class="inlinecode"><span class="id" title="var">Sep</span></span> <span class="inlinecode"><span class="id" title="var">O</span></span>, which is satisfied when <span class="inlinecode"><span class="id" title="var">O'</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">Sep</span></span> <span class="inlinecode"><span class="id" title="var">O</span></span> but also when <span class="inlinecode"><span class="id" title="var">O</span></span> is lex and <span class="inlinecode"><span class="id" title="var">O'</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">O</span></span>.  That some such extra hypothesis is necessary can be seen from the fact that <span class="inlinecode"><span class="id" title="var">Tr</span></span> <span class="inlinecode">(-2)</span> <span class="inlinecode">&lt;&lt;&lt;</span> <span class="inlinecode"><span class="id" title="var">O'</span></span> for any <span class="inlinecode"><span class="id" title="var">O'</span></span>, whereas this statement is certainly not true in that generality. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path_OO</span> `{<span class="id" title="var">O'</span> &lt;= <span class="id" title="var">Sep</span> <span class="id" title="var">O</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">X</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}} (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">O</span> (<span class="id" title="var">x</span> = <span class="id" title="var">y</span>) -&gt; (<span class="id" title="var">to</span> <span class="id" title="var">O'</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> = <span class="id" title="var">to</span> <span class="id" title="var">O'</span> <span class="id" title="var">X</span> <span class="id" title="var">y</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">nrefine</span> (<span class="id" title="var">O_rec</span> (<span class="id" title="var">O</span> := <span class="id" title="var">O</span>) (@<span class="id" title="var">ap</span> <span class="id" title="var">X</span> (<span class="id" title="var">O'</span> <span class="id" title="var">X</span>) (<span class="id" title="var">to</span> <span class="id" title="var">O'</span> <span class="id" title="var">X</span>) <span class="id" title="var">x</span> <span class="id" title="var">y</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="var">rapply</span> (@<span class="id" title="var">inO_leq</span> <span class="id" title="var">O'</span> (<span class="id" title="var">Sep</span> <span class="id" title="var">O</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_path_OO</span> `{<span class="id" title="var">O'</span> &lt;= <span class="id" title="var">Sep</span> <span class="id" title="var">O</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">X</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}} (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">path_OO</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">nrefine</span> (<span class="id" title="var">isequiv_O_rec_O_inverts</span> <span class="id" title="var">O</span> <span class="id" title="var">_</span>).<br/>
</div>

<div class="doc">
Typeclass search can find this, but it's quicker (and may help the reader) to give it explicitly. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">OO_inverts_ap</span> (<span class="id" title="var">to</span> <span class="id" title="var">O'</span> <span class="id" title="var">X</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_path_OO</span> `{<span class="id" title="var">O'</span> &lt;= <span class="id" title="var">Sep</span> <span class="id" title="var">O</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">X</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}} (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">O</span> (<span class="id" title="var">x</span> = <span class="id" title="var">y</span>) &lt;~&gt; (<span class="id" title="var">to</span> <span class="id" title="var">O'</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> = <span class="id" title="var">to</span> <span class="id" title="var">O'</span> <span class="id" title="var">X</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">Build_Equiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">path_OO</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">functor_hfiber</span></span> on a pair of <span class="inlinecode"><span class="id" title="var">O'</span></span>-equivalences is an <span class="inlinecode"><span class="id" title="var">O</span></span>-equivalence. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">OO_inverts_functor_hfiber</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>} {<span class="id" title="var">g</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">D</span>} {<span class="id" title="var">h</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">C</span>} {<span class="id" title="var">k</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">D</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">k</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span> == <span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">h</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">O_inverts</span> <span class="id" title="var">O'</span> <span class="id" title="var">h</span>, <span class="id" title="var">O_inverts</span> <span class="id" title="var">O'</span> <span class="id" title="var">k</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">O_inverts</span> <span class="id" title="var">O</span> (<span class="id" title="var">functor_hfiber</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">functor_hfiber</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrefine</span> (<span class="id" title="var">OO_inverts_functor_sigma</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;1:<span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">isequiv_homotopic</span> (<span class="id" title="var">O_functor</span> <span class="id" title="var">O</span> (<span class="id" title="var">concat</span> (<span class="id" title="var">p</span> <span class="id" title="var">a</span>)^) <span class="id" title="var">o</span> <span class="id" title="var">O_functor</span> <span class="id" title="var">O</span> (@<span class="id" title="var">ap</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">k</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) <span class="id" title="var">b</span>)) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">O_functor_compose</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Corollary 2.29 of CORS: <span class="inlinecode"><span class="id" title="var">O'</span></span> preserves fibers up to <span class="inlinecode"><span class="id" title="var">O</span></span>-equivalence. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">OO_inverts_functor_hfiber_to_O</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">Y</span> <span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">X</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">O_inverts</span> <span class="id" title="var">O</span> (<span class="id" title="var">functor_hfiber</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> =&gt; (<span class="id" title="var">to_O_natural</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span>)^) <span class="id" title="var">x</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
</div>

<div class="doc">
Typeclass search can find this, but it's faster to give it explicitly. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">OO_inverts_functor_hfiber</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_OO_functor_hfiber_to_O</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">Y</span> <span class="id" title="var">X</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>} } (<span class="id" title="var">f</span> : <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">X</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">O</span> (<span class="id" title="var">hfiber</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span>) &lt;~&gt; <span class="id" title="var">O</span> (<span class="id" title="var">hfiber</span> (<span class="id" title="var">O_functor</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span>) (<span class="id" title="var">to</span> <span class="id" title="var">O'</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span>))<br/>
&nbsp;&nbsp;:= <span class="id" title="var">Build_Equiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">OO_inverts_functor_hfiber_to_O</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span>).<br/>

<br/>
</div>

<div class="doc">
Theorem 3.1(iii) of RSS: any map between <span class="inlinecode"><span class="id" title="var">O'</span></span>-connected types is <span class="inlinecode"><span class="id" title="var">O</span></span>-connected.  (Part (ii) is just the version for dependent projections.) 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">OO_conn_map_isconnected</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">Y</span> <span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">IsConnected</span> <span class="id" title="var">O'</span> <span class="id" title="var">Y</span>, <span class="id" title="var">IsConnected</span> <span class="id" title="var">O'</span> <span class="id" title="var">X</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsConnMap</span> <span class="id" title="var">O</span> <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>; <span class="id" title="var">rapply</span> (<span class="id" title="var">contr_equiv'</span> <span class="id" title="var">_</span> (<span class="id" title="var">equiv_OO_functor_hfiber_to_O</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span>)^-1).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">OO_isconnected_hfiber</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">Y</span> <span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">IsConnected</span> <span class="id" title="var">O'</span> <span class="id" title="var">Y</span>, <span class="id" title="var">IsConnected</span> <span class="id" title="var">O'</span> <span class="id" title="var">X</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">X</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsConnected</span> <span class="id" title="var">O</span> (<span class="id" title="var">hfiber</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">OO_conn_map_isconnected</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span>.<br/>

<br/>
</div>

<div class="doc">
Theorem 3.1(iv) of RSS: an <span class="inlinecode"><span class="id" title="var">O</span></span>-modal map between <span class="inlinecode"><span class="id" title="var">O'</span></span>-connected types is an equivalence. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">OO_isequiv_mapino_isconnected</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">Y</span> <span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">IsConnected</span> <span class="id" title="var">O'</span> <span class="id" title="var">Y</span>, <span class="id" title="var">IsConnected</span> <span class="id" title="var">O'</span> <span class="id" title="var">X</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">X</span>) `{<span class="id" title="var">MapIn</span> <span class="id" title="var">O</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isequiv_conn_ino_map</span> <span class="id" title="var">O</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">OO_conn_map_isconnected</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Theorem 3.1(vi) of RSS (and part (v) is just the analogue for dependent projections). 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">OO_conn_map_functor_hfiber</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>} {<span class="id" title="var">g</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">D</span>} {<span class="id" title="var">h</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">C</span>} {<span class="id" title="var">k</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">D</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">IsConnMap</span> <span class="id" title="var">O'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">h</span>, <span class="id" title="var">IsConnMap</span> <span class="id" title="var">O'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">k</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">k</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span> == <span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">h</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsConnMap</span> <span class="id" title="var">O</span> (<span class="id" title="var">functor_hfiber</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">c</span> <span class="id" title="var">q</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">nrefine</span> (<span class="id" title="var">isconnected_equiv'</span> <span class="id" title="var">O</span> <span class="id" title="var">_</span> (<span class="id" title="var">hfiber_functor_hfiber</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">q</span>)^-1 <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">OO_isconnected_hfiber</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
An enhancement of Corollary 2.29 of CORS, corresponding to Theorem 3.1(viii) of RSS: when <span class="inlinecode"><span class="id" title="var">O'</span></span> is a modality, the map between fibers is not just an O-equivalence but is O-connected. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">OO_conn_map_functor_hfiber_to_O</span> `{<span class="id" title="var">IsModality</span> <span class="id" title="var">O'</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">Y</span> <span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">X</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsConnMap</span> <span class="id" title="var">O</span> (<span class="id" title="var">functor_hfiber</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; (<span class="id" title="var">to_O_natural</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span> <span class="id" title="var">y</span>)^) <span class="id" title="var">x</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">OO_conn_map_functor_hfiber</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Theorem 3.1(vii) of RSS 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">OO_ispullback_connmap_mapino</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>} {<span class="id" title="var">g</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">D</span>} {<span class="id" title="var">h</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">C</span>} {<span class="id" title="var">k</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">D</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">k</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span> == <span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">O_inverts</span> <span class="id" title="var">O'</span> <span class="id" title="var">h</span>, <span class="id" title="var">O_inverts</span> <span class="id" title="var">O'</span> <span class="id" title="var">k</span>, <span class="id" title="var">MapIn</span> <span class="id" title="var">O</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span>, <span class="id" title="var">MapIn</span> <span class="id" title="var">O</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">g</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsPullback</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ispullback_isequiv_functor_hfiber</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isequiv_O_inverts</span> <span class="id" title="var">O</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">OO_inverts_functor_hfiber</span>; <span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">functor_pullback</span></span> on a triple of <span class="inlinecode"><span class="id" title="var">O'</span></span>-equivalences is an <span class="inlinecode"><span class="id" title="var">O</span></span>-equivalence. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">OO_inverts_functor_pullback</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A1</span> <span class="id" title="var">B1</span> <span class="id" title="var">C1</span> <span class="id" title="var">A2</span> <span class="id" title="var">B2</span> <span class="id" title="var">C2</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f1</span> : <span class="id" title="var">B1</span> -&gt; <span class="id" title="var">A1</span>) (<span class="id" title="var">g1</span> : <span class="id" title="var">C1</span> -&gt; <span class="id" title="var">A1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f2</span> : <span class="id" title="var">B2</span> -&gt; <span class="id" title="var">A2</span>) (<span class="id" title="var">g2</span> : <span class="id" title="var">C2</span> -&gt; <span class="id" title="var">A2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">h</span> : <span class="id" title="var">A1</span> -&gt; <span class="id" title="var">A2</span>) (<span class="id" title="var">k</span> : <span class="id" title="var">B1</span> -&gt; <span class="id" title="var">B2</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">C1</span> -&gt; <span class="id" title="var">C2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">f2</span> <span class="id" title="var">o</span> <span class="id" title="var">k</span> == <span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">f1</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">g2</span> <span class="id" title="var">o</span> <span class="id" title="var">l</span> == <span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">g1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">O_inverts</span> <span class="id" title="var">O'</span> <span class="id" title="var">h</span>, <span class="id" title="var">O_inverts</span> <span class="id" title="var">O'</span> <span class="id" title="var">k</span>, <span class="id" title="var">O_inverts</span> <span class="id" title="var">O'</span> <span class="id" title="var">l</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">O_inverts</span> <span class="id" title="var">O</span> (<span class="id" title="var">functor_pullback</span> <span class="id" title="var">f1</span> <span class="id" title="var">g1</span> <span class="id" title="var">f2</span> <span class="id" title="var">g2</span> <span class="id" title="var">h</span> <span class="id" title="var">k</span> <span class="id" title="var">l</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">functor_pullback</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrefine</span> (<span class="id" title="var">OO_inverts_functor_sigma</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;1:<span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b1</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrefine</span> (<span class="id" title="var">OO_inverts_functor_sigma</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;1:<span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">c1</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> @<span class="id" title="var">isequiv_compose</span>. <span class="comment">(*&nbsp;Speed&nbsp;up&nbsp;typeclass&nbsp;search.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">isequiv_homotopic</span> (<span class="id" title="var">O_functor</span> <span class="id" title="var">O</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">r</span> =&gt; <span class="id" title="var">r</span> @ (<span class="id" title="var">q</span> <span class="id" title="var">c1</span>)^) <span class="id" title="var">o</span> <span class="id" title="var">O_functor</span> <span class="id" title="var">O</span> (<span class="id" title="var">concat</span> (<span class="id" title="var">p</span> <span class="id" title="var">b1</span>)) <span class="id" title="var">o</span> <span class="id" title="var">O_functor</span> <span class="id" title="var">O</span> (@<span class="id" title="var">ap</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">h</span> (<span class="id" title="var">f1</span> <span class="id" title="var">b1</span>) (<span class="id" title="var">g1</span> <span class="id" title="var">c1</span>))) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;2:<span class="id" title="tactic">apply</span> <span class="id" title="var">O_functor_compose</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="var">srapply</span> <span class="id" title="var">O_functor_compose</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Proposition 2.28 of CORS, and Theorem 3.1(x) of RSS: the functor <span class="inlinecode"><span class="id" title="var">O'</span></span> preserves pullbacks up to <span class="inlinecode"><span class="id" title="var">O</span></span>-equivalence. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">OO_inverts_functor_pullback_to_O</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">A</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">O_inverts</span> <span class="id" title="var">O</span> (<span class="id" title="var">functor_pullback</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> (<span class="id" title="var">O_functor</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span>) (<span class="id" title="var">O_functor</span> <span class="id" title="var">O'</span> <span class="id" title="var">g</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">to</span> <span class="id" title="var">O'</span> <span class="id" title="var">A</span>) (<span class="id" title="var">to</span> <span class="id" title="var">O'</span> <span class="id" title="var">B</span>) (<span class="id" title="var">to</span> <span class="id" title="var">O'</span> <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">to_O_natural</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span>) (<span class="id" title="var">to_O_natural</span> <span class="id" title="var">O'</span> <span class="id" title="var">g</span>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">OO_inverts_functor_pullback</span>; <span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_OO_pullback</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">A</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">O</span> (<span class="id" title="var">Pullback</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) &lt;~&gt; <span class="id" title="var">O</span> (<span class="id" title="var">Pullback</span> (<span class="id" title="var">O_functor</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span>) (<span class="id" title="var">O_functor</span> <span class="id" title="var">O'</span> <span class="id" title="var">g</span>))<br/>
&nbsp;&nbsp;:= <span class="id" title="var">Build_Equiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">OO_inverts_functor_pullback_to_O</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>).<br/>

<br/>
</div>

<div class="doc">
The "if" direction of CORS Proposition 2.31, and the nontrivial part of Theorem 3.1(xi) of RSS.  Note that we could also deduce Theorem 3.1(iii) of RSS from this. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">OO_cancelL_conn_map</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">Y</span> <span class="id" title="var">X</span> <span class="id" title="var">Z</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">X</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Z</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">IsConnMap</span> <span class="id" title="var">O'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>)} `{<span class="id" title="var">IsConnMap</span> <span class="id" title="var">O'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">g</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsConnMap</span> <span class="id" title="var">O</span> <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">conn_map_OO_inverts</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">nrapply</span> (<span class="id" title="var">cancelL_isequiv</span> (<span class="id" title="var">O_functor</span> <span class="id" title="var">O'</span> <span class="id" title="var">g</span>)).<br/>
&nbsp;&nbsp;1:<span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rapply</span> (<span class="id" title="var">isequiv_homotopic</span> <span class="id" title="var">_</span> (<span class="id" title="var">O_functor_compose</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">LeftExactness</span>.<br/>

<br/>
</div>

<div class="doc">
Here's the "only if" direction of CORS Proposition 2.31.  Note that the hypotheses are different from those of the "if" direction, and the proof is shorter than the one given in CORS. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">OO_cancelR_conn_map</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">O'</span> <span class="id" title="var">O</span> : <span class="id" title="var">ReflectiveSubuniverse@</span>{<span class="id" title="var">u</span>}) `{<span class="id" title="var">O_leq@</span>{<span class="id" title="var">u</span> <span class="id" title="var">u</span> <span class="id" title="var">u</span>} <span class="id" title="var">O</span> <span class="id" title="var">O'</span>, <span class="id" title="var">O'</span> &lt;= <span class="id" title="var">Sep</span> <span class="id" title="var">O</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">Y</span> <span class="id" title="var">X</span> <span class="id" title="var">Z</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">X</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Z</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">IsConnMap</span> <span class="id" title="var">O'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>)} `{<span class="id" title="var">IsConnMap</span> <span class="id" title="var">O</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsConnMap</span> <span class="id" title="var">O'</span> <span class="id" title="var">g</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">conn_map_from_extension_elim</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">P_inO</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">conn_map_elim</span> <span class="id" title="var">O'</span> (<span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>) <span class="id" title="var">P</span> (<span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="var">nrefine</span> (<span class="id" title="var">conn_map_elim</span> <span class="id" title="var">O</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); [ <span class="id" title="tactic">exact</span> <span class="id" title="var">_</span> | .. ].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> =&gt; <span class="id" title="var">inO_leq</span> <span class="id" title="var">O'</span> (<span class="id" title="var">Sep</span> <span class="id" title="var">O</span>) (<span class="id" title="var">P</span> <span class="id" title="var">z</span>) (<span class="id" title="var">P_inO</span> <span class="id" title="var">z</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">conn_map_comp</span> <span class="id" title="var">O'</span> (<span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">OO_isconnected_from_conn_map</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">O'</span> <span class="id" title="var">O</span> : <span class="id" title="var">ReflectiveSubuniverse</span>) `{<span class="id" title="var">O</span> &lt;= <span class="id" title="var">O'</span>, <span class="id" title="var">O'</span> &lt;= <span class="id" title="var">Sep</span> <span class="id" title="var">O</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">Y</span> <span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">IsConnected</span> <span class="id" title="var">O'</span> <span class="id" title="var">Y</span>} `{<span class="id" title="var">IsConnMap</span> <span class="id" title="var">O</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsConnected</span> <span class="id" title="var">O'</span> <span class="id" title="var">X</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isconnected_conn_map_to_unit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">OO_cancelR_conn_map</span> <span class="id" title="var">O'</span> <span class="id" title="var">O</span> <span class="id" title="var">f</span> (<span class="id" title="var">const_tt</span> <span class="id" title="var">_</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
An interesting scholium to Proposition 2.31. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">OO_inverts_conn_map_factor_conn_map</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">O'</span> <span class="id" title="var">O</span> : <span class="id" title="var">ReflectiveSubuniverse</span>) `{<span class="id" title="var">O</span> &lt;&lt; <span class="id" title="var">O'</span>, <span class="id" title="var">O</span> &lt;&lt;&lt; <span class="id" title="var">O'</span>, <span class="id" title="var">O'</span> &lt;= <span class="id" title="var">Sep</span> <span class="id" title="var">O</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">Y</span> <span class="id" title="var">X</span> <span class="id" title="var">Z</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">X</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Z</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">IsConnMap</span> <span class="id" title="var">O'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>)} `{<span class="id" title="var">IsConnMap</span> <span class="id" title="var">O</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">O_inverts</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">nrapply</span> (<span class="id" title="var">cancelL_isequiv</span> (<span class="id" title="var">O_functor</span> <span class="id" title="var">O'</span> <span class="id" title="var">g</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">O_inverts_conn_map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">OO_cancelR_conn_map</span> <span class="id" title="var">O'</span> <span class="id" title="var">O</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">rapply</span> (<span class="id" title="var">isequiv_homotopic</span> <span class="id" title="var">_</span> (<span class="id" title="var">O_functor_compose</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">OO_inverts_conn_map_isconnected_domain</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">O'</span> <span class="id" title="var">O</span> : <span class="id" title="var">ReflectiveSubuniverse</span>) `{<span class="id" title="var">O</span> &lt;&lt; <span class="id" title="var">O'</span>, <span class="id" title="var">O</span> &lt;&lt;&lt; <span class="id" title="var">O'</span>, <span class="id" title="var">O'</span> &lt;= <span class="id" title="var">Sep</span> <span class="id" title="var">O</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">Y</span> <span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">IsConnected</span> <span class="id" title="var">O'</span> <span class="id" title="var">Y</span>} `{<span class="id" title="var">IsConnMap</span> <span class="id" title="var">O</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">O_inverts</span> <span class="id" title="var">O'</span> <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">OO_inverts_conn_map_factor_conn_map</span> <span class="id" title="var">O'</span> <span class="id" title="var">O</span> <span class="id" title="var">f</span> (<span class="id" title="var">const_tt</span> <span class="id" title="var">_</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Here is the converse of <span class="inlinecode"><span class="id" title="var">ooextendable_TypeO_lex_leq</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">O_lex_leq_extendable_TypeO</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">O'</span> <span class="id" title="var">O</span> : <span class="id" title="var">ReflectiveSubuniverse</span>) `{<span class="id" title="var">O</span> &lt;&lt; <span class="id" title="var">O'</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span>:<span class="id" title="keyword">Type</span>) (<span class="id" title="var">g</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="var">Type_</span> <span class="id" title="var">O</span>), <span class="id" title="var">ExtensionAlong</span> (<span class="id" title="var">to</span> <span class="id" title="var">O'</span> <span class="id" title="var">A</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">Type_</span> <span class="id" title="var">O</span>) <span class="id" title="var">g</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">O</span> &lt;&lt;&lt; <span class="id" title="var">O'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span>; <span class="id" title="var">unshelve</span> <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">P'</span> <span class="id" title="var">P_inO</span>; <span class="id" title="tactic">pose</span> (<span class="id" title="var">P</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; (<span class="id" title="var">P'</span> <span class="id" title="var">x</span> ; <span class="id" title="var">P_inO</span> <span class="id" title="var">x</span>) : <span class="id" title="var">Type_</span> <span class="id" title="var">O</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; ((<span class="id" title="var">e</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span>).1 <span class="id" title="var">x</span>).1).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; ((<span class="id" title="var">e</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span>).1 <span class="id" title="var">x</span>).2).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_path</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (((<span class="id" title="var">e</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span>).2 <span class="id" title="var">x</span>)..1).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
And a version for the accessible case. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">O_lex_leq_inO_TypeO</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">O'</span> <span class="id" title="var">O</span> : <span class="id" title="var">ReflectiveSubuniverse</span>) `{<span class="id" title="var">O</span> &lt;&lt; <span class="id" title="var">O'</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">IsAccRSU</span> <span class="id" title="var">O'</span>} `{<span class="id" title="var">In</span> (<span class="id" title="var">lift_accrsu</span> <span class="id" title="var">O'</span>) (<span class="id" title="var">Type_</span> <span class="id" title="var">O</span>)}<br/>
&nbsp;&nbsp;: <span class="id" title="var">O</span> &lt;&lt;&lt; <span class="id" title="var">O'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">O_lex_leq_extendable_TypeO</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">g</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">O_inverts</span> (<span class="id" title="var">lift_accrsu</span> <span class="id" title="var">O'</span>) (<span class="id" title="var">to</span> <span class="id" title="var">O'</span> <span class="id" title="var">A</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="var">rapply</span> (<span class="id" title="var">O_inverts_O_leq'</span> (<span class="id" title="var">lift_accrsu</span> <span class="id" title="var">O'</span>) <span class="id" title="var">O'</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">fst</span> (<span class="id" title="var">ooextendable_O_inverts</span> (<span class="id" title="var">lift_accrsu</span> <span class="id" title="var">O'</span>) (<span class="id" title="var">to</span> <span class="id" title="var">O'</span> <span class="id" title="var">A</span>) (<span class="id" title="var">Type_</span> <span class="id" title="var">O</span>) 1%<span class="id" title="var">nat</span>) <span class="id" title="var">g</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>