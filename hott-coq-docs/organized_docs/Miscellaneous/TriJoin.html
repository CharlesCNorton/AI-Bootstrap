<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>TriJoin</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library TriJoin</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Basics</span> <span class="id" title="var">Types.Paths</span> <span class="id" title="var">WildCat</span> <span class="id" title="var">Join.Core</span> <span class="id" title="var">HoTT.Tactics</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1174"></a><h1 class="section">Induction and recursion principles for the triple join</h1>


<div class="paragraph"> </div>

  We show that the triple join satisfies symmetrical induction and recursion principles and prove that the recursion principle gives an equivalence of 0-groupoids.  We use this in JoinAssoc.v to prove that the join is associative.  Our approach parallels what is done in the two-variable case in Join/Core.v, especially starting with <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span> here and <span class="inlinecode"><span class="id" title="var">JoinRecData</span></span> there.  That case is much simpler, so should be read first. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">TriJoinStructure</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">TriJoin</span> := <span class="id" title="var">Join</span> <span class="id" title="var">A</span> (<span class="id" title="var">Join</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">join1</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">TriJoin</span> := <span class="id" title="var">joinl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">join2</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">TriJoin</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> =&gt; (<span class="id" title="var">joinr</span> (<span class="id" title="var">joinl</span> <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">join3</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">TriJoin</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">c</span> =&gt; (<span class="id" title="var">joinr</span> (<span class="id" title="var">joinr</span> <span class="id" title="var">c</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">join12</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">join1</span> <span class="id" title="var">a</span> = <span class="id" title="var">join2</span> <span class="id" title="var">b</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> =&gt; <span class="id" title="var">jglue</span> <span class="id" title="var">a</span> (<span class="id" title="var">joinl</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">join13</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>, <span class="id" title="var">join1</span> <span class="id" title="var">a</span> = <span class="id" title="var">join3</span> <span class="id" title="var">c</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span> =&gt; <span class="id" title="var">jglue</span> <span class="id" title="var">a</span> (<span class="id" title="var">joinr</span> <span class="id" title="var">c</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">join23</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">join2</span> <span class="id" title="var">b</span> = <span class="id" title="var">join3</span> <span class="id" title="var">c</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> =&gt; <span class="id" title="var">ap</span> <span class="id" title="var">joinr</span> (<span class="id" title="var">jglue</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">join123</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">join12</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> @ <span class="id" title="var">join23</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> = <span class="id" title="var">join13</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> =&gt; <span class="id" title="var">triangle_v</span> <span class="id" title="var">a</span> (<span class="id" title="var">jglue</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>).<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">TriJoinStructure</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1175"></a><h2 class="section"><span class="inlinecode"><span class="id" title="var">ap_trijoin</span></span> and <span class="inlinecode"><span class="id" title="var">ap_trijoin_transport</span></span></h2>

<div class="paragraph"> </div>

 Functions send triangles to triangles. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_triangle</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">X</span>} {<span class="id" title="var">ab</span> : <span class="id" title="var">a</span> = <span class="id" title="var">b</span>} {<span class="id" title="var">bc</span> : <span class="id" title="var">b</span> = <span class="id" title="var">c</span>} {<span class="id" title="var">ac</span> : <span class="id" title="var">a</span> = <span class="id" title="var">c</span>} (<span class="id" title="var">abc</span> : <span class="id" title="var">ab</span> @ <span class="id" title="var">bc</span> = <span class="id" title="var">ac</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">ab</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">bc</span> = <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">ac</span><br/>
&nbsp;&nbsp;:= (<span class="id" title="var">ap_pp</span> <span class="id" title="var">f</span> <span class="id" title="var">ab</span> <span class="id" title="var">bc</span>)^ @ <span class="id" title="var">ap</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>) <span class="id" title="var">abc</span>.<br/>

<br/>
</div>

<div class="doc">
This general result abstracts away the situation where <span class="inlinecode"><span class="id" title="var">J</span></span> is <span class="inlinecode"><span class="id" title="var">TriJoin</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span>, <span class="inlinecode"><span class="id" title="var">a</span></span> is <span class="inlinecode"><span class="id" title="var">joinl</span></span> <span class="inlinecode"><span class="id" title="var">a'</span></span> for some <span class="inlinecode"><span class="id" title="var">a'</span></span>, <span class="inlinecode"><span class="id" title="var">jr</span></span> is <span class="inlinecode"><span class="id" title="var">joinr</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">Join</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">J</span></span>, <span class="inlinecode"><span class="id" title="var">jg</span></span> is <span class="inlinecode"><span class="id" title="keyword">fun</span></span> <span class="inlinecode"><span class="id" title="var">w</span></span> <span class="inlinecode">=&gt;</span> <span class="inlinecode"><span class="id" title="var">jglue</span></span> <span class="inlinecode"><span class="id" title="var">a'</span></span> <span class="inlinecode"><span class="id" title="var">w</span></span>, and <span class="inlinecode"><span class="id" title="var">p</span></span> is <span class="inlinecode"><span class="id" title="var">jglue</span></span> <span class="inlinecode"><span class="id" title="var">b</span></span> <span class="inlinecode"><span class="id" title="var">c</span></span>.  By working in this generality, we can do induction on <span class="inlinecode"><span class="id" title="var">p</span></span>.  This also allows us to inline the proof of <span class="inlinecode"><span class="id" title="var">triangle_v</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_trijoin_general</span> {<span class="id" title="var">J</span> <span class="id" title="var">W</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">J</span> -&gt; <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">a</span> : <span class="id" title="var">J</span>) (<span class="id" title="var">jr</span> : <span class="id" title="var">W</span> -&gt; <span class="id" title="var">J</span>) (<span class="id" title="var">jg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">w</span>, <span class="id" title="var">a</span> = <span class="id" title="var">jr</span> <span class="id" title="var">w</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">W</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">b</span> = <span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">jg</span> <span class="id" title="var">b</span>) @ <span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">ap</span> <span class="id" title="var">jr</span> <span class="id" title="var">p</span>) = <span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">jg</span> <span class="id" title="var">c</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ap_triangle</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">concat_p1</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Functions send the canonical triangles in triple joins to triangles. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_trijoin</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> -&gt; <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">B</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">join12</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) @ <span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">join23</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>) = <span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">join13</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">nrapply</span> <span class="id" title="var">ap_trijoin_general</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_trijoin_general_transport</span> {<span class="id" title="var">J</span> <span class="id" title="var">W</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">J</span> -&gt; <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">a</span> : <span class="id" title="var">J</span>) (<span class="id" title="var">jr</span> : <span class="id" title="var">W</span> -&gt; <span class="id" title="var">J</span>) (<span class="id" title="var">jg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">w</span>, <span class="id" title="var">a</span> = <span class="id" title="var">jr</span> <span class="id" title="var">w</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">W</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">b</span> = <span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap_trijoin_general</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">jr</span> <span class="id" title="var">jg</span> <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= (1 @@ <span class="id" title="var">ap_compose</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span>)^ @ (<span class="id" title="var">transport_paths_Fr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">apD</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">jg</span> <span class="id" title="var">x</span>)) <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ap_trijoin_general</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">jg</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_trijoin_transport</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> -&gt; <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">B</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap_trijoin</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= (1 @@ <span class="id" title="var">ap_compose</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span>)^ @ (<span class="id" title="var">transport_paths_Fr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">apD</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">jglue</span> <span class="id" title="var">a</span> <span class="id" title="var">x</span>)) (<span class="id" title="var">jglue</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">nrapply</span> <span class="id" title="var">ap_trijoin_general_transport</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_trijoin_general_V</span> {<span class="id" title="var">J</span> <span class="id" title="var">W</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">J</span> -&gt; <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">a</span> : <span class="id" title="var">J</span>) (<span class="id" title="var">jr</span> : <span class="id" title="var">W</span> -&gt; <span class="id" title="var">J</span>) (<span class="id" title="var">jg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">w</span>, <span class="id" title="var">a</span> = <span class="id" title="var">jr</span> <span class="id" title="var">w</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">W</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">b</span> = <span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap_trijoin_general</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">jr</span> <span class="id" title="var">jg</span> <span class="id" title="var">p</span>^<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= (1 @@ (<span class="id" title="var">ap</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>) (<span class="id" title="var">ap_V</span> <span class="id" title="var">jr</span> <span class="id" title="var">p</span>) @ <span class="id" title="var">ap_V</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span>)) @ <span class="id" title="var">moveR_pV</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">ap_trijoin_general</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">jr</span> <span class="id" title="var">jg</span> <span class="id" title="var">p</span>)^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ap_trijoin_general</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">induction</span> (<span class="id" title="var">jg</span> <span class="id" title="var">b</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_trijoin_V</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> -&gt; <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">B</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap_triangle</span> <span class="id" title="var">f</span> (<span class="id" title="var">triangle_v</span> <span class="id" title="var">a</span> (<span class="id" title="var">jglue</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>)^)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= (1 @@ (<span class="id" title="var">ap</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>) (<span class="id" title="var">ap_V</span> <span class="id" title="var">joinr</span> <span class="id" title="var">_</span>) @ <span class="id" title="var">ap_V</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span>)) @ <span class="id" title="var">moveR_pV</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">ap_trijoin</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>)^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">nrapply</span> <span class="id" title="var">ap_trijoin_general_V</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1176"></a><h2 class="section">The induction principle for the triple join</h2>

<div class="paragraph"> </div>

 A lemma that handles the path algebra in the final step. 
</div>
<div class="code">
<span class="id" title="keyword">Local Definition</span> <span class="id" title="var">trijoin_ind_helper</span> {<span class="id" title="var">A</span> <span class="id" title="var">BC</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">Join</span> <span class="id" title="var">A</span> <span class="id" title="var">BC</span> -&gt; <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">BC</span>) (<span class="id" title="var">bc</span> : <span class="id" title="var">b</span> = <span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">j1'</span> : <span class="id" title="var">P</span> (<span class="id" title="var">joinl</span> <span class="id" title="var">a</span>)) (<span class="id" title="var">j2'</span> : <span class="id" title="var">P</span> (<span class="id" title="var">joinr</span> <span class="id" title="var">b</span>)) (<span class="id" title="var">j3'</span> : <span class="id" title="var">P</span> (<span class="id" title="var">joinr</span> <span class="id" title="var">c</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">j12'</span> : <span class="id" title="var">jglue</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> # <span class="id" title="var">j1'</span> = <span class="id" title="var">j2'</span>) (<span class="id" title="var">j13'</span> : <span class="id" title="var">jglue</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span> # <span class="id" title="var">j1'</span> = <span class="id" title="var">j3'</span>) (<span class="id" title="var">j23'</span> : (<span class="id" title="var">ap</span> <span class="id" title="var">joinr</span> <span class="id" title="var">bc</span>) # <span class="id" title="var">j2'</span> = <span class="id" title="var">j3'</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">j123'</span> : <span class="id" title="var">transport_pp</span> <span class="id" title="var">_</span> (<span class="id" title="var">jglue</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) (<span class="id" title="var">ap</span> <span class="id" title="var">joinr</span> <span class="id" title="var">bc</span>) <span class="id" title="var">j1'</span> @ <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">_</span> (<span class="id" title="var">ap</span> <span class="id" title="var">joinr</span> <span class="id" title="var">bc</span>)) <span class="id" title="var">j12'</span> @ <span class="id" title="var">j23'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">transport2</span> <span class="id" title="var">_</span> (<span class="id" title="var">triangle_v</span> <span class="id" title="var">a</span> <span class="id" title="var">bc</span>) <span class="id" title="var">_</span> @ <span class="id" title="var">j13'</span>)<br/>
&nbsp;&nbsp;: ((<span class="id" title="var">apD</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> : <span class="id" title="var">BC</span> =&gt; <span class="id" title="var">transport</span> <span class="id" title="var">P</span> (<span class="id" title="var">jglue</span> <span class="id" title="var">a</span> <span class="id" title="var">x</span>) <span class="id" title="var">j1'</span>) <span class="id" title="var">bc</span>)^<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> : <span class="id" title="var">BC</span> =&gt; <span class="id" title="var">P</span> (<span class="id" title="var">joinr</span> <span class="id" title="var">x</span>)) <span class="id" title="var">bc</span>) <span class="id" title="var">j12'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ ((<span class="id" title="var">transport_compose</span> <span class="id" title="var">P</span> <span class="id" title="var">joinr</span> <span class="id" title="var">bc</span> <span class="id" title="var">j2'</span>) @ <span class="id" title="var">j23'</span>) = <span class="id" title="var">j13'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">bc</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">transport_pp_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">j123'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">transport</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">transport</span> <span class="id" title="tactic">in</span> <span class="id" title="var">j123'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">ap_idmap</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ap_idmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">j123'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_pp_p</span> <span class="id" title="tactic">in</span> <span class="id" title="var">j123'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cancelL</span> <span class="id" title="tactic">in</span> <span class="id" title="var">j123'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2 <span class="id" title="var">concat_1p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">j123'</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
An induction principle for the triple join. Note that the hypotheses are phrased completely in terms of the "constructors" of <span class="inlinecode"><span class="id" title="var">TriJoin</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_ind</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">P</span> : <span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> -&gt; <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">join1'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> (<span class="id" title="var">join1</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">join2'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">b</span>, <span class="id" title="var">P</span> (<span class="id" title="var">join2</span> <span class="id" title="var">b</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">join3'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">c</span>, <span class="id" title="var">P</span> (<span class="id" title="var">join3</span> <span class="id" title="var">c</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">join12'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">join12</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> # <span class="id" title="var">join1'</span> <span class="id" title="var">a</span> = <span class="id" title="var">join2'</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">join13'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>, <span class="id" title="var">join13</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span> # <span class="id" title="var">join1'</span> <span class="id" title="var">a</span> = <span class="id" title="var">join3'</span> <span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">join23'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">join23</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> # <span class="id" title="var">join2'</span> <span class="id" title="var">b</span> = <span class="id" title="var">join3'</span> <span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">join123'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">transport_pp</span> <span class="id" title="var">_</span> (<span class="id" title="var">join12</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) (<span class="id" title="var">join23</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>) (<span class="id" title="var">join1'</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">_</span> (<span class="id" title="var">join23</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>)) (<span class="id" title="var">join12'</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) @ <span class="id" title="var">join23'</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">transport2</span> <span class="id" title="var">_</span> (<span class="id" title="var">join123</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>) <span class="id" title="var">_</span> @ <span class="id" title="var">join13'</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Join_ind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">join1'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">snrapply</span> <span class="id" title="var">Join_ind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">join2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">join3'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">rapply</span> (<span class="id" title="var">transport_compose</span> <span class="id" title="var">P</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">join23'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Join_ind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">join12'</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">join13'</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>; <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span> <span class="id" title="keyword">zeta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> (<span class="id" title="var">transport_paths_FlFr_D</span> (<span class="id" title="var">jglue</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> (1 @@ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="var">nrapply</span> <span class="id" title="var">Join_ind_beta_jglue</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">trijoin_ind_helper</span>, <span class="id" title="var">join123'</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1177"></a><h2 class="section">The recursion principle for the triple join, and many results about it</h2>

<div class="paragraph"> </div>

 We'll bundle up the arguments into a record. 
</div>
<div class="code">
<span class="id" title="keyword">Record</span> <span class="id" title="var">TriJoinRecData</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j1</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j2</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">P</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j3</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">P</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j12</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">j1</span> <span class="id" title="var">a</span> = <span class="id" title="var">j2</span> <span class="id" title="var">b</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j13</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>, <span class="id" title="var">j1</span> <span class="id" title="var">a</span> = <span class="id" title="var">j3</span> <span class="id" title="var">c</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j23</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">j2</span> <span class="id" title="var">b</span> = <span class="id" title="var">j3</span> <span class="id" title="var">c</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j123</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">j12</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> @ <span class="id" title="var">j23</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> = <span class="id" title="var">j13</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>;<br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">TriJoinRecData</span> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">Build_TriJoinRecData</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>}%<span class="id" title="var">_type_scope</span> (<span class="id" title="var">j1</span> <span class="id" title="var">j2</span> <span class="id" title="var">j3</span> <span class="id" title="var">j12</span> <span class="id" title="var">j13</span> <span class="id" title="var">j23</span> <span class="id" title="var">j123</span>)%<span class="id" title="var">_function_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_rec</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> $-&gt; <span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Join_rec</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">j1</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">snrapply</span> <span class="id" title="var">Join_rec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">j2</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">j3</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">j23</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Join_ind</span>; <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">j12</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">j13</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">transport_paths_Fr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (1 @@ <span class="id" title="var">Join_rec_beta_jglue</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> @ <span class="id" title="var">j123</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Beta rules for the recursion principle. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_rec_beta_join12</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap</span> (<span class="id" title="var">trijoin_rec</span> <span class="id" title="var">f</span>) (<span class="id" title="var">join12</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) = <span class="id" title="var">j12</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">Join_rec_beta_jglue</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_rec_beta_join13</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap</span> (<span class="id" title="var">trijoin_rec</span> <span class="id" title="var">f</span>) (<span class="id" title="var">join13</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>) = <span class="id" title="var">j13</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">Join_rec_beta_jglue</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_rec_beta_join23</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">B</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap</span> (<span class="id" title="var">trijoin_rec</span> <span class="id" title="var">f</span>) (<span class="id" title="var">join23</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>) = <span class="id" title="var">j23</span> <span class="id" title="var">f</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">trijoin_rec</span>, <span class="id" title="var">join23</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lhs_V</span> <span class="id" title="var">nrapply</span> (<span class="id" title="var">ap_compose</span> <span class="id" title="var">joinr</span>); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Join_rec_beta_jglue</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Local Lemma</span> <span class="id" title="var">trijoin_rec_beta_join123_helper</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">u0</span> <span class="id" title="var">u1</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} {<span class="id" title="var">p0</span> <span class="id" title="var">p1</span> <span class="id" title="var">r1</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>} {<span class="id" title="var">q0</span> <span class="id" title="var">s1</span> <span class="id" title="var">t1</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">p0</span> = <span class="id" title="var">p1</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">q0</span> = <span class="id" title="var">u0</span> @ <span class="id" title="var">p0</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">p0</span> = <span class="id" title="var">r1</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="var">u1</span> @ <span class="id" title="var">r1</span> = <span class="id" title="var">s1</span>) (<span class="id" title="var">t</span> : <span class="id" title="var">s1</span> = <span class="id" title="var">t1</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">u0</span> = <span class="id" title="var">u1</span>)<br/>
&nbsp;&nbsp;: ((1 @@ <span class="id" title="var">p</span>)^ @ <span class="id" title="var">q</span>^) @ (((<span class="id" title="var">q</span> @ (<span class="id" title="var">u</span> @@ 1)) @ ((1 @@ <span class="id" title="var">r</span>) @ <span class="id" title="var">s</span>)) @ <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= ((<span class="id" title="var">u</span> @@ (<span class="id" title="var">p</span>^ @ <span class="id" title="var">r</span>)) @ <span class="id" title="var">s</span>) @ <span class="id" title="var">t</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">u</span>, <span class="id" title="var">t</span>, <span class="id" title="var">s</span>, <span class="id" title="var">r</span>, <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">q0</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">paths_ind_r</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_rec_beta_join123</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">B</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap_trijoin</span> (<span class="id" title="var">trijoin_rec</span> <span class="id" title="var">f</span>) <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= (<span class="id" title="var">trijoin_rec_beta_join12</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> @@ <span class="id" title="var">trijoin_rec_beta_join23</span> <span class="id" title="var">f</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">j123</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> @ (<span class="id" title="var">trijoin_rec_beta_join13</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>)^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Expand&nbsp;the&nbsp;LHS:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">lhs</span> <span class="id" title="var">nrapply</span> <span class="id" title="var">ap_trijoin_transport</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">apD_homotopic</span> (<span class="id" title="var">Join_rec_beta_jglue</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) (<span class="id" title="var">jglue</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Join_ind_beta_jglue</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Change&nbsp;<span class="inlinecode"><span class="id" title="var">ap</span></span> <span class="inlinecode">(<span class="id" title="var">transport</span></span> <span class="inlinecode"><span class="id" title="var">__</span>)</span> <span class="inlinecode"><span class="id" title="var">_</span></span>&nbsp;on&nbsp;LHS.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">concat_p_pp</span> <span class="id" title="var">_</span> (<span class="id" title="var">transport_paths_Fr</span> (<span class="id" title="var">jglue</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>) (<span class="id" title="var">j12</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>)) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">concat_Ap</span> (<span class="id" title="var">transport_paths_Fr</span> (<span class="id" title="var">jglue</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>))).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Everything&nbsp;that&nbsp;remains&nbsp;is&nbsp;pure&nbsp;path&nbsp;algebra.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" title="var">trijoin_rec_beta_join23</span></span>&nbsp;expands&nbsp;to&nbsp;something&nbsp;of&nbsp;the&nbsp;form&nbsp;<span class="inlinecode"><span class="id" title="var">p</span>^</span> <span class="inlinecode">@</span> <span class="inlinecode"><span class="id" title="var">r</span></span>,&nbsp;so&nbsp;that's&nbsp;what&nbsp;is&nbsp;in&nbsp;the&nbsp;lemma.&nbsp;&nbsp;One&nbsp;can&nbsp;unfold&nbsp;it&nbsp;to&nbsp;see&nbsp;this,&nbsp;but&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="keyword">Qed</span></span>&nbsp;is&nbsp;a&nbsp;bit&nbsp;faster&nbsp;without&nbsp;this:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;unfold&nbsp;trijoin_rec_beta_join23.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Note&nbsp;that&nbsp;one&nbsp;of&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">ap</span></span>s&nbsp;on&nbsp;the&nbsp;LHS&nbsp;computes&nbsp;to&nbsp;<span class="inlinecode"><span class="id" title="var">u</span></span> <span class="inlinecode">@@</span> <span class="inlinecode">1</span>,&nbsp;so&nbsp;that's&nbsp;what&nbsp;is&nbsp;in&nbsp;the&nbsp;lemma:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;change&nbsp;(ap&nbsp;(fun&nbsp;q&nbsp;=&gt;&nbsp;q&nbsp;@&nbsp;?x)&nbsp;?u)&nbsp;with&nbsp;(u&nbsp;@@&nbsp;@idpath&nbsp;_&nbsp;x).&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">nrapply</span> <span class="id" title="var">trijoin_rec_beta_join123_helper</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We're next going to define a map in the other direction.  We do it via showing that <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span> is a 0-coherent 1-functor to <span class="inlinecode"><span class="id" title="keyword">Type</span></span>. We'll later show that it is a 1-functor to 0-groupoids. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoinrecdata_fun</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">g</span> : <span class="id" title="var">P</span> -&gt; <span class="id" title="var">Q</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">Q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Build_TriJoinRecData</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">j1</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">j2</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">j3</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> =&gt; <span class="id" title="var">ap</span> <span class="id" title="var">g</span> (<span class="id" title="var">j12</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span> =&gt; <span class="id" title="var">ap</span> <span class="id" title="var">g</span> (<span class="id" title="var">j13</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> =&gt; <span class="id" title="var">ap</span> <span class="id" title="var">g</span> (<span class="id" title="var">j23</span> <span class="id" title="var">f</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>; <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">ap_triangle</span> <span class="id" title="var">g</span> (<span class="id" title="var">j123</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>)).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;last&nbsp;four&nbsp;goals&nbsp;above&nbsp;can&nbsp;also&nbsp;be&nbsp;handled&nbsp;by&nbsp;the&nbsp;induction&nbsp;tactics&nbsp;below,&nbsp;but&nbsp;it's&nbsp;useful&nbsp;to&nbsp;be&nbsp;concrete.&nbsp;*)</span><br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The triple join itself has canonical <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoinrecdata_trijoin</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> (<span class="id" title="var">Join</span> <span class="id" title="var">A</span> (<span class="id" title="var">Join</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>))<br/>
&nbsp;&nbsp;:= <span class="id" title="var">Build_TriJoinRecData</span> <span class="id" title="var">join1</span> <span class="id" title="var">join2</span> <span class="id" title="var">join3</span> <span class="id" title="var">join12</span> <span class="id" title="var">join13</span> <span class="id" title="var">join23</span> <span class="id" title="var">join123</span>.<br/>

<br/>
</div>

<div class="doc">
Combining these gives a function going in the opposite direction to <span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_rec_inv</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> -&gt; <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">trijoinrecdata_fun</span> <span class="id" title="var">f</span> (<span class="id" title="var">trijoinrecdata_trijoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>).<br/>

<br/>
</div>

<div class="doc">
Under <span class="inlinecode"><span class="id" title="var">Funext</span></span>, <span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span> and <span class="inlinecode"><span class="id" title="var">trijoin_rec_inv</span></span> should be inverse equivalences.  We'll avoid <span class="inlinecode"><span class="id" title="var">Funext</span></span> and show that they are equivalences of 0-groupoids, where we choose the path structures carefully. 
<div class="paragraph"> </div>

<a id="lab1178"></a><h2 class="section">The graph structure on <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span></h2>

<div class="paragraph"> </div>

 The type of fillers for a triangular prism with five 2d faces <span class="inlinecode"><span class="id" title="var">abc</span></span>, <span class="inlinecode"><span class="id" title="var">abc'</span></span>, <span class="inlinecode"><span class="id" title="var">k12</span></span>, <span class="inlinecode"><span class="id" title="var">k13</span></span>, <span class="inlinecode"><span class="id" title="var">k23</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">prism</span> {<span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">P</span>} {<span class="id" title="var">ab</span> : <span class="id" title="var">a</span> = <span class="id" title="var">b</span>} {<span class="id" title="var">ac</span> : <span class="id" title="var">a</span> = <span class="id" title="var">c</span>} {<span class="id" title="var">bc</span> : <span class="id" title="var">b</span> = <span class="id" title="var">c</span>} (<span class="id" title="var">abc</span> : <span class="id" title="var">ab</span> @ <span class="id" title="var">bc</span> = <span class="id" title="var">ac</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">a'</span> <span class="id" title="var">b'</span> <span class="id" title="var">c'</span> : <span class="id" title="var">P</span>} {<span class="id" title="var">ab'</span> : <span class="id" title="var">a'</span> = <span class="id" title="var">b'</span>} {<span class="id" title="var">ac'</span> : <span class="id" title="var">a'</span> = <span class="id" title="var">c'</span>} {<span class="id" title="var">bc'</span> : <span class="id" title="var">b'</span> = <span class="id" title="var">c'</span>} (<span class="id" title="var">abc'</span> : <span class="id" title="var">ab'</span> @ <span class="id" title="var">bc'</span> = <span class="id" title="var">ac'</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">k1</span> : <span class="id" title="var">a</span> = <span class="id" title="var">a'</span>} {<span class="id" title="var">k2</span> : <span class="id" title="var">b</span> = <span class="id" title="var">b'</span>} {<span class="id" title="var">k3</span> : <span class="id" title="var">c</span> = <span class="id" title="var">c'</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">k12</span> : <span class="id" title="var">ab</span> @ <span class="id" title="var">k2</span> = <span class="id" title="var">k1</span> @ <span class="id" title="var">ab'</span>) (<span class="id" title="var">k13</span> : <span class="id" title="var">ac</span> @ <span class="id" title="var">k3</span> = <span class="id" title="var">k1</span> @ <span class="id" title="var">ac'</span>) (<span class="id" title="var">k23</span> : <span class="id" title="var">bc</span> @ <span class="id" title="var">k3</span> = <span class="id" title="var">k2</span> @ <span class="id" title="var">bc'</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">concat_p_pp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> @ <span class="id" title="var">whiskerR</span> <span class="id" title="var">abc</span> <span class="id" title="var">k3</span> @ <span class="id" title="var">k13</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">whiskerL</span> <span class="id" title="var">ab</span> <span class="id" title="var">k23</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">concat_p_pp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> @ <span class="id" title="var">whiskerR</span> <span class="id" title="var">k12</span> <span class="id" title="var">bc'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">concat_pp_p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> @ <span class="id" title="var">whiskerL</span> <span class="id" title="var">k1</span> <span class="id" title="var">abc'</span>.<br/>

<br/>
</div>

<div class="doc">
The "identity" filler is slightly non-trivial, because the fillers for the squares, e.g. <span class="inlinecode"><span class="id" title="var">ab</span></span> <span class="inlinecode">@</span> <span class="inlinecode">1</span> <span class="inlinecode">=</span> <span class="inlinecode">1</span> <span class="inlinecode">@</span> <span class="inlinecode"><span class="id" title="var">ab</span></span>, must be non-trivial. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">prism_id</span> {<span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">P</span>} {<span class="id" title="var">ab</span> : <span class="id" title="var">a</span> = <span class="id" title="var">b</span>} {<span class="id" title="var">ac</span> : <span class="id" title="var">a</span> = <span class="id" title="var">c</span>} {<span class="id" title="var">bc</span> : <span class="id" title="var">b</span> = <span class="id" title="var">c</span>} (<span class="id" title="var">abc</span> : <span class="id" title="var">ab</span> @ <span class="id" title="var">bc</span> = <span class="id" title="var">ac</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">prism</span> <span class="id" title="var">abc</span> <span class="id" title="var">abc</span> (<span class="id" title="var">equiv_p1_1q</span> <span class="id" title="var">idpath</span>) (<span class="id" title="var">equiv_p1_1q</span> <span class="id" title="var">idpath</span>) (<span class="id" title="var">equiv_p1_1q</span> <span class="id" title="var">idpath</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ab</span>, <span class="id" title="var">bc</span>, <span class="id" title="var">abc</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The paths between elements of <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span>.  Under <span class="inlinecode"><span class="id" title="var">Funext</span></span>, this type will be equivalent to the identity type.  But without <span class="inlinecode"><span class="id" title="var">Funext</span></span>, this definition will be more useful. 
</div>
<div class="code">
<span class="id" title="keyword">Record</span> <span class="id" title="var">TriJoinRecPath</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>} := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">h1</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">j1</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> = <span class="id" title="var">j1</span> <span class="id" title="var">g</span> <span class="id" title="var">a</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">h2</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">b</span>, <span class="id" title="var">j2</span> <span class="id" title="var">f</span> <span class="id" title="var">b</span> = <span class="id" title="var">j2</span> <span class="id" title="var">g</span> <span class="id" title="var">b</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">h3</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">c</span>, <span class="id" title="var">j3</span> <span class="id" title="var">f</span> <span class="id" title="var">c</span> = <span class="id" title="var">j3</span> <span class="id" title="var">g</span> <span class="id" title="var">c</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">h12</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">j12</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> @ <span class="id" title="var">h2</span> <span class="id" title="var">b</span> = <span class="id" title="var">h1</span> <span class="id" title="var">a</span> @ <span class="id" title="var">j12</span> <span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">h13</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>, <span class="id" title="var">j13</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span> @ <span class="id" title="var">h3</span> <span class="id" title="var">c</span> = <span class="id" title="var">h1</span> <span class="id" title="var">a</span> @ <span class="id" title="var">j13</span> <span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">h23</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">j23</span> <span class="id" title="var">f</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> @ <span class="id" title="var">h3</span> <span class="id" title="var">c</span> = <span class="id" title="var">h2</span> <span class="id" title="var">b</span> @ <span class="id" title="var">j23</span> <span class="id" title="var">g</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">h123</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">prism</span> (<span class="id" title="var">j123</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>) (<span class="id" title="var">j123</span> <span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>) (<span class="id" title="var">h12</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) (<span class="id" title="var">h13</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>) (<span class="id" title="var">h23</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>);<br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">TriJoinRecPath</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>} <span class="id" title="var">f</span> <span class="id" title="var">g</span>.<br/>

<br/>
</div>

<div class="doc">
We also define data for <span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span> that unbundles the first three components.  This lets us talk about paths between two such when the first three components are definitionally equal. This is a common special case, and this set-up greatly simplifies a lot of path algebra in later proofs. 
</div>
<div class="code">
<span class="id" title="keyword">Record</span> <span class="id" title="var">TriJoinRecData'</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">j1'</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span>} {<span class="id" title="var">j2'</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">P</span>} {<span class="id" title="var">j3'</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">P</span>} := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j12'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">j1'</span> <span class="id" title="var">a</span> = <span class="id" title="var">j2'</span> <span class="id" title="var">b</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j13'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>, <span class="id" title="var">j1'</span> <span class="id" title="var">a</span> = <span class="id" title="var">j3'</span> <span class="id" title="var">c</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j23'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">j2'</span> <span class="id" title="var">b</span> = <span class="id" title="var">j3'</span> <span class="id" title="var">c</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j123'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">j12'</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> @ <span class="id" title="var">j23'</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> = <span class="id" title="var">j13'</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>;<br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">TriJoinRecData'</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>} <span class="id" title="var">j1'</span> <span class="id" title="var">j2'</span> <span class="id" title="var">j3'</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">Build_TriJoinRecData'</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>}%<span class="id" title="var">_type_scope</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">j1'</span> <span class="id" title="var">j2'</span> <span class="id" title="var">j3'</span> <span class="id" title="var">j12'</span> <span class="id" title="var">j13'</span> <span class="id" title="var">j23'</span> <span class="id" title="var">j123'</span>)%<span class="id" title="var">_function_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">prism'</span> {<span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">ab</span> : <span class="id" title="var">a</span> = <span class="id" title="var">b</span>} {<span class="id" title="var">ac</span> : <span class="id" title="var">a</span> = <span class="id" title="var">c</span>} {<span class="id" title="var">bc</span> : <span class="id" title="var">b</span> = <span class="id" title="var">c</span>} (<span class="id" title="var">abc</span> : <span class="id" title="var">ab</span> @ <span class="id" title="var">bc</span> = <span class="id" title="var">ac</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">ab'</span> : <span class="id" title="var">a</span> = <span class="id" title="var">b</span>} {<span class="id" title="var">ac'</span> : <span class="id" title="var">a</span> = <span class="id" title="var">c</span>} {<span class="id" title="var">bc'</span> : <span class="id" title="var">b</span> = <span class="id" title="var">c</span>} (<span class="id" title="var">abc'</span> : <span class="id" title="var">ab'</span> @ <span class="id" title="var">bc'</span> = <span class="id" title="var">ac'</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">k12</span> : <span class="id" title="var">ab</span> = <span class="id" title="var">ab'</span>) (<span class="id" title="var">k13</span> : <span class="id" title="var">ac</span> = <span class="id" title="var">ac'</span>) (<span class="id" title="var">k23</span> : <span class="id" title="var">bc</span> = <span class="id" title="var">bc'</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">abc</span> @ <span class="id" title="var">k13</span> = (<span class="id" title="var">k12</span> @@ <span class="id" title="var">k23</span>) @ <span class="id" title="var">abc'</span>.<br/>

<br/>
<span class="id" title="keyword">Record</span> <span class="id" title="var">TriJoinRecPath'</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">j1'</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span>} {<span class="id" title="var">j2'</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">P</span>} {<span class="id" title="var">j3'</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">TriJoinRecData'</span> <span class="id" title="var">j1'</span> <span class="id" title="var">j2'</span> <span class="id" title="var">j3'</span>} := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">h12'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">j12'</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> = <span class="id" title="var">j12'</span> <span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">h13'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>, <span class="id" title="var">j13'</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span> = <span class="id" title="var">j13'</span> <span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">h23'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">j23'</span> <span class="id" title="var">f</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> = <span class="id" title="var">j23'</span> <span class="id" title="var">g</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">h123'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">prism'</span> (<span class="id" title="var">j123'</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>) (<span class="id" title="var">j123'</span> <span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>) (<span class="id" title="var">h12'</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) (<span class="id" title="var">h13'</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>) (<span class="id" title="var">h23'</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>);<br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">TriJoinRecPath'</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>} {<span class="id" title="var">j1'</span> <span class="id" title="var">j2'</span> <span class="id" title="var">j3'</span>} <span class="id" title="var">f</span> <span class="id" title="var">g</span>.<br/>

<br/>
</div>

<div class="doc">
We can bundle and unbundle these types of data.  For unbundling, we just handle <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span> for now. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">bundle_trijoinrecdata</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">j1'</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span>} {<span class="id" title="var">j2'</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">P</span>} {<span class="id" title="var">j3'</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">TriJoinRecData'</span> <span class="id" title="var">j1'</span> <span class="id" title="var">j2'</span> <span class="id" title="var">j3'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">Build_TriJoinRecData</span> <span class="id" title="var">j1'</span> <span class="id" title="var">j2'</span> <span class="id" title="var">j3'</span> (<span class="id" title="var">j12'</span> <span class="id" title="var">f</span>) (<span class="id" title="var">j13'</span> <span class="id" title="var">f</span>) (<span class="id" title="var">j23'</span> <span class="id" title="var">f</span>) (<span class="id" title="var">j123'</span> <span class="id" title="var">f</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">unbundle_trijoinrecdata</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">TriJoinRecData'</span> (<span class="id" title="var">j1</span> <span class="id" title="var">f</span>) (<span class="id" title="var">j2</span> <span class="id" title="var">f</span>) (<span class="id" title="var">j3</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">Build_TriJoinRecData'</span> (<span class="id" title="var">j1</span> <span class="id" title="var">f</span>) (<span class="id" title="var">j2</span> <span class="id" title="var">f</span>) (<span class="id" title="var">j3</span> <span class="id" title="var">f</span>) (<span class="id" title="var">j12</span> <span class="id" title="var">f</span>) (<span class="id" title="var">j13</span> <span class="id" title="var">f</span>) (<span class="id" title="var">j23</span> <span class="id" title="var">f</span>) (<span class="id" title="var">j123</span> <span class="id" title="var">f</span>).<br/>

<br/>
</div>

<div class="doc">
The proof by induction that is easily available to us here is what saves work in more complicated contexts. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">bundle_prism</span> {<span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">ab</span> : <span class="id" title="var">a</span> = <span class="id" title="var">b</span>} {<span class="id" title="var">ac</span> : <span class="id" title="var">a</span> = <span class="id" title="var">c</span>} {<span class="id" title="var">bc</span> : <span class="id" title="var">b</span> = <span class="id" title="var">c</span>} (<span class="id" title="var">abc</span> : <span class="id" title="var">ab</span> @ <span class="id" title="var">bc</span> = <span class="id" title="var">ac</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">ab'</span> : <span class="id" title="var">a</span> = <span class="id" title="var">b</span>} {<span class="id" title="var">ac'</span> : <span class="id" title="var">a</span> = <span class="id" title="var">c</span>} {<span class="id" title="var">bc'</span> : <span class="id" title="var">b</span> = <span class="id" title="var">c</span>} (<span class="id" title="var">abc'</span> : <span class="id" title="var">ab'</span> @ <span class="id" title="var">bc'</span> = <span class="id" title="var">ac'</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">k12</span> : <span class="id" title="var">ab</span> = <span class="id" title="var">ab'</span>) (<span class="id" title="var">k13</span> : <span class="id" title="var">ac</span> = <span class="id" title="var">ac'</span>) (<span class="id" title="var">k23</span> : <span class="id" title="var">bc</span> = <span class="id" title="var">bc'</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">k123</span> : <span class="id" title="var">prism'</span> <span class="id" title="var">abc</span> <span class="id" title="var">abc'</span> <span class="id" title="var">k12</span> <span class="id" title="var">k13</span> <span class="id" title="var">k23</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">prism</span> <span class="id" title="var">abc</span> <span class="id" title="var">abc'</span> (<span class="id" title="var">equiv_p1_1q</span> <span class="id" title="var">k12</span>) (<span class="id" title="var">equiv_p1_1q</span> <span class="id" title="var">k13</span>) (<span class="id" title="var">equiv_p1_1q</span> <span class="id" title="var">k23</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ab</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">bc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">abc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">k12</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">k23</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">k13</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">prism'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">k123</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">moveR_Vp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">k123</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">k123</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">bundle_trijoinrecpath</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">j1'</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span>} {<span class="id" title="var">j2'</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">P</span>} {<span class="id" title="var">j3'</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">TriJoinRecData'</span> <span class="id" title="var">j1'</span> <span class="id" title="var">j2'</span> <span class="id" title="var">j3'</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">TriJoinRecPath'</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">TriJoinRecPath</span> (<span class="id" title="var">bundle_trijoinrecdata</span> <span class="id" title="var">f</span>) (<span class="id" title="var">bundle_trijoinrecdata</span> <span class="id" title="var">g</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Build_TriJoinRecPath</span>.<br/>
&nbsp;&nbsp;1, 2, 3: <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;1, 2, 3: <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_p1_1q</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">h12'</span> <span class="id" title="var">h</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">h13'</span> <span class="id" title="var">h</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">h23'</span> <span class="id" title="var">h</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span> <span class="id" title="keyword">zeta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">bundle_prism</span>, (<span class="id" title="var">h123'</span> <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
A tactic that helps us apply the previous result. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">bundle_trijoinrecpath</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- <span class="id" title="var">TriJoinRecPath</span> ?<span class="id" title="var">F</span> ?<span class="id" title="var">G</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">bundle_trijoinrecpath</span> (<span class="id" title="var">f</span>:=<span class="id" title="var">unbundle_trijoinrecdata</span> <span class="id" title="var">F</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">g</span>:=<span class="id" title="var">unbundle_trijoinrecdata</span> <span class="id" title="var">G</span>) <span class="id" title="var">_</span>) <span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Build_TriJoinRecPath'</span>.<br/>

<br/>
</div>

<div class="doc">
Using these paths, we can restate the beta rule for <span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span>.  The statement using <span class="inlinecode"><span class="id" title="var">TriJoinRecPath'</span></span> typechecks only because <span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span> computes definitionally on the path constructors. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_rec_beta'</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">TriJoinRecPath'</span> (<span class="id" title="var">unbundle_trijoinrecdata</span> (<span class="id" title="var">trijoin_rec_inv</span> (<span class="id" title="var">trijoin_rec</span> <span class="id" title="var">f</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">unbundle_trijoinrecdata</span> <span class="id" title="var">f</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Build_TriJoinRecPath'</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">trijoin_rec_beta_join12</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">trijoin_rec_beta_join13</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">trijoin_rec_beta_join23</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">prism'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_pM</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nrapply</span> <span class="id" title="var">trijoin_rec_beta_join123</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
We can upgrade this to an unprimed path. This says that <span class="inlinecode"><span class="id" title="var">trijoin_rec_inv</span></span> is split surjective. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_rec_beta</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">TriJoinRecPath</span> (<span class="id" title="var">trijoin_rec_inv</span> (<span class="id" title="var">trijoin_rec</span> <span class="id" title="var">f</span>)) <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">bundle_trijoinrecpath</span> (<span class="id" title="var">trijoin_rec_beta'</span> <span class="id" title="var">f</span>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab1179"></a><h2 class="section"><span class="inlinecode"><span class="id" title="var">trijoin_rec_inv</span></span> is an injective map between 0-groupoids</h2>

<div class="paragraph"> </div>

 We begin with a general purpose lemma. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">triangle_ind</span> {<span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">a</span> : <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">Q</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">P</span>) (<span class="id" title="var">ab</span> : <span class="id" title="var">a</span> = <span class="id" title="var">b</span>) (<span class="id" title="var">ac</span> : <span class="id" title="var">a</span> = <span class="id" title="var">c</span>) (<span class="id" title="var">bc</span> : <span class="id" title="var">b</span> = <span class="id" title="var">c</span>) (<span class="id" title="var">abc</span> : <span class="id" title="var">ab</span> @ <span class="id" title="var">bc</span> = <span class="id" title="var">ac</span>), <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="var">Q</span> <span class="id" title="var">a</span> <span class="id" title="var">a</span> <span class="id" title="var">idpath</span> <span class="id" title="var">idpath</span> <span class="id" title="var">idpath</span> <span class="id" title="var">idpath</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">forall</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">ab</span> <span class="id" title="var">ac</span> <span class="id" title="var">bc</span> <span class="id" title="var">abc</span>, <span class="id" title="var">Q</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">ab</span> <span class="id" title="var">ac</span> <span class="id" title="var">bc</span> <span class="id" title="var">abc</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ab</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">bc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">abc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">s</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
This lemma handles the path algebra in the last goal of the next result. 
</div>
<div class="code">
<span class="id" title="keyword">Local Definition</span> <span class="id" title="var">isinj_trijoin_rec_inv_helper</span> {<span class="id" title="var">J</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">J</span> -&gt; <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">J</span>} {<span class="id" title="var">ab</span> : <span class="id" title="var">a</span> = <span class="id" title="var">b</span>} {<span class="id" title="var">ac</span> : <span class="id" title="var">a</span> = <span class="id" title="var">c</span>} {<span class="id" title="var">bc</span> : <span class="id" title="var">b</span> = <span class="id" title="var">c</span>} {<span class="id" title="var">abc</span> : <span class="id" title="var">ab</span> @ <span class="id" title="var">bc</span> = <span class="id" title="var">ac</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">H1</span> : <span class="id" title="var">f</span> <span class="id" title="var">a</span> = <span class="id" title="var">g</span> <span class="id" title="var">a</span>} {<span class="id" title="var">H2</span> : <span class="id" title="var">f</span> <span class="id" title="var">b</span> = <span class="id" title="var">g</span> <span class="id" title="var">b</span>} {<span class="id" title="var">H3</span> : <span class="id" title="var">f</span> <span class="id" title="var">c</span> = <span class="id" title="var">g</span> <span class="id" title="var">c</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">H12</span> : <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">ab</span> @ <span class="id" title="var">H2</span> = <span class="id" title="var">H1</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">ab</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">H13</span> : <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">ac</span> @ <span class="id" title="var">H3</span> = <span class="id" title="var">H1</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">ac</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">H23</span> : <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">bc</span> @ <span class="id" title="var">H3</span> = <span class="id" title="var">H2</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">bc</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">H123</span> : <span class="id" title="var">prism</span> (<span class="id" title="var">ap_triangle</span> <span class="id" title="var">f</span> <span class="id" title="var">abc</span>) (<span class="id" title="var">ap_triangle</span> <span class="id" title="var">g</span> <span class="id" title="var">abc</span>) <span class="id" title="var">H12</span> <span class="id" title="var">H13</span> <span class="id" title="var">H23</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">transport_pp</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>) <span class="id" title="var">ab</span> <span class="id" title="var">bc</span> <span class="id" title="var">H1</span> @ <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>) <span class="id" title="var">bc</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">transport_paths_FlFr'</span> <span class="id" title="var">ab</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H12</span>)) @ <span class="id" title="var">transport_paths_FlFr'</span> <span class="id" title="var">bc</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H23</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">transport2</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>) <span class="id" title="var">abc</span> <span class="id" title="var">H1</span> @ <span class="id" title="var">transport_paths_FlFr'</span> <span class="id" title="var">ac</span> <span class="id" title="var">H1</span> <span class="id" title="var">H3</span> <span class="id" title="var">H13</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">ab</span> <span class="id" title="var">ac</span> <span class="id" title="var">bc</span> <span class="id" title="var">abc</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H12</span> <span class="id" title="var">H13</span> <span class="id" title="var">H23</span> <span class="id" title="var">H123</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">nrapply</span> <span class="id" title="var">triangle_ind</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ap_triangle</span>, <span class="id" title="var">transport_paths_FlFr'</span>, <span class="id" title="var">transport</span>; <span class="id" title="var">cbn</span> -[<span class="id" title="var">concat_pp_p</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">fa</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> (<span class="id" title="var">g</span> <span class="id" title="var">a</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">ga</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">g</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H12</span> <span class="id" title="var">H13</span> <span class="id" title="var">H23</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">ap_idmap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H12</span>; <span class="id" title="var">equiv_intro</span> (<span class="id" title="var">equiv_1p_q1</span> (<span class="id" title="var">p</span>:=<span class="id" title="var">H2</span>) (<span class="id" title="var">q</span>:=<span class="id" title="var">H1</span>)) <span class="id" title="var">H12'</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">H12'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H13</span>; <span class="id" title="var">equiv_intro</span> (<span class="id" title="var">equiv_1p_q1</span> (<span class="id" title="var">p</span>:=<span class="id" title="var">H3</span>) (<span class="id" title="var">q</span>:=<span class="id" title="var">H2</span>)) <span class="id" title="var">H13'</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">H13'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">H123</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">prism</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H123</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">whiskerL_1p_1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H123</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ! <span class="id" title="var">concat_p1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H123</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H123</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">trijoin_rec_inv</span></span> is essentially injective, as a map between 0-groupoids. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isinj_trijoin_rec_inv</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> -&gt; <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">h</span> : <span class="id" title="var">TriJoinRecPath</span> (<span class="id" title="var">trijoin_rec_inv</span> <span class="id" title="var">f</span>) (<span class="id" title="var">trijoin_rec_inv</span> <span class="id" title="var">g</span>))<br/>
&nbsp;&nbsp;: <span class="id" title="var">f</span> == <span class="id" title="var">g</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">trijoin_ind</span>.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1</span> <span class="id" title="var">h</span>).<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> (<span class="id" title="var">h2</span> <span class="id" title="var">h</span>).<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> (<span class="id" title="var">h3</span> <span class="id" title="var">h</span>).<br/>
&nbsp;&nbsp;1, 2, 3: <span class="id" title="tactic">intros</span>; <span class="id" title="var">nrapply</span> <span class="id" title="var">transport_paths_FlFr'</span>.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> (<span class="id" title="var">h12</span> <span class="id" title="var">h</span>).<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> (<span class="id" title="var">h13</span> <span class="id" title="var">h</span>).<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> (<span class="id" title="var">h23</span> <span class="id" title="var">h</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>; <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isinj_trijoin_rec_inv_helper</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">h123</span> <span class="id" title="var">h</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1180"></a><h2 class="section">Lemmas and tactics about triangles and prisms</h2>


<div class="paragraph"> </div>

  We now introduce several lemmas and tactics that will dispense with some routine goals. The idea is that a generic triangle can be assumed to be trivial on the first vertex, and a generic prism can be assumed to be the identity on the domain. In order to apply the <span class="inlinecode"><span class="id" title="var">triangle_ind</span></span> and <span class="inlinecode"><span class="id" title="var">prism_ind</span></span> lemmas that make this precise, we need to generalize various terms in the goal. 
<div class="paragraph"> </div>

 This destructs a seven component term <span class="inlinecode"><span class="id" title="var">f</span></span>, tries to generalize each piece evaluated appropriately, and clears all pieces.  If called with <span class="inlinecode"><span class="id" title="var">a</span></span>, <span class="inlinecode"><span class="id" title="var">b</span></span> and <span class="inlinecode"><span class="id" title="var">c</span></span> all valid terms, we expect all seven components to be generalized.  But one can also call it with one of <span class="inlinecode"><span class="id" title="var">a</span></span>, <span class="inlinecode"><span class="id" title="var">b</span></span> and <span class="inlinecode"><span class="id" title="var">c</span></span> a dummy value (e.g. <span class="inlinecode"><span class="id" title="var">_X_</span></span>) that causes four of the <span class="inlinecode"><span class="id" title="tactic">generalize</span></span> tactics to fail.  In this case, four components will be simply cleared, and three will be generalized and cleared, so this applies when the goal only depends on three of the seven components. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">generalize_some</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">f1</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> <span class="id" title="var">f2</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> <span class="id" title="var">f3</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">f12</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> <span class="id" title="var">f13</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> <span class="id" title="var">f23</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">f123</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">f</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">f3</span> <span class="id" title="var">f12</span> <span class="id" title="var">f13</span> <span class="id" title="var">f23</span> <span class="id" title="var">f123</span>]; <span class="id" title="var">cbn</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">generalize</span> (<span class="id" title="var">f123</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">f123</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">generalize</span> (<span class="id" title="var">f23</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">f23</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">generalize</span> (<span class="id" title="var">f13</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">f13</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">generalize</span> (<span class="id" title="var">f12</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">f12</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">generalize</span> (<span class="id" title="var">f3</span> <span class="id" title="var">c</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">f3</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">generalize</span> (<span class="id" title="var">f2</span> <span class="id" title="var">b</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">f2</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">generalize</span> (<span class="id" title="var">f1</span> <span class="id" title="var">a</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">f1</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;No&nbsp;easy&nbsp;way&nbsp;to&nbsp;skip&nbsp;the&nbsp;"last"&nbsp;one,&nbsp;since&nbsp;we&nbsp;don't&nbsp;know&nbsp;which&nbsp;will&nbsp;be&nbsp;the&nbsp;last&nbsp;to&nbsp;be&nbsp;generalized.&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
Use this with <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span>, <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">A</span></span>, <span class="inlinecode"><span class="id" title="var">b</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">B</span></span>, <span class="inlinecode"><span class="id" title="var">c</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">C</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">triangle_ind</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">generalize_some</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">f</span>; <span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" title="var">generalize_some</span></span>&nbsp;goes&nbsp;one&nbsp;step&nbsp;too&nbsp;far,&nbsp;so&nbsp;intro&nbsp;the&nbsp;last&nbsp;variable.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">triangle_ind</span>.<br/>

<br/>
</div>

<div class="doc">
Use this with <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span>. Two of the arguments <span class="inlinecode"><span class="id" title="var">a</span></span>, <span class="inlinecode"><span class="id" title="var">b</span></span> and <span class="inlinecode"><span class="id" title="var">c</span></span> should be elements of <span class="inlinecode"><span class="id" title="var">A</span></span>, <span class="inlinecode"><span class="id" title="var">B</span></span> and <span class="inlinecode"><span class="id" title="var">C</span></span>, respectively, and the third should be a dummy value (e.g. <span class="inlinecode"><span class="id" title="var">_X_</span></span>) that causes the generalize tactic to fail.  It applies to goals that only depend on the components of <span class="inlinecode"><span class="id" title="var">f</span></span> involving just two of <span class="inlinecode"><span class="id" title="var">A</span></span>, <span class="inlinecode"><span class="id" title="var">B</span></span> and <span class="inlinecode"><span class="id" title="var">C</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">triangle_ind_two</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">generalize_some</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">f</span>; <span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" title="var">generalize_some</span></span>&nbsp;goes&nbsp;one&nbsp;step&nbsp;too&nbsp;far,&nbsp;so&nbsp;intro&nbsp;the&nbsp;last&nbsp;variable.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">paths_ind</span>.<br/>

<br/>
</div>

<div class="doc">
The prism analog of the function <span class="inlinecode"><span class="id" title="var">triangle_ind</span></span> from earlier in the file. To prove something about all prisms, it's enough to prove it for the "identity" prism.  Note that we don't specialize to a prism concentrated on a single vertex, since sometimes we have to deal with a composite of two prisms. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">prism_ind</span> {<span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">P</span>) (<span class="id" title="var">ab</span> : <span class="id" title="var">a</span> = <span class="id" title="var">b</span>) (<span class="id" title="var">ac</span> : <span class="id" title="var">a</span> = <span class="id" title="var">c</span>) (<span class="id" title="var">bc</span> : <span class="id" title="var">b</span> = <span class="id" title="var">c</span>) (<span class="id" title="var">abc</span> : <span class="id" title="var">ab</span> @ <span class="id" title="var">bc</span> = <span class="id" title="var">ac</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">Q</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a'</span> <span class="id" title="var">b'</span> <span class="id" title="var">c'</span> : <span class="id" title="var">P</span>) (<span class="id" title="var">ab'</span> : <span class="id" title="var">a'</span> = <span class="id" title="var">b'</span>) (<span class="id" title="var">ac'</span> : <span class="id" title="var">a'</span> = <span class="id" title="var">c'</span>) (<span class="id" title="var">bc'</span> : <span class="id" title="var">b'</span> = <span class="id" title="var">c'</span>) (<span class="id" title="var">abc'</span> : <span class="id" title="var">ab'</span> @ <span class="id" title="var">bc'</span> = <span class="id" title="var">ac'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k1</span> : <span class="id" title="var">a</span> = <span class="id" title="var">a'</span>) (<span class="id" title="var">k2</span> : <span class="id" title="var">b</span> = <span class="id" title="var">b'</span>) (<span class="id" title="var">k3</span> : <span class="id" title="var">c</span> = <span class="id" title="var">c'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k12</span> : <span class="id" title="var">ab</span> @ <span class="id" title="var">k2</span> = <span class="id" title="var">k1</span> @ <span class="id" title="var">ab'</span>) (<span class="id" title="var">k13</span> : <span class="id" title="var">ac</span> @ <span class="id" title="var">k3</span> = <span class="id" title="var">k1</span> @ <span class="id" title="var">ac'</span>) (<span class="id" title="var">k23</span> : <span class="id" title="var">bc</span> @ <span class="id" title="var">k3</span> = <span class="id" title="var">k2</span> @ <span class="id" title="var">bc'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k123</span> : <span class="id" title="var">prism</span> <span class="id" title="var">abc</span> <span class="id" title="var">abc'</span> <span class="id" title="var">k12</span> <span class="id" title="var">k13</span> <span class="id" title="var">k23</span>), <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="var">Q</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">ab</span> <span class="id" title="var">ac</span> <span class="id" title="var">bc</span> <span class="id" title="var">abc</span> <span class="id" title="var">idpath</span> <span class="id" title="var">idpath</span> <span class="id" title="var">idpath</span> (<span class="id" title="var">equiv_p1_1q</span> <span class="id" title="var">idpath</span>) (<span class="id" title="var">equiv_p1_1q</span> <span class="id" title="var">idpath</span>) (<span class="id" title="var">equiv_p1_1q</span> <span class="id" title="var">idpath</span>) (<span class="id" title="var">prism_id</span> <span class="id" title="var">abc</span>))<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">forall</span> <span class="id" title="var">a'</span> <span class="id" title="var">b'</span> <span class="id" title="var">c'</span> <span class="id" title="var">ab'</span> <span class="id" title="var">ac'</span> <span class="id" title="var">bc'</span> <span class="id" title="var">abc'</span> <span class="id" title="var">k1</span> <span class="id" title="var">k2</span> <span class="id" title="var">k3</span> <span class="id" title="var">k12</span> <span class="id" title="var">k13</span> <span class="id" title="var">k23</span> <span class="id" title="var">k123</span>, <span class="id" title="var">Q</span> <span class="id" title="var">a'</span> <span class="id" title="var">b'</span> <span class="id" title="var">c'</span> <span class="id" title="var">ab'</span> <span class="id" title="var">ac'</span> <span class="id" title="var">bc'</span> <span class="id" title="var">abc'</span> <span class="id" title="var">k1</span> <span class="id" title="var">k2</span> <span class="id" title="var">k3</span> <span class="id" title="var">k12</span> <span class="id" title="var">k13</span> <span class="id" title="var">k23</span> <span class="id" title="var">k123</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">k1</span>, <span class="id" title="var">k2</span>, <span class="id" title="var">k3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">k123</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">k12</span>; <span class="id" title="var">equiv_intro</span> (<span class="id" title="var">equiv_p1_1q</span> (<span class="id" title="var">p</span>:=<span class="id" title="var">ab</span>) (<span class="id" title="var">q</span>:=<span class="id" title="var">ab'</span>)) <span class="id" title="var">k12'</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">k12'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">k13</span>; <span class="id" title="var">equiv_intro</span> (<span class="id" title="var">equiv_p1_1q</span> (<span class="id" title="var">p</span>:=<span class="id" title="var">ac</span>) (<span class="id" title="var">q</span>:=<span class="id" title="var">ac'</span>)) <span class="id" title="var">k13'</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">k13'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">k23</span>; <span class="id" title="var">equiv_intro</span> (<span class="id" title="var">equiv_p1_1q</span> (<span class="id" title="var">p</span>:=<span class="id" title="var">bc</span>) (<span class="id" title="var">q</span>:=<span class="id" title="var">bc'</span>)) <span class="id" title="var">k23'</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">k23'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ab</span>, <span class="id" title="var">bc</span>, <span class="id" title="var">abc</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">prism</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">equiv_intro</span> (<span class="id" title="var">equiv_concat_r</span> (<span class="id" title="var">concat_1p</span> (<span class="id" title="var">whiskerL</span> 1 <span class="id" title="var">abc'</span>) @ <span class="id" title="var">whiskerL_1p_1</span> <span class="id" title="var">abc'</span>)^ <span class="id" title="var">idpath</span>) <span class="id" title="var">k123'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">k123'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">s</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Use this with <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">g</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span>, <span class="inlinecode"><span class="id" title="var">h</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">TriJoinRecPath</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">g</span></span> (so <span class="inlinecode"><span class="id" title="var">g</span></span> is the *co*domain of <span class="inlinecode"><span class="id" title="var">h</span></span>), <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">A</span></span>, <span class="inlinecode"><span class="id" title="var">b</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">B</span></span>, <span class="inlinecode"><span class="id" title="var">c</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">C</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">prism_ind</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">generalize_some</span> <span class="id" title="var">h</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">generalize_some</span> <span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">prism_ind</span>.<br/>

<br/>
</div>

<div class="doc">
Use this with <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">g</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span>, <span class="inlinecode"><span class="id" title="var">h</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">TriJoinRecPath</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">g</span></span> (so <span class="inlinecode"><span class="id" title="var">g</span></span> is the *co*domain of <span class="inlinecode"><span class="id" title="var">h</span></span>).  Two of the arguments <span class="inlinecode"><span class="id" title="var">a</span></span>, <span class="inlinecode"><span class="id" title="var">b</span></span> and <span class="inlinecode"><span class="id" title="var">c</span></span> should be elements of <span class="inlinecode"><span class="id" title="var">A</span></span>, <span class="inlinecode"><span class="id" title="var">B</span></span> and <span class="inlinecode"><span class="id" title="var">C</span></span>, respectively, and the third should be a dummy value (e.g. <span class="inlinecode"><span class="id" title="var">_X_</span></span>) that causes the generalize tactic to fail.  It applies to goals that only depend on the components of <span class="inlinecode"><span class="id" title="var">g</span></span> and <span class="inlinecode"><span class="id" title="var">h</span></span> involving just two of <span class="inlinecode"><span class="id" title="var">A</span></span>, <span class="inlinecode"><span class="id" title="var">B</span></span> and <span class="inlinecode"><span class="id" title="var">C</span></span>. So it is dealing with one square face of the prism. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">prism_ind_two</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">generalize_some</span> <span class="id" title="var">h</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">generalize_some</span> <span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">square_ind</span>. <span class="comment">(*&nbsp;From&nbsp;Join/Core.v&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab1181"></a><h2 class="section">Use the WildCat library to organize things</h2>

<div class="paragraph"> </div>

 We begin by showing that <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span> is a 0-groupoid, one piece at a time. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isgraph_trijoinrecdata</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>) : <span class="id" title="var">IsGraph</span> (<span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;:= {| <span class="id" title="var">Hom</span> := <span class="id" title="var">TriJoinRecPath</span> |}.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">is01cat_trijoinrecdata</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>) : <span class="id" title="var">Is01Cat</span> (<span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Build_Is01Cat</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bundle_trijoinrecpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1, 2, 3: <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>; <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Can&nbsp;finish&nbsp;with:&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="tactic">by</span></span> <span class="inlinecode"><span class="id" title="var">triangle_ind</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">b</span></span> <span class="inlinecode"><span class="id" title="var">c</span>.</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">prism'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">concat_p1_1p</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">f3</span> <span class="id" title="var">k2</span> <span class="id" title="var">k1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Build_TriJoinRecPath</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">h1</span> <span class="id" title="var">k1</span> <span class="id" title="var">a</span> @ <span class="id" title="var">h1</span> <span class="id" title="var">k2</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">h2</span> <span class="id" title="var">k1</span> <span class="id" title="var">b</span> @ <span class="id" title="var">h2</span> <span class="id" title="var">k2</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">h3</span> <span class="id" title="var">k1</span> <span class="id" title="var">c</span> @ <span class="id" title="var">h3</span> <span class="id" title="var">k2</span> <span class="id" title="var">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Some&nbsp;simple&nbsp;path&nbsp;algebra&nbsp;works&nbsp;as&nbsp;well.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">prism_ind_two</span> <span class="id" title="var">f3</span> <span class="id" title="var">k2</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">_X_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">prism_ind_two</span> <span class="id" title="var">f2</span> <span class="id" title="var">k1</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">_X_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">triangle_ind_two</span> <span class="id" title="var">f1</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">_X_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">prism_ind_two</span> <span class="id" title="var">f3</span> <span class="id" title="var">k2</span> <span class="id" title="var">a</span> <span class="id" title="var">_X_</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">prism_ind_two</span> <span class="id" title="var">f2</span> <span class="id" title="var">k1</span> <span class="id" title="var">a</span> <span class="id" title="var">_X_</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">triangle_ind_two</span> <span class="id" title="var">f1</span> <span class="id" title="var">a</span> <span class="id" title="var">_X_</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">prism_ind_two</span> <span class="id" title="var">f3</span> <span class="id" title="var">k2</span> <span class="id" title="var">_X_</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">prism_ind_two</span> <span class="id" title="var">f2</span> <span class="id" title="var">k1</span> <span class="id" title="var">_X_</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">triangle_ind_two</span> <span class="id" title="var">f1</span> <span class="id" title="var">_X_</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span>. <span class="id" title="var">prism_ind</span> <span class="id" title="var">f3</span> <span class="id" title="var">k2</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">prism_ind</span> <span class="id" title="var">f2</span> <span class="id" title="var">k1</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">triangle_ind</span> <span class="id" title="var">f1</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">is0gpd_trijoinrecdata</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>) : <span class="id" title="var">Is0Gpd</span> (<span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Build_Is0Gpd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Build_TriJoinRecPath</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">h1</span> <span class="id" title="var">h</span> <span class="id" title="var">a</span>)^.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">h2</span> <span class="id" title="var">h</span> <span class="id" title="var">b</span>)^.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">h3</span> <span class="id" title="var">h</span> <span class="id" title="var">c</span>)^.<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Some&nbsp;simple&nbsp;path&nbsp;algebra&nbsp;works&nbsp;as&nbsp;well.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">prism_ind_two</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">_X_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">triangle_ind_two</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">_X_</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">prism_ind_two</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span> <span class="id" title="var">a</span> <span class="id" title="var">_X_</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">triangle_ind_two</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">_X_</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">prism_ind_two</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span> <span class="id" title="var">_X_</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">triangle_ind_two</span> <span class="id" title="var">f</span> <span class="id" title="var">_X_</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">prism_ind</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">triangle_ind</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoinrecdata_0gpd</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>) : <span class="id" title="var">ZeroGpd</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">Build_ZeroGpd</span> (<span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1182"></a><h2 class="section"><span class="inlinecode"><span class="id" title="var">trijoinrecdata_0gpd</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> is a 1-functor from <span class="inlinecode"><span class="id" title="keyword">Type</span></span> to <span class="inlinecode"><span class="id" title="var">ZeroGpd</span></span></h2>


<div class="paragraph"> </div>

  It's a 1-functor that lands in <span class="inlinecode"><span class="id" title="var">ZeroGpd</span></span>, and the morphisms of <span class="inlinecode"><span class="id" title="var">ZeroGpd</span></span> are 0-functors, so it's easy to get confused about the levels. 
<div class="paragraph"> </div>

 First we need to show that the induced map is a morphism in <span class="inlinecode"><span class="id" title="var">ZeroGpd</span></span>, i.e. that it is a 0-functor. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">is0functor_trijoinrecdata_fun</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">g</span> : <span class="id" title="var">P</span> -&gt; <span class="id" title="var">Q</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">Is0Functor</span> (@<span class="id" title="var">trijoinrecdata_fun</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">g</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Build_Is0Functor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Build_TriJoinRecPath</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;1, 2, 3: <span class="id" title="tactic">apply</span> (<span class="id" title="var">ap</span> <span class="id" title="var">g</span>).<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1</span> <span class="id" title="var">h</span>).<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> (<span class="id" title="var">h2</span> <span class="id" title="var">h</span>).<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> (<span class="id" title="var">h3</span> <span class="id" title="var">h</span>).<br/>
&nbsp;&nbsp;1, 2, 3: <span class="id" title="tactic">refine</span> ((<span class="id" title="var">ap_pp</span> <span class="id" title="var">g</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">_</span> @ <span class="id" title="var">ap_pp</span> <span class="id" title="var">g</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="tactic">apply</span> (<span class="id" title="var">ap</span> (<span class="id" title="var">ap</span> <span class="id" title="var">g</span>)).<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> (<span class="id" title="var">h12</span> <span class="id" title="var">h</span>). <span class="comment">(*&nbsp;Or:&nbsp;prism_ind_12&nbsp;f2&nbsp;h&nbsp;a&nbsp;b.&nbsp;triangle_ind_12&nbsp;f1&nbsp;a&nbsp;b.&nbsp;reflexivity.&nbsp;*)</span><br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> (<span class="id" title="var">h13</span> <span class="id" title="var">h</span>).<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> (<span class="id" title="var">h23</span> <span class="id" title="var">h</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">prism_ind</span> <span class="id" title="var">f2</span> <span class="id" title="var">h</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">triangle_ind</span> <span class="id" title="var">f1</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">trijoinrecdata_0gpd</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> is a 0-functor from <span class="inlinecode"><span class="id" title="keyword">Type</span></span> to <span class="inlinecode"><span class="id" title="var">ZeroGpd</span></span> (one level up). 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">is0functor_trijoinrecdata_0gpd</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>) : <span class="id" title="var">Is0Functor</span> (<span class="id" title="var">trijoinrecdata_0gpd</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Build_Is0Functor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">g</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Build_Morphism_0Gpd</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">trijoinrecdata_fun</span> <span class="id" title="var">g</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">is0functor_trijoinrecdata_fun</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">trijoinrecdata_0gpd</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> is a 1-functor from <span class="inlinecode"><span class="id" title="keyword">Type</span></span> to <span class="inlinecode"><span class="id" title="var">ZeroGpd</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">is1functor_trijoinrecdata_0gpd</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>) : <span class="id" title="var">Is1Functor</span> (<span class="id" title="var">trijoinrecdata_0gpd</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Build_Is1Functor</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;<span class="inlinecode"><span class="id" title="var">g1</span></span> <span class="inlinecode"><span class="id" title="var">g2</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">Q</span></span>&nbsp;are&nbsp;homotopic,&nbsp;then&nbsp;the&nbsp;induced&nbsp;maps&nbsp;are&nbsp;homotopic:&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">g1</span> <span class="id" title="var">g2</span> <span class="id" title="var">h</span> <span class="id" title="var">f</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Build_TriJoinRecPath</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1, 2, 3: <span class="id" title="tactic">apply</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1, 2, 3: <span class="id" title="tactic">apply</span> <span class="id" title="var">concat_Ap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">triangle_ind</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">induction</span> (<span class="id" title="var">h</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;identity&nbsp;map&nbsp;<span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">P</span></span>&nbsp;is&nbsp;sent&nbsp;to&nbsp;a&nbsp;map&nbsp;homotopic&nbsp;to&nbsp;the&nbsp;identity.&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">f</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bundle_trijoinrecpath</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1, 2, 3: <span class="id" title="tactic">apply</span> <span class="id" title="var">ap_idmap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">triangle_ind</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;It&nbsp;respects&nbsp;composition.&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> <span class="id" title="var">g1</span> <span class="id" title="var">g2</span> <span class="id" title="var">f</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bundle_trijoinrecpath</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1, 2, 3: <span class="id" title="tactic">apply</span> <span class="id" title="var">ap_compose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">triangle_ind</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoinrecdata_0gpd_fun</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>) : <span class="id" title="var">Fun11</span> <span class="id" title="keyword">Type</span> <span class="id" title="var">ZeroGpd</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">Build_Fun11</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">trijoinrecdata_0gpd</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>).<br/>

<br/>
</div>

<div class="doc">
By the Yoneda lemma, it follows from <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span> being a 1-functor that given <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span> in <span class="inlinecode"><span class="id" title="var">J</span></span>, we get a map <span class="inlinecode">(<span class="id" title="var">J</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">P</span>)</span> <span class="inlinecode">$-&gt;</span> <span class="inlinecode">(<span class="id" title="var">TriJoinRecData</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode"><span class="id" title="var">P</span>)</span> of 0-groupoids which is natural in <span class="inlinecode"><span class="id" title="var">P</span></span>. Below we will specialize to the case where <span class="inlinecode"><span class="id" title="var">J</span></span> is <span class="inlinecode"><span class="id" title="var">TriJoin</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> with the canonical <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_nattrans_recdata</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">J</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">J</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">NatTrans</span> (<span class="id" title="var">opyon_0gpd</span> <span class="id" title="var">J</span>) (<span class="id" title="var">trijoinrecdata_0gpd_fun</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Build_NatTrans</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">rapply</span> <span class="id" title="var">opyoneda_0gpd</span>; <span class="id" title="tactic">exact</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Thus we get a map <span class="inlinecode">(<span class="id" title="var">TriJoin</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">P</span>)</span> <span class="inlinecode">$-&gt;</span> <span class="inlinecode">(<span class="id" title="var">TriJoinRecData</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode"><span class="id" title="var">P</span>)</span> of 0-groupoids, natural in <span class="inlinecode"><span class="id" title="var">P</span></span>. The underlying map is <span class="inlinecode"><span class="id" title="var">trijoin_rec_inv</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_rec_inv_nattrans</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">NatTrans</span> (<span class="id" title="var">opyon_0gpd</span> (<span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>)) (<span class="id" title="var">trijoinrecdata_0gpd_fun</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">trijoin_nattrans_recdata</span> (<span class="id" title="var">trijoinrecdata_trijoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>).<br/>

<br/>
</div>

<div class="doc">
This natural transformation is in fact a natural equivalence of 0-groupoids. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_rec_inv_natequiv</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">NatEquiv</span> (<span class="id" title="var">opyon_0gpd</span> (<span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>)) (<span class="id" title="var">trijoinrecdata_0gpd_fun</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Build_NatEquiv'</span>.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> <span class="id" title="var">trijoin_rec_inv_nattrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isequiv_0gpd_issurjinj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Build_IsSurjInj</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">f</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">trijoin_rec</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">trijoin_rec_beta</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (@<span class="id" title="var">isinj_trijoin_rec_inv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
It will be handy to name the inverse natural equivalence. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_rec_natequiv</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">natequiv_inverse</span> (<span class="id" title="var">trijoin_rec_inv_natequiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>).<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">trijoin_rec_natequiv</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span> is an equivalence of 0-groupoids whose underlying function is definitionally <span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Local Definition</span> <span class="id" title="var">trijoin_rec_natequiv_check</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">equiv_fun_0gpd</span> (<span class="id" title="var">trijoin_rec_natequiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>) = @<span class="id" title="var">trijoin_rec</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">idpath</span>.<br/>

<br/>
</div>

<div class="doc">
It follows that <span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span> is a 0-functor. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">is0functor_trijoin_rec</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>) : <span class="id" title="var">Is0Functor</span> (@<span class="id" title="var">trijoin_rec</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">Is0Functor</span> (<span class="id" title="var">equiv_fun_0gpd</span> (<span class="id" title="var">trijoin_rec_natequiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
And that <span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> is natural.   The <span class="inlinecode">$==</span> in the statement is just <span class="inlinecode">==</span>, but we use WildCat notation so that we can invert and compose these with WildCat notation. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_rec_nat</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>) {<span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">g</span> : <span class="id" title="var">P</span> -&gt; <span class="id" title="var">Q</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">trijoin_rec</span> (<span class="id" title="var">trijoinrecdata_fun</span> <span class="id" title="var">g</span> <span class="id" title="var">f</span>) $== <span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">trijoin_rec</span> <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">isnat</span> (<span class="id" title="var">trijoin_rec_natequiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>) <span class="id" title="var">g</span> <span class="id" title="var">f</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
It is also useful to record this. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">issect_trijoin_rec_inv</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> -&gt; <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">trijoin_rec</span> (<span class="id" title="var">trijoin_rec_inv</span> <span class="id" title="var">f</span>) $== <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">cate_issect</span> (<span class="id" title="var">trijoin_rec_inv_natequiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>) <span class="id" title="var">f</span>.<br/>

<br/>
</div>

<div class="doc">
This comes up a lot as well, and if you inline the proof, you get an ugly goal. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_trijoin_rec</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>} {<span class="id" title="var">g</span> : <span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> -&gt; <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">f</span> $== <span class="id" title="var">trijoin_rec_inv</span> <span class="id" title="var">g</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">trijoin_rec</span> <span class="id" title="var">f</span> == <span class="id" title="var">g</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">moveR_equiv_V_0gpd</span> (<span class="id" title="var">trijoin_rec_inv_natequiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1183"></a><h1 class="section">Functoriality of the triple join</h1>

<div class="paragraph"> </div>

<a id="lab1184"></a><h2 class="section">Precomposition of <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span></h2>

<div class="paragraph"> </div>

 First observe that we can precompose <span class="inlinecode"><span class="id" title="var">k</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span> with a triple of maps. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoinrecdata_tricomp</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span> <span class="id" title="var">P</span>} (<span class="id" title="var">k</span> : <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A'</span> -&gt; <span class="id" title="var">A</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B'</span> -&gt; <span class="id" title="var">B</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">C'</span> -&gt; <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span> <span class="id" title="var">P</span><br/>
&nbsp;&nbsp;:= {| <span class="id" title="var">j1</span> := <span class="id" title="var">j1</span> <span class="id" title="var">k</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>; <span class="id" title="var">j2</span> := <span class="id" title="var">j2</span> <span class="id" title="var">k</span> <span class="id" title="var">o</span> <span class="id" title="var">g</span>; <span class="id" title="var">j3</span> := <span class="id" title="var">j3</span> <span class="id" title="var">k</span> <span class="id" title="var">o</span> <span class="id" title="var">h</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j12</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> =&gt; <span class="id" title="var">j12</span> <span class="id" title="var">k</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<span class="id" title="var">g</span> <span class="id" title="var">b</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j13</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span> =&gt; <span class="id" title="var">j13</span> <span class="id" title="var">k</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<span class="id" title="var">h</span> <span class="id" title="var">c</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j23</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> =&gt; <span class="id" title="var">j23</span> <span class="id" title="var">k</span> (<span class="id" title="var">g</span> <span class="id" title="var">b</span>) (<span class="id" title="var">h</span> <span class="id" title="var">c</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j123</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> =&gt; <span class="id" title="var">j123</span> <span class="id" title="var">k</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<span class="id" title="var">g</span> <span class="id" title="var">b</span>) (<span class="id" title="var">h</span> <span class="id" title="var">c</span>); |}.<br/>

<br/>
</div>

<div class="doc">
Precomposition with a triple respects paths. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoinrecdata_tricomp_0fun</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span> <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">k</span> <span class="id" title="var">l</span> : <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">k</span> $== <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A'</span> -&gt; <span class="id" title="var">A</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B'</span> -&gt; <span class="id" title="var">B</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">C'</span> -&gt; <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">trijoinrecdata_tricomp</span> <span class="id" title="var">k</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span> $== <span class="id" title="var">trijoinrecdata_tricomp</span> <span class="id" title="var">l</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;line&nbsp;is&nbsp;not&nbsp;needed,&nbsp;but&nbsp;clarifies&nbsp;the&nbsp;proof.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">trijoinrecdata_tricomp</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Build_TriJoinRecPath</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>; <span class="id" title="var">apply_hyp</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;E.g.,&nbsp;the&nbsp;first&nbsp;goal&nbsp;is&nbsp;<span class="inlinecode"><span class="id" title="var">j1</span></span> <span class="inlinecode"><span class="id" title="var">k</span></span> <span class="inlinecode">(<span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">a</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">j1</span></span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode">(<span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">a</span>)</span>,&nbsp;and&nbsp;this&nbsp;is&nbsp;solved&nbsp;by&nbsp;<span class="inlinecode"><span class="id" title="var">h1</span></span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">(<span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">a</span>)</span>.&nbsp;We&nbsp;just&nbsp;precompose&nbsp;all&nbsp;fields&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">p</span></span>&nbsp;with&nbsp;<span class="inlinecode"><span class="id" title="var">f</span></span>,&nbsp;<span class="inlinecode"><span class="id" title="var">g</span></span>&nbsp;and&nbsp;<span class="inlinecode"><span class="id" title="var">h</span></span>.&nbsp;*)</span><br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Homotopies between the triple are also respected. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoinrecdata_tricomp2</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span> <span class="id" title="var">P</span>} (<span class="id" title="var">k</span> : <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">f</span> <span class="id" title="var">f'</span> : <span class="id" title="var">A'</span> -&gt; <span class="id" title="var">A</span>} {<span class="id" title="var">g</span> <span class="id" title="var">g'</span> : <span class="id" title="var">B'</span> -&gt; <span class="id" title="var">B</span>} {<span class="id" title="var">h</span> <span class="id" title="var">h'</span> : <span class="id" title="var">C'</span> -&gt; <span class="id" title="var">C</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">f</span> == <span class="id" title="var">f'</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">g</span> == <span class="id" title="var">g'</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">h</span> == <span class="id" title="var">h'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">trijoinrecdata_tricomp</span> <span class="id" title="var">k</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span> $== <span class="id" title="var">trijoinrecdata_tricomp</span> <span class="id" title="var">k</span> <span class="id" title="var">f'</span> <span class="id" title="var">g'</span> <span class="id" title="var">h'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">Build_TriJoinRecPath</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">ap</span>, <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">ap</span>, <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">ap</span>, <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> (<span class="id" title="var">p</span> <span class="id" title="var">a</span>), (<span class="id" title="var">q</span> <span class="id" title="var">b</span>); <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_p1_1q</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> (<span class="id" title="var">p</span> <span class="id" title="var">a</span>), (<span class="id" title="var">r</span> <span class="id" title="var">c</span>); <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_p1_1q</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> (<span class="id" title="var">q</span> <span class="id" title="var">b</span>), (<span class="id" title="var">r</span> <span class="id" title="var">c</span>); <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_p1_1q</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> (<span class="id" title="var">p</span> <span class="id" title="var">a</span>), (<span class="id" title="var">q</span> <span class="id" title="var">b</span>), (<span class="id" title="var">r</span> <span class="id" title="var">c</span>); <span class="id" title="tactic">apply</span> <span class="id" title="var">prism_id</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1185"></a><h2 class="section">Functoriality of <span class="inlinecode"><span class="id" title="var">TriJoin</span></span> via <span class="inlinecode"><span class="id" title="var">functor_trijoin</span></span></h2>

<div class="paragraph"> </div>

 To define <span class="inlinecode"><span class="id" title="var">functor_trijoin</span></span>, we simply precompose the canonical <span class="inlinecode"><span class="id" title="var">TriJoinRecData</span></span> with <span class="inlinecode"><span class="id" title="var">f</span></span>, <span class="inlinecode"><span class="id" title="var">g</span></span> and <span class="inlinecode"><span class="id" title="var">h</span></span>. For example, this has <span class="inlinecode"><span class="id" title="var">j1</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">join1</span></span> <span class="inlinecode"><span class="id" title="var">o</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> and <span class="inlinecode"><span class="id" title="var">j12</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="keyword">fun</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">b</span></span> <span class="inlinecode">=&gt;</span> <span class="inlinecode"><span class="id" title="var">join12</span></span> <span class="inlinecode">(<span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">a</span>)</span> <span class="inlinecode">(<span class="id" title="var">g</span></span> <span class="inlinecode"><span class="id" title="var">b</span>)</span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">functor_trijoin</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A'</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">B'</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">C'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> -&gt; <span class="id" title="var">TriJoin</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">trijoin_rec</span> (<span class="id" title="var">trijoinrecdata_tricomp</span> (<span class="id" title="var">trijoinrecdata_trijoin</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span>) <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>).<br/>

<br/>
</div>

<div class="doc">
We use <span class="inlinecode"><span class="id" title="var">functor_trijoin</span></span> to express a partial functoriality of <span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span> in <span class="inlinecode"><span class="id" title="var">A</span></span>, <span class="inlinecode"><span class="id" title="var">B</span></span> and <span class="inlinecode"><span class="id" title="var">C</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trijoin_rec_functor_trijoin</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span> <span class="id" title="var">P</span>} (<span class="id" title="var">k</span> : <span class="id" title="var">TriJoinRecData</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A'</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">B'</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">C'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">trijoin_rec</span> <span class="id" title="var">k</span> <span class="id" title="var">o</span> <span class="id" title="var">functor_trijoin</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span> == <span class="id" title="var">trijoin_rec</span> (<span class="id" title="var">trijoinrecdata_tricomp</span> <span class="id" title="var">k</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;On&nbsp;the&nbsp;LHS,&nbsp;we&nbsp;use&nbsp;naturality&nbsp;of&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span>&nbsp;inside&nbsp;<span class="inlinecode"><span class="id" title="var">functor_trijoin</span></span>:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">trijoin_rec_nat</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^$ $@ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">fmap</span> <span class="id" title="var">trijoin_rec</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Just&nbsp;to&nbsp;clarify&nbsp;to&nbsp;the&nbsp;reader&nbsp;what&nbsp;is&nbsp;going&nbsp;on:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (?<span class="id" title="var">L</span> $-&gt; ?<span class="id" title="var">R</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">trijoinrecdata_tricomp</span> (<span class="id" title="var">trijoin_rec_inv</span> (<span class="id" title="var">trijoin_rec</span> <span class="id" title="var">k</span>)) <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span> $-&gt; <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">trijoinrecdata_tricomp_0fun</span> (<span class="id" title="var">trijoin_rec_beta</span> <span class="id" title="var">k</span>) <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Now we have all of the tools to efficiently prove functoriality. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">functor_trijoin_compose</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span> <span class="id" title="var">A''</span> <span class="id" title="var">B''</span> <span class="id" title="var">C''</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A'</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">B'</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">C'</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">f'</span> : <span class="id" title="var">A'</span> -&gt; <span class="id" title="var">A''</span>) (<span class="id" title="var">g'</span> : <span class="id" title="var">B'</span> -&gt; <span class="id" title="var">B''</span>) (<span class="id" title="var">h'</span> : <span class="id" title="var">C'</span> -&gt; <span class="id" title="var">C''</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">functor_trijoin</span> (<span class="id" title="var">f'</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>) (<span class="id" title="var">g'</span> <span class="id" title="var">o</span> <span class="id" title="var">g</span>) (<span class="id" title="var">h'</span> <span class="id" title="var">o</span> <span class="id" title="var">h</span>) == <span class="id" title="var">functor_trijoin</span> <span class="id" title="var">f'</span> <span class="id" title="var">g'</span> <span class="id" title="var">h'</span> <span class="id" title="var">o</span> <span class="id" title="var">functor_trijoin</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">nrapply</span> <span class="id" title="var">trijoin_rec_functor_trijoin</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">functor_trijoin_idmap</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">functor_trijoin</span> <span class="id" title="var">idmap</span> <span class="id" title="var">idmap</span> <span class="id" title="var">idmap</span> == (<span class="id" title="var">idmap</span> : <span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> -&gt; <span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_trijoin_rec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">trijoinrecdata_trijoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> $== <span class="id" title="var">trijoinrecdata_fun</span> <span class="id" title="var">idmap</span> (<span class="id" title="var">trijoinrecdata_trijoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">fmap_id</span> (<span class="id" title="var">trijoinrecdata_0gpd</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>) <span class="id" title="var">_</span> (<span class="id" title="var">trijoinrecdata_trijoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">functor2_trijoin</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">f</span> <span class="id" title="var">f'</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A'</span>} {<span class="id" title="var">g</span> <span class="id" title="var">g'</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">B'</span>} {<span class="id" title="var">h</span> <span class="id" title="var">h'</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">C'</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">f</span> == <span class="id" title="var">f'</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">g</span> == <span class="id" title="var">g'</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">h</span> == <span class="id" title="var">h'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">functor_trijoin</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span> == <span class="id" title="var">functor_trijoin</span> <span class="id" title="var">f'</span> <span class="id" title="var">g'</span> <span class="id" title="var">h'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">functor_trijoin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rapply</span> (<span class="id" title="var">fmap</span> <span class="id" title="var">trijoin_rec</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">trijoinrecdata_tricomp2</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_functor_trijoin</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A'</span>) `{!<span class="id" title="var">IsEquiv</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">g</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">B'</span>) `{!<span class="id" title="var">IsEquiv</span> <span class="id" title="var">g</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">h</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">C'</span>) `{!<span class="id" title="var">IsEquiv</span> <span class="id" title="var">h</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">functor_trijoin</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;proof&nbsp;is&nbsp;almost&nbsp;identical&nbsp;to&nbsp;the&nbsp;proof&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">isequiv_functor_join</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">snrapply</span> <span class="id" title="var">isequiv_adjointify</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">functor_trijoin</span> <span class="id" title="var">f</span>^-1 <span class="id" title="var">g</span>^-1 <span class="id" title="var">h</span>^-1).<br/>
&nbsp;&nbsp;- <span class="id" title="var">etransitivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">functor_trijoin_compose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="tactic">exact</span> (<span class="id" title="var">functor2_trijoin</span> (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span>) (<span class="id" title="var">eisretr</span> <span class="id" title="var">g</span>) (<span class="id" title="var">eisretr</span> <span class="id" title="var">h</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">functor_trijoin_idmap</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">etransitivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">functor_trijoin_compose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="tactic">exact</span> (<span class="id" title="var">functor2_trijoin</span> (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span>) (<span class="id" title="var">eissect</span> <span class="id" title="var">g</span>) (<span class="id" title="var">eissect</span> <span class="id" title="var">h</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">functor_trijoin_idmap</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_functor_trijoin</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">A'</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> &lt;~&gt; <span class="id" title="var">B'</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">C</span> &lt;~&gt; <span class="id" title="var">C'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">TriJoin</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> &lt;~&gt; <span class="id" title="var">TriJoin</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">Build_Equiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">functor_trijoin</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>) <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1186"></a><h2 class="section">The relationship between <span class="inlinecode"><span class="id" title="var">functor_trijoin</span></span> and <span class="inlinecode"><span class="id" title="var">functor_join</span></span>.</h2>

<div class="paragraph"> </div>

 While <span class="inlinecode"><span class="id" title="var">functor_trijoin</span></span> is convenient to work with, we want to know that <span class="inlinecode"><span class="id" title="var">functor_trijoin</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">g</span></span> <span class="inlinecode"><span class="id" title="var">h</span></span> is homotopic to <span class="inlinecode"><span class="id" title="var">functor_join</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode">(<span class="id" title="var">functor_join</span></span> <span class="inlinecode"><span class="id" title="var">g</span></span> <span class="inlinecode"><span class="id" title="var">h</span>)</span>.  This is worked out using the next three results. 
<div class="paragraph"> </div>

 A lemma that handles the path algebra in the next result. <span class="inlinecode"><span class="id" title="var">BC</span></span> here is <span class="inlinecode"><span class="id" title="var">Join</span></span> <span class="inlinecode"><span class="id" title="var">B</span></span> <span class="inlinecode"><span class="id" title="var">C</span></span> there, <span class="inlinecode"><span class="id" title="var">bc</span></span> here is <span class="inlinecode"><span class="id" title="var">jglue</span></span> <span class="inlinecode"><span class="id" title="var">b</span></span> <span class="inlinecode"><span class="id" title="var">c</span></span> there, <span class="inlinecode"><span class="id" title="var">bc'</span></span> here is <span class="inlinecode"><span class="id" title="var">jg</span></span> <span class="inlinecode"><span class="id" title="var">g</span></span> <span class="inlinecode"><span class="id" title="var">b</span></span> <span class="inlinecode"><span class="id" title="var">c</span></span> there, and <span class="inlinecode"><span class="id" title="var">beta_jg</span></span> here is <span class="inlinecode"><span class="id" title="var">Join_rec_beta_jglue</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">b</span></span> <span class="inlinecode"><span class="id" title="var">c</span></span> there. 
</div>
<div class="code">
<span class="id" title="keyword">Local Lemma</span> <span class="id" title="var">ap_triangle_functor_join</span> {<span class="id" title="var">A</span> <span class="id" title="var">BC</span> <span class="id" title="var">A'</span> <span class="id" title="var">P</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A'</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">BC</span> -&gt; <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) {<span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">BC</span>} (<span class="id" title="var">bc</span> : <span class="id" title="var">b</span> = <span class="id" title="var">c</span>) (<span class="id" title="var">bc'</span> : <span class="id" title="var">g</span> <span class="id" title="var">b</span> = <span class="id" title="var">g</span> <span class="id" title="var">c</span>) (<span class="id" title="var">beta_jg</span> : <span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">bc</span> = <span class="id" title="var">bc'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap_triangle</span> (<span class="id" title="var">functor_join</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) (<span class="id" title="var">triangle_v</span> <span class="id" title="var">a</span> <span class="id" title="var">bc</span>) @ <span class="id" title="var">functor_join_beta_jglue</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= (<span class="id" title="var">functor_join_beta_jglue</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@@ ((<span class="id" title="var">ap_compose</span> <span class="id" title="var">joinr</span> (<span class="id" title="var">functor_join</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) <span class="id" title="var">bc</span>)^<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ (<span class="id" title="var">ap_compose</span> <span class="id" title="var">g</span> <span class="id" title="var">joinr</span> <span class="id" title="var">bc</span> @ <span class="id" title="var">ap</span> (<span class="id" title="var">ap</span> <span class="id" title="var">joinr</span>) <span class="id" title="var">beta_jg</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">triangle_v</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) <span class="id" title="var">bc'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">bc</span>, <span class="id" title="var">beta_jg</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span> @ <span class="id" title="var">functor_join_beta_jglue</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @@ 1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ap_triangle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_Vp</span>; <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">ap_pp_concat_p1</span> (<span class="id" title="var">functor_join</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) (<span class="id" title="var">jglue</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_Mp</span>; <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">concat_p_pp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> @ <span class="id" title="var">whiskerR_p1</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
We'll generalize the situation a bit to keep things less verbose.  <span class="inlinecode"><span class="id" title="var">join_rec</span></span> <span class="inlinecode"><span class="id" title="var">g</span></span> here will be <span class="inlinecode"><span class="id" title="var">functor_join</span></span> <span class="inlinecode"><span class="id" title="var">g</span></span> <span class="inlinecode"><span class="id" title="var">h</span></span> in the next result.  Maybe this extra generality will also be useful sometime? 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">functor_join_join_rec</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">A'</span> <span class="id" title="var">P</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A'</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">JoinRecData</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">functor_join</span> <span class="id" title="var">f</span> (<span class="id" title="var">join_rec</span> <span class="id" title="var">g</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;== <span class="id" title="var">trijoin_rec</span> {| <span class="id" title="var">j1</span> := <span class="id" title="var">joinl</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>; <span class="id" title="var">j2</span> := <span class="id" title="var">joinr</span> <span class="id" title="var">o</span> <span class="id" title="var">jl</span> <span class="id" title="var">g</span>; <span class="id" title="var">j3</span> := <span class="id" title="var">joinr</span> <span class="id" title="var">o</span> <span class="id" title="var">jr</span> <span class="id" title="var">g</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j12</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> =&gt; <span class="id" title="var">jglue</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<span class="id" title="var">jl</span> <span class="id" title="var">g</span> <span class="id" title="var">b</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j13</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span> =&gt; <span class="id" title="var">jglue</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<span class="id" title="var">jr</span> <span class="id" title="var">g</span> <span class="id" title="var">c</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j23</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> =&gt; <span class="id" title="var">ap</span> <span class="id" title="var">joinr</span> (<span class="id" title="var">jg</span> <span class="id" title="var">g</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">j123</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> =&gt; <span class="id" title="var">triangle_v</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<span class="id" title="var">jg</span> <span class="id" title="var">g</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>); |}.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Recall&nbsp;that&nbsp;<span class="inlinecode"><span class="id" title="var">trijoin_rec</span></span>&nbsp;is&nbsp;defined&nbsp;to&nbsp;be&nbsp;the&nbsp;inverse&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">trijoin_rec_inv_natequiv</span></span> <span class="inlinecode">...</span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">moveL_equiv_V_0gpd</span> (<span class="id" title="var">trijoin_rec_inv_natequiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;next&nbsp;two&nbsp;lines&nbsp;aren't&nbsp;needed,&nbsp;but&nbsp;clarify&nbsp;the&nbsp;goal.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">trijoin_rec_inv_natequiv</span>, <span class="id" title="var">equiv_fun_0gpd</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">trijoinrecdata_fun</span>, <span class="id" title="var">trijoinrecdata_trijoin</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">bundle_trijoinrecpath</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">functor_join_beta_jglue</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">a</span> (<span class="id" title="var">joinl</span> <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">functor_join_beta_jglue</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">a</span> (<span class="id" title="var">joinr</span> <span class="id" title="var">c</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">join23</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">ap_compose</span> <span class="id" title="var">joinr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">ap_compose</span> <span class="id" title="var">_</span> <span class="id" title="var">joinr</span> (<span class="id" title="var">jglue</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>) @ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">ap</span> (<span class="id" title="var">ap</span> <span class="id" title="var">joinr</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">join_rec_beta_jg</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">prism'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">join123</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">triangle_v</span> <span class="id" title="var">a</span> (<span class="id" title="var">jglue</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">ap_triangle_functor_join</span> <span class="id" title="var">f</span> (<span class="id" title="var">join_rec</span> <span class="id" title="var">g</span>) <span class="id" title="var">a</span> (<span class="id" title="var">jglue</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>) (<span class="id" title="var">jg</span> <span class="id" title="var">g</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>) (<span class="id" title="var">Join_rec_beta_jglue</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">functor_trijoin_as_functor_join</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">A'</span> <span class="id" title="var">B'</span> <span class="id" title="var">C'</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A'</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">B'</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">C'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">functor_join</span> <span class="id" title="var">f</span> (<span class="id" title="var">functor_join</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>) == <span class="id" title="var">functor_trijoin</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">functor_join_join_rec</span> <span class="id" title="var">f</span> (<span class="id" title="var">functor_join_recdata</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>).<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>