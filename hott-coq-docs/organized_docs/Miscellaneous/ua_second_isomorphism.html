<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>ua_second_isomorphism</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library ua_second_isomorphism</h1>

<div class="code">
</div>

<div class="doc">
The second isomorphism theorem <span class="inlinecode"><span class="id" title="var">isomorphic_second_isomorphism</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;<span class="id" title="var">Basics.Notations</span><br/>
&nbsp;&nbsp;<span class="id" title="var">HSet</span><br/>
&nbsp;&nbsp;<span class="id" title="var">Colimits.Quotient</span><br/>
&nbsp;&nbsp;<span class="id" title="var">Classes.interfaces.canonical_names</span><br/>
&nbsp;&nbsp;<span class="id" title="var">Classes.theory.ua_isomorphic</span><br/>
&nbsp;&nbsp;<span class="id" title="var">Classes.theory.ua_subalgebra</span><br/>
&nbsp;&nbsp;<span class="id" title="var">Classes.theory.ua_quotient_algebra</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;<span class="id" title="var">algebra_notations</span><br/>
&nbsp;&nbsp;<span class="id" title="var">quotient_algebra_notations</span><br/>
&nbsp;&nbsp;<span class="id" title="var">subalgebra_notations</span><br/>
&nbsp;&nbsp;<span class="id" title="var">isomorphic_notations</span>.<br/>

<br/>
<span class="id" title="keyword">Local Notation</span> <span class="id" title="var">i</span> := (<span class="id" title="var">hom_inc_subalgebra</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>

<br/>
</div>

<div class="doc">
This section defines <span class="inlinecode"><span class="id" title="var">cong_trace</span></span> and proves that it is a
    congruence, the restriction of a congruence to a subalgebra. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">cong_trace</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{σ : <span class="id" title="var">Signature</span>} {<span class="id" title="var">A</span> : <span class="id" title="var">Algebra</span> σ}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">P</span> : ∀ <span class="id" title="var">s</span>, <span class="id" title="var">A</span> <span class="id" title="var">s</span> → <span class="id" title="keyword">Type</span>) `{!<span class="id" title="var">IsSubalgebraPredicate</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Φ</span> : ∀ <span class="id" title="var">s</span>, <span class="id" title="var">Relation</span> (<span class="id" title="var">A</span> <span class="id" title="var">s</span>)) `{!<span class="id" title="var">IsCongruence</span> <span class="id" title="var">A</span> <span class="id" title="var">Φ</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">cong_trace</span> (<span class="id" title="var">s</span> : <span class="id" title="keyword">Sort</span> σ) (<span class="id" title="var">x</span> : (<span class="id" title="var">A</span>&amp;&amp;<span class="id" title="var">P</span>) <span class="id" title="var">s</span>) (<span class="id" title="var">y</span> : (<span class="id" title="var">A</span>&amp;&amp;<span class="id" title="var">P</span>) <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">Φ</span> <span class="id" title="var">s</span> (<span class="id" title="var">i</span> <span class="id" title="var">s</span> <span class="id" title="var">x</span>) (<span class="id" title="var">i</span> <span class="id" title="var">s</span> <span class="id" title="var">y</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">equiv_rel_trace_congruence</span> (<span class="id" title="var">s</span> : <span class="id" title="keyword">Sort</span> σ)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">EquivRel</span> (<span class="id" title="var">cong_trace</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">cong_trace</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">y</span> <span class="id" title="var">Y</span>]. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">y1</span> <span class="id" title="var">Y1</span>] [<span class="id" title="var">y2</span> <span class="id" title="var">Y2</span>] <span class="id" title="var">S</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">y1</span> <span class="id" title="var">Y1</span>] [<span class="id" title="var">y2</span> <span class="id" title="var">Y2</span>] [<span class="id" title="var">y3</span> <span class="id" title="var">Y3</span>] <span class="id" title="var">S</span> <span class="id" title="var">T</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">transitivity</span> <span class="id" title="var">y2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">for_all_2_family_prod_trace_congruence</span> {<span class="id" title="var">w</span> : <span class="id" title="var">SymbolType</span> σ}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">a</span> <span class="id" title="var">b</span> : <span class="id" title="var">FamilyProd</span> (<span class="id" title="var">A</span>&amp;&amp;<span class="id" title="var">P</span>) (<span class="id" title="var">dom_symboltype</span> <span class="id" title="var">w</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">R</span> : <span class="id" title="var">for_all_2_family_prod</span> (<span class="id" title="var">A</span>&amp;&amp;<span class="id" title="var">P</span>) (<span class="id" title="var">A</span>&amp;&amp;<span class="id" title="var">P</span>) <span class="id" title="var">cong_trace</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">for_all_2_family_prod</span> <span class="id" title="var">A</span> <span class="id" title="var">A</span> <span class="id" title="var">Φ</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">map_family_prod</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span>) (<span class="id" title="var">map_family_prod</span> <span class="id" title="var">i</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">w</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">a</span>], <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">y</span> <span class="id" title="var">b</span>], <span class="id" title="var">R</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHw</span>...<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">ops_compatible_trace_trace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">OpsCompatible</span> (<span class="id" title="var">A</span>&amp;&amp;<span class="id" title="var">P</span>) <span class="id" title="var">cong_trace</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">u</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">transport</span> (<span class="id" title="var">λ</span> <span class="id" title="var">X</span>, <span class="id" title="var">Φ</span> <span class="id" title="var">_</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">path_homomorphism_ap_operation</span> <span class="id" title="var">i</span> <span class="id" title="var">u</span> <span class="id" title="var">a</span>)^ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">transport</span> (<span class="id" title="var">λ</span> <span class="id" title="var">X</span>, <span class="id" title="var">Φ</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">path_homomorphism_ap_operation</span> <span class="id" title="var">i</span> <span class="id" title="var">u</span> <span class="id" title="var">b</span>)^ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">ops_compatible_cong</span> <span class="id" title="var">A</span> <span class="id" title="var">Φ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">for_all_2_family_prod_trace_congruence</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">is_congruence_trace</span> : <span class="id" title="var">IsCongruence</span> (<span class="id" title="var">A</span>&amp;&amp;<span class="id" title="var">P</span>) <span class="id" title="var">cong_trace</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (@<span class="id" title="var">BuildIsCongruence</span> <span class="id" title="var">_</span> (<span class="id" title="var">A</span>&amp;&amp;<span class="id" title="var">P</span>) <span class="id" title="var">cong_trace</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> (<span class="id" title="var">is_mere_relation_cong</span> <span class="id" title="var">A</span> <span class="id" title="var">Φ</span>) | <span class="id" title="tactic">exact</span> <span class="id" title="var">_</span> ..].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">cong_trace</span>.<br/>

<br/>
</div>

<div class="doc">
The following section defines the <span class="inlinecode"><span class="id" title="var">is_subalgebra_class</span></span> subalgebra
    predicate, which induces a subalgebra of <span class="inlinecode"><span class="id" title="var">A</span>/<span class="id" title="var">Φ</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">is_subalgebra_class</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">Univalence</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{σ : <span class="id" title="var">Signature</span>} {<span class="id" title="var">A</span> : <span class="id" title="var">Algebra</span> σ}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">P</span> : ∀ <span class="id" title="var">s</span>, <span class="id" title="var">A</span> <span class="id" title="var">s</span> → <span class="id" title="keyword">Type</span>) `{!<span class="id" title="var">IsSubalgebraPredicate</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Φ</span> : ∀ <span class="id" title="var">s</span>, <span class="id" title="var">Relation</span> (<span class="id" title="var">A</span> <span class="id" title="var">s</span>)) `{!<span class="id" title="var">IsCongruence</span> <span class="id" title="var">A</span> <span class="id" title="var">Φ</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">is_subalgebra_class</span> (<span class="id" title="var">s</span> : <span class="id" title="keyword">Sort</span> σ) (<span class="id" title="var">x</span> : (<span class="id" title="var">A</span>/<span class="id" title="var">Φ</span>) <span class="id" title="var">s</span>) : <span class="id" title="var">HProp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">hexists</span> (<span class="id" title="var">λ</span> (<span class="id" title="var">y</span> : (<span class="id" title="var">A</span>&amp;&amp;<span class="id" title="var">P</span>) <span class="id" title="var">s</span>), <span class="id" title="var">in_class</span> (<span class="id" title="var">Φ</span> <span class="id" title="var">s</span>) <span class="id" title="var">x</span> (<span class="id" title="var">i</span> <span class="id" title="var">s</span> <span class="id" title="var">y</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">op_closed_subalgebra_is_subalgebra_class</span> {<span class="id" title="var">w</span> : <span class="id" title="var">SymbolType</span> σ}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">γ</span> : <span class="id" title="var">Operation</span> (<span class="id" title="var">A</span>/<span class="id" title="var">Φ</span>) <span class="id" title="var">w</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">α</span> : <span class="id" title="var">Operation</span> <span class="id" title="var">A</span> <span class="id" title="var">w</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Q</span> : <span class="id" title="var">ComputeOpQuotient</span> <span class="id" title="var">A</span> <span class="id" title="var">Φ</span> <span class="id" title="var">α</span> <span class="id" title="var">γ</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">C</span> : <span class="id" title="var">ClosedUnderOp</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span> <span class="id" title="var">α</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">ClosedUnderOp</span> (<span class="id" title="var">A</span>/<span class="id" title="var">Φ</span>) <span class="id" title="var">is_subalgebra_class</span> <span class="id" title="var">γ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Q</span> <span class="id" title="var">tt</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">α</span>; <span class="id" title="var">C</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Q</span>^.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">EquivRel_Reflexive</span> <span class="id" title="var">α</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">refine</span> (<span class="id" title="var">Quotient_ind_hprop</span> (<span class="id" title="var">Φ</span> <span class="id" title="var">t</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">Trunc_rec</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">y</span> <span class="id" title="var">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">IHw</span> (<span class="id" title="var">γ</span> (<span class="id" title="var">class_of</span> (<span class="id" title="var">Φ</span> <span class="id" title="var">t</span>) <span class="id" title="var">x</span>)) (<span class="id" title="var">α</span> (<span class="id" title="var">i</span> <span class="id" title="var">t</span> <span class="id" title="var">y</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">qglue</span> <span class="id" title="var">R</span>)^.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Q</span> (<span class="id" title="var">i</span> <span class="id" title="var">t</span> <span class="id" title="var">y</span>,<span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">C</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">y</span>.2.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">is_closed_under_ops_is_subalgebra_class</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">IsClosedUnderOps</span> (<span class="id" title="var">A</span>/<span class="id" title="var">Φ</span>) <span class="id" title="var">is_subalgebra_class</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">u</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">op_closed_subalgebra_is_subalgebra_class</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">compute_op_quotient</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">is_closed_under_ops_subalgebra_predicate</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">is_subalgebra_predicate_is_subalgebra_class</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">IsSubalgebraPredicate</span> (<span class="id" title="var">A</span>/<span class="id" title="var">Φ</span>) <span class="id" title="var">is_subalgebra_class</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">BuildIsSubalgebraPredicate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">is_closed_under_ops_is_subalgebra_class</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">is_subalgebra_class</span>.<br/>

<br/>
</div>

<div class="doc">
The next section proves the second isomorphism theorem,

<div class="paragraph"> </div>

<pre>
      (A&amp;&amp;P) / (cong_trace P Φ) ≅ (A/Φ) &amp;&amp; (is_subalgebra_class P Φ).
</pre>

</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;There&nbsp;is&nbsp;an&nbsp;alternative&nbsp;proof&nbsp;using&nbsp;the&nbsp;first&nbsp;isomorphism&nbsp;theorem,<br/>
&nbsp;&nbsp;&nbsp;but&nbsp;the&nbsp;direct&nbsp;proof&nbsp;below&nbsp;seems&nbsp;simpler&nbsp;in&nbsp;HoTT.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">second_isomorphism</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">Univalence</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{σ : <span class="id" title="var">Signature</span>} (<span class="id" title="var">A</span> : <span class="id" title="var">Algebra</span> σ)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">P</span> : ∀ <span class="id" title="var">s</span>, <span class="id" title="var">A</span> <span class="id" title="var">s</span> → <span class="id" title="keyword">Type</span>) `{!<span class="id" title="var">IsSubalgebraPredicate</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Φ</span> : ∀ <span class="id" title="var">s</span>, <span class="id" title="var">Relation</span> (<span class="id" title="var">A</span> <span class="id" title="var">s</span>)) `{!<span class="id" title="var">IsCongruence</span> <span class="id" title="var">A</span> <span class="id" title="var">Φ</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Notation</span> <span class="id" title="var">Ψ</span> := (<span class="id" title="var">cong_trace</span> <span class="id" title="var">P</span> <span class="id" title="var">Φ</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Notation</span> <span class="id" title="var">Q</span> := (<span class="id" title="var">is_subalgebra_class</span> <span class="id" title="var">P</span> <span class="id" title="var">Φ</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">def_second_isomorphism</span> (<span class="id" title="var">s</span> : <span class="id" title="keyword">Sort</span> σ)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: ((<span class="id" title="var">A</span>&amp;&amp;<span class="id" title="var">P</span>) / <span class="id" title="var">Ψ</span>) <span class="id" title="var">s</span> → ((<span class="id" title="var">A</span>/<span class="id" title="var">Φ</span>) &amp;&amp; <span class="id" title="var">Q</span>) <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">Quotient_rec</span> (<span class="id" title="var">Ψ</span> <span class="id" title="var">s</span>) <span class="id" title="var">_</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> (<span class="id" title="var">x</span> : (<span class="id" title="var">A</span>&amp;&amp;<span class="id" title="var">P</span>) <span class="id" title="var">s</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">class_of</span> (<span class="id" title="var">Φ</span> <span class="id" title="var">s</span>) (<span class="id" title="var">i</span> <span class="id" title="var">s</span> <span class="id" title="var">x</span>); <span class="id" title="var">tr</span> (<span class="id" title="var">x</span>; <span class="id" title="var">EquivRel_Reflexive</span> <span class="id" title="var">x</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : (<span class="id" title="var">A</span>&amp;&amp;<span class="id" title="var">P</span>) <span class="id" title="var">s</span>) (<span class="id" title="var">T</span> : <span class="id" title="var">Ψ</span> <span class="id" title="var">s</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">path_sigma_hprop</span> (<span class="id" title="var">class_of</span> (<span class="id" title="var">Φ</span> <span class="id" title="var">s</span>) (<span class="id" title="var">i</span> <span class="id" title="var">s</span> <span class="id" title="var">x</span>); <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">class_of</span> (<span class="id" title="var">Φ</span> <span class="id" title="var">s</span>) (<span class="id" title="var">i</span> <span class="id" title="var">s</span> <span class="id" title="var">y</span>); <span class="id" title="var">_</span>) (@<span class="id" title="var">qglue</span> <span class="id" title="var">_</span> (<span class="id" title="var">Φ</span> <span class="id" title="var">s</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">T</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">oppreserving_second_isomorphism</span> {<span class="id" title="var">w</span> : <span class="id" title="var">SymbolType</span> σ}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">α</span> : <span class="id" title="var">Operation</span> <span class="id" title="var">A</span> <span class="id" title="var">w</span>) (<span class="id" title="var">γ</span> : <span class="id" title="var">Operation</span> (<span class="id" title="var">A</span>/<span class="id" title="var">Φ</span>) <span class="id" title="var">w</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ζ</span> : <span class="id" title="var">Operation</span> ((<span class="id" title="var">A</span>&amp;&amp;<span class="id" title="var">P</span>) / <span class="id" title="var">Ψ</span>) <span class="id" title="var">w</span>) (<span class="id" title="var">CA</span> : <span class="id" title="var">ClosedUnderOp</span> (<span class="id" title="var">A</span>/<span class="id" title="var">Φ</span>) <span class="id" title="var">Q</span> <span class="id" title="var">γ</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">CB</span> : <span class="id" title="var">ClosedUnderOp</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span> <span class="id" title="var">α</span>) (<span class="id" title="var">QA</span> : <span class="id" title="var">ComputeOpQuotient</span> <span class="id" title="var">A</span> <span class="id" title="var">Φ</span> <span class="id" title="var">α</span> <span class="id" title="var">γ</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">QB</span> : <span class="id" title="var">ComputeOpQuotient</span> (<span class="id" title="var">A</span>&amp;&amp;<span class="id" title="var">P</span>) <span class="id" title="var">Ψ</span> (<span class="id" title="var">op_subalgebra</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span> <span class="id" title="var">α</span> <span class="id" title="var">CB</span>) <span class="id" title="var">ζ</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">OpPreserving</span> <span class="id" title="var">def_second_isomorphism</span> <span class="id" title="var">ζ</span> (<span class="id" title="var">op_subalgebra</span> (<span class="id" title="var">A</span>/<span class="id" title="var">Φ</span>) <span class="id" title="var">Q</span> <span class="id" title="var">γ</span> <span class="id" title="var">CA</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ComputeOpQuotient</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">w</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">path_sigma_hprop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">QB</span> <span class="id" title="var">tt</span>)^, (<span class="id" title="var">QA</span> <span class="id" title="var">tt</span>)^.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">qglue</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">refine</span> (<span class="id" title="var">Quotient_ind_hprop</span> (<span class="id" title="var">Ψ</span> <span class="id" title="var">t</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">IHw</span> (<span class="id" title="var">α</span> (<span class="id" title="var">i</span> <span class="id" title="var">t</span> <span class="id" title="var">x</span>)) (<span class="id" title="var">γ</span> (<span class="id" title="var">class_of</span> (<span class="id" title="var">Φ</span> <span class="id" title="var">t</span>) (<span class="id" title="var">i</span> <span class="id" title="var">t</span> <span class="id" title="var">x</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ζ</span> (<span class="id" title="var">class_of</span> (<span class="id" title="var">Ψ</span> <span class="id" title="var">t</span>) <span class="id" title="var">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">CA</span> (<span class="id" title="var">class_of</span> (<span class="id" title="var">Φ</span> <span class="id" title="var">t</span>) (<span class="id" title="var">i</span> <span class="id" title="var">t</span> <span class="id" title="var">x</span>)) (<span class="id" title="var">tr</span> (<span class="id" title="var">x</span>; <span class="id" title="var">_</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">CB</span> (<span class="id" title="var">i</span> <span class="id" title="var">t</span> <span class="id" title="var">x</span>) <span class="id" title="var">x</span>.2)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">QA</span> (<span class="id" title="var">i</span> <span class="id" title="var">t</span> <span class="id" title="var">x</span>, <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">QB</span> (<span class="id" title="var">x</span>, <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">is_homomorphism_second_isomorphism</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">IsHomomorphism</span> <span class="id" title="var">def_second_isomorphism</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">u</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">oppreserving_second_isomorphism</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">compute_op_quotient</span> <span class="id" title="var">A</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">compute_op_quotient</span> (<span class="id" title="var">A</span>&amp;&amp;<span class="id" title="var">P</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">hom_second_isomorphism</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">Homomorphism</span> ((<span class="id" title="var">A</span>&amp;&amp;<span class="id" title="var">P</span>) / <span class="id" title="var">Ψ</span>) ((<span class="id" title="var">A</span>/<span class="id" title="var">Φ</span>) &amp;&amp; <span class="id" title="var">Q</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">BuildHomomorphism</span> <span class="id" title="var">def_second_isomorphism</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">embedding_second_isomorphism</span> (<span class="id" title="var">s</span> : <span class="id" title="keyword">Sort</span> σ)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">IsEmbedding</span> (<span class="id" title="var">hom_second_isomorphism</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isembedding_isinj_hset</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">Quotient_ind_hprop</span> (<span class="id" title="var">Ψ</span> <span class="id" title="var">s</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">Quotient_ind_hprop</span> (<span class="id" title="var">Ψ</span> <span class="id" title="var">s</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">qglue</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">related_quotient_paths</span> (<span class="id" title="var">Φ</span> <span class="id" title="var">s</span>) (<span class="id" title="var">i</span> <span class="id" title="var">s</span> <span class="id" title="var">x</span>) (<span class="id" title="var">i</span> <span class="id" title="var">s</span> <span class="id" title="var">y</span>) (<span class="id" title="var">p</span>..1)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">surjection_second_isomorphism</span> (<span class="id" title="var">s</span> : <span class="id" title="keyword">Sort</span> σ)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">IsSurjection</span> (<span class="id" title="var">hom_second_isomorphism</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">BuildIsSurjection</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">y</span> <span class="id" title="var">S</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">S</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">Quotient_ind_hprop</span> (<span class="id" title="var">Φ</span> <span class="id" title="var">s</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">S</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">Trunc_rec</span> <span class="id" title="var">_</span> <span class="id" title="var">S</span>). <span class="id" title="tactic">intros</span> [<span class="id" title="var">y'</span> <span class="id" title="var">S'</span>]. <span class="id" title="tactic">apply</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">class_of</span> <span class="id" title="var">_</span> <span class="id" title="var">y'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_sigma_hprop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">qglue</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">is_isomorphism_second_isomorphism</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">IsIsomorphism</span> <span class="id" title="var">hom_second_isomorphism</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">isequiv_surj_emb</span>; <span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Existing Instance</span> <span class="id" title="var">is_isomorphism_second_isomorphism</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">isomorphic_second_isomorphism</span> : (<span class="id" title="var">A</span>&amp;&amp;<span class="id" title="var">P</span>) / <span class="id" title="var">Ψ</span> ≅ (<span class="id" title="var">A</span>/<span class="id" title="var">Φ</span>) &amp;&amp; <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">BuildIsomorphic</span> <span class="id" title="var">def_second_isomorphism</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Corollary</span> <span class="id" title="var">id_second_isomorphism</span> : (<span class="id" title="var">A</span>&amp;&amp;<span class="id" title="var">P</span>) / <span class="id" title="var">Ψ</span> = (<span class="id" title="var">A</span>/<span class="id" title="var">Φ</span>) &amp;&amp; <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">id_isomorphic</span> <span class="id" title="var">isomorphic_second_isomorphism</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">second_isomorphism</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>