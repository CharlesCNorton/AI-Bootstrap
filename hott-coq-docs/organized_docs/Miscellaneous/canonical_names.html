<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>canonical_names</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library canonical_names</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span><br/>
&nbsp;&nbsp;<span class="id" title="var">HoTT.Basics</span><br/>
&nbsp;&nbsp;<span class="id" title="var">HoTT.Types</span><br/>
&nbsp;&nbsp;<span class="id" title="var">HoTT.Truncations.Core</span>.<br/>

<br/>
<span class="id" title="keyword">Declare Scope</span> <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">mc_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">mc</span>.<br/>
<span class="id" title="keyword">Global Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Generalizable Variables</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Monomorphic Universe</span> <span class="id" title="var">Ularge</span> <span class="id" title="var">Uhuge</span>.<br/>
<span class="id" title="keyword">Monomorphic Constraint</span> <span class="id" title="var">Ularge</span> &lt; <span class="id" title="var">Uhuge</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">merely_destruct</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">sP</span> : <span class="id" title="var">IsHProp</span> <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">x</span> : <span class="id" title="var">merely</span> <span class="id" title="var">A</span>) : (<span class="id" title="var">A</span> -&gt; <span class="id" title="var">P</span>) -&gt; <span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span>;<span class="id" title="var">revert</span> <span class="id" title="var">x</span>.<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="var">Trunc_ind</span>.<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="var">_</span>.<br/>
- <span class="id" title="tactic">exact</span> <span class="id" title="var">E</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot; g ∘ f " := (<span class="id" title="var">Compose</span> <span class="id" title="var">g</span> <span class="id" title="var">f</span>)%<span class="id" title="var">mc</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(∘)" := <span class="id" title="var">Compose</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">id</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) := <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;(=)" := <span class="id" title="var">paths</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;( x =)" := (<span class="id" title="var">paths</span> <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(= x )" := (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">paths</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;(&lt;&gt;)" := (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> =&gt; ~<span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;( x &lt;&gt;)" := (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(&lt;&gt; x )" := (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">y</span> &lt;&gt; <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Apart</span> <span class="id" title="var">A</span> := <span class="id" title="var">apart</span> : <span class="id" title="var">Relation</span> <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Infix</span> &quot;≶" := <span class="id" title="var">apart</span> : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(≶)" := <span class="id" title="var">apart</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;( x ≶)" := (<span class="id" title="var">apart</span> <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(≶ x )" := (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">apart</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Even&nbsp;for&nbsp;setoids&nbsp;with&nbsp;decidable&nbsp;equality&nbsp;x&nbsp;&lt;&gt;&nbsp;y&nbsp;does&nbsp;not&nbsp;imply&nbsp;x&nbsp;≶&nbsp;y.<br/>
Therefore&nbsp;we&nbsp;introduce&nbsp;the&nbsp;following&nbsp;class.&nbsp;*)</span><br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">TrivialApart</span> <span class="id" title="var">A</span> {<span class="id" title="var">Aap</span> : <span class="id" title="var">Apart</span> <span class="id" title="var">A</span>} :=<br/>
&nbsp;&nbsp;{ <span class="id" title="var">trivial_apart_prop</span> : <span class="id" title="var">is_mere_relation</span> <span class="id" title="var">A</span> <span class="id" title="var">apart</span><br/>
&nbsp;&nbsp;; <span class="id" title="var">trivial_apart</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">x</span> ≶ <span class="id" title="var">y</span> &lt;-&gt; <span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span> }.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">trivial_apart_prop</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">sig_apart</span> `{<span class="id" title="var">Apart</span> <span class="id" title="var">A</span>} (<span class="id" title="var">P</span>: <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>) : <span class="id" title="var">Apart</span> (<span class="id" title="var">sig</span> <span class="id" title="var">P</span>) := <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">x</span>.1 ≶ <span class="id" title="var">y</span>.1.<br/>
#[<span class="id" title="var">export</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Extern</span> 10 (<span class="id" title="var">Apart</span> (<span class="id" title="var">sig</span> <span class="id" title="var">_</span>)) =&gt; <span class="id" title="tactic">apply</span> @<span class="id" title="var">sig_apart</span> : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Cast</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> := <span class="id" title="var">cast</span>: <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">cast</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> {<span class="id" title="var">Cast</span>} <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;' x" := (<span class="id" title="var">cast</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span>) : <span class="id" title="var">mc_scope</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Typeclasses</span> <span class="id" title="keyword">Transparent</span> <span class="id" title="var">Cast</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Other&nbsp;canonically&nbsp;named&nbsp;relations/operations/constants:&nbsp;*)</span><br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">SgOp</span> <span class="id" title="var">A</span> := <span class="id" title="var">sg_op</span>: <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">MonUnit</span> <span class="id" title="var">A</span> := <span class="id" title="var">mon_unit</span>: <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Plus</span> <span class="id" title="var">A</span> := <span class="id" title="var">plus</span>: <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Mult</span> <span class="id" title="var">A</span> := <span class="id" title="var">mult</span>: <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">One</span> <span class="id" title="var">A</span> := <span class="id" title="var">one</span>: <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Zero</span> <span class="id" title="var">A</span> := <span class="id" title="var">zero</span>: <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Negate</span> <span class="id" title="var">A</span> := <span class="id" title="var">negate</span>: <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">DecRecip</span> <span class="id" title="var">A</span> := <span class="id" title="var">dec_recip</span>: <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ApartZero</span> <span class="id" title="var">R</span> `{<span class="id" title="var">Zero</span> <span class="id" title="var">R</span>} `{<span class="id" title="var">Apart</span> <span class="id" title="var">R</span>} := <span class="id" title="var">sig</span> (≶ <span class="id" title="var">zero</span>).<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Recip</span> <span class="id" title="var">A</span> `{<span class="id" title="var">Apart</span> <span class="id" title="var">A</span>} `{<span class="id" title="var">Zero</span> <span class="id" title="var">A</span>} := <span class="id" title="var">recip</span>: <span class="id" title="var">ApartZero</span> <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Typeclasses</span> <span class="id" title="keyword">Transparent</span> <span class="id" title="var">SgOp</span> <span class="id" title="var">MonUnit</span> <span class="id" title="var">Plus</span> <span class="id" title="var">Mult</span> <span class="id" title="var">Zero</span> <span class="id" title="var">One</span> <span class="id" title="var">Negate</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Meet</span> <span class="id" title="var">A</span> := <span class="id" title="var">meet</span>: <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Join</span> <span class="id" title="var">A</span> := <span class="id" title="var">join</span>: <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Top</span> <span class="id" title="var">A</span> := <span class="id" title="var">top</span>: <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Bottom</span> <span class="id" title="var">A</span> := <span class="id" title="var">bottom</span>: <span class="id" title="var">A</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Typeclasses</span> <span class="id" title="keyword">Transparent</span> <span class="id" title="var">Meet</span> <span class="id" title="var">Join</span> <span class="id" title="var">Top</span> <span class="id" title="var">Bottom</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Le</span> <span class="id" title="var">A</span> := <span class="id" title="var">le</span>: <span class="id" title="var">Relation</span> <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Lt</span> <span class="id" title="var">A</span> := <span class="id" title="var">lt</span>: <span class="id" title="var">Relation</span> <span class="id" title="var">A</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Typeclasses</span> <span class="id" title="keyword">Transparent</span> <span class="id" title="var">Le</span> <span class="id" title="var">Lt</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">NonNeg</span> <span class="id" title="var">R</span> `{<span class="id" title="var">Zero</span> <span class="id" title="var">R</span>} `{<span class="id" title="var">Le</span> <span class="id" title="var">R</span>} := <span class="id" title="var">sig</span> (<span class="id" title="var">le</span> <span class="id" title="var">zero</span>).<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Pos</span> <span class="id" title="var">R</span> `{<span class="id" title="var">Zero</span> <span class="id" title="var">R</span>} `{<span class="id" title="var">Lt</span> <span class="id" title="var">R</span>} := <span class="id" title="var">sig</span> (<span class="id" title="var">lt</span> <span class="id" title="var">zero</span>).<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">NonPos</span> <span class="id" title="var">R</span> `{<span class="id" title="var">Zero</span> <span class="id" title="var">R</span>} `{<span class="id" title="var">Le</span> <span class="id" title="var">R</span>} := <span class="id" title="var">sig</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">le</span> <span class="id" title="var">y</span> <span class="id" title="var">zero</span>).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">plus_is_sg_op</span> `{<span class="id" title="var">f</span> : <span class="id" title="var">Plus</span> <span class="id" title="var">A</span>} : <span class="id" title="var">SgOp</span> <span class="id" title="var">A</span> := <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">mult_is_sg_op</span> `{<span class="id" title="var">f</span> : <span class="id" title="var">Mult</span> <span class="id" title="var">A</span>} : <span class="id" title="var">SgOp</span> <span class="id" title="var">A</span> := <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">one_is_mon_unit</span> `{<span class="id" title="var">c</span> : <span class="id" title="var">One</span> <span class="id" title="var">A</span>} : <span class="id" title="var">MonUnit</span> <span class="id" title="var">A</span> := <span class="id" title="var">c</span>.<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">zero_is_mon_unit</span> `{<span class="id" title="var">c</span> : <span class="id" title="var">Zero</span> <span class="id" title="var">A</span>} : <span class="id" title="var">MonUnit</span> <span class="id" title="var">A</span> := <span class="id" title="var">c</span>.<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">meet_is_sg_op</span> `{<span class="id" title="var">f</span> : <span class="id" title="var">Meet</span> <span class="id" title="var">A</span>} : <span class="id" title="var">SgOp</span> <span class="id" title="var">A</span> := <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">join_is_sg_op</span> `{<span class="id" title="var">f</span> : <span class="id" title="var">Join</span> <span class="id" title="var">A</span>} : <span class="id" title="var">SgOp</span> <span class="id" title="var">A</span> := <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">top_is_mon_unit</span> `{<span class="id" title="var">s</span> : <span class="id" title="var">Top</span> <span class="id" title="var">A</span>} : <span class="id" title="var">MonUnit</span> <span class="id" title="var">A</span> := <span class="id" title="var">s</span>.<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">bottom_is_mon_unit</span> `{<span class="id" title="var">s</span> : <span class="id" title="var">Bottom</span> <span class="id" title="var">A</span>} : <span class="id" title="var">MonUnit</span> <span class="id" title="var">A</span> := <span class="id" title="var">s</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Extern</span> 4 (<span class="id" title="var">Apart</span> (<span class="id" title="var">ApartZero</span> <span class="id" title="var">_</span>)) =&gt; <span class="id" title="tactic">apply</span> @<span class="id" title="var">sig_apart</span> : <span class="id" title="var">typeclass_instances</span>.<br/>
#[<span class="id" title="var">export</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Extern</span> 4 (<span class="id" title="var">Apart</span> (<span class="id" title="var">NonNeg</span> <span class="id" title="var">_</span>)) =&gt; <span class="id" title="tactic">apply</span> @<span class="id" title="var">sig_apart</span> : <span class="id" title="var">typeclass_instances</span>.<br/>
#[<span class="id" title="var">export</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Extern</span> 4 (<span class="id" title="var">Apart</span> (<span class="id" title="var">Pos</span> <span class="id" title="var">_</span>)) =&gt; <span class="id" title="tactic">apply</span> @<span class="id" title="var">sig_apart</span> : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
</div>

<div class="doc">
We group these notations into a module, so that just this subset can be exported in some cases. 
</div>
<div class="code">
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Export</span> <span class="id" title="var">BinOpNotations</span>.<br/>
<span class="comment">(*&nbsp;Notations:&nbsp;*)</span><br/>
<span class="id" title="keyword">Declare Scope</span> <span class="id" title="var">mc_add_scope</span>.<br/>
<span class="id" title="keyword">Infix</span> &quot;+" := <span class="id" title="var">sg_op</span> : <span class="id" title="var">mc_add_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(+)" := <span class="id" title="var">sg_op</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_add_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;( x +)" := (<span class="id" title="var">sg_op</span> <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_add_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(+ x )" := (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">sg_op</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_add_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Declare Scope</span> <span class="id" title="var">mc_mult_scope</span>.<br/>
<span class="id" title="keyword">Infix</span> &quot;*" := <span class="id" title="var">sg_op</span> : <span class="id" title="var">mc_mult_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;( x *.)" := (<span class="id" title="var">sg_op</span> <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_mult_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(.*.)" := <span class="id" title="var">sg_op</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_mult_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(.* x )" := (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">sg_op</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_mult_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> &quot;+" := <span class="id" title="var">plus</span> : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(+)" := <span class="id" title="var">plus</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;( x +)" := (<span class="id" title="var">plus</span> <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(+ x )" := (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">y</span> + <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> &quot;*" := <span class="id" title="var">mult</span> : <span class="id" title="var">mc_scope</span>.<br/>
<span class="comment">(*&nbsp;We&nbsp;don't&nbsp;add&nbsp;"(&nbsp;*&nbsp;)",&nbsp;"(&nbsp;*&nbsp;x&nbsp;)"&nbsp;and&nbsp;"(&nbsp;x&nbsp;*&nbsp;)"&nbsp;notations<br/>
&nbsp;&nbsp;&nbsp;because&nbsp;they&nbsp;conflict&nbsp;with&nbsp;comments.&nbsp;*)</span><br/>
<span class="id" title="keyword">Notation</span> &quot;( x *.)" := (<span class="id" title="var">mult</span> <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(.*.)" := <span class="id" title="var">mult</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(.* x )" := (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">y</span> * <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;- x" := (<span class="id" title="var">negate</span> <span class="id" title="var">x</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(-)" := <span class="id" title="var">negate</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;x - y" := (<span class="id" title="var">x</span> + -<span class="id" title="var">y</span>) : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;0" := <span class="id" title="var">zero</span> : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;1" := <span class="id" title="var">one</span> : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;2" := (1 + 1) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;3" := (1 + (1 + 1)) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;4" := (1 + (1 + (1 + 1))) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;5" := (1 + (1 + (1 + (1 + 1)))) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;6" := (1 + (1 + (1 + (1 + (1 + 1))))) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;- 1" := (-(1)) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;- 2" := (-(2)) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;- 3" := (-(3)) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;- 4" := (-(4)) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">BinOpNotations</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;/ x" := (<span class="id" title="var">dec_recip</span> <span class="id" title="var">x</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(/)" := <span class="id" title="var">dec_recip</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;x / y" := (<span class="id" title="var">x</span> * /<span class="id" title="var">y</span>) : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;// x" := (<span class="id" title="var">recip</span> <span class="id" title="var">x</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(//)" := <span class="id" title="var">recip</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;x // y" := (<span class="id" title="var">x</span> * //<span class="id" title="var">y</span>) : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;⊤" := <span class="id" title="var">top</span> : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;⊥" := <span class="id" title="var">bottom</span> : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> &quot;⊓" := <span class="id" title="var">meet</span> : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(⊓)" := <span class="id" title="var">meet</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;( X ⊓)" := (<span class="id" title="var">meet</span> <span class="id" title="var">X</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(⊓ X )" := (<span class="id" title="keyword">fun</span> <span class="id" title="var">Y</span> =&gt; <span class="id" title="var">Y</span> ⊓ <span class="id" title="var">X</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> &quot;⊔" := <span class="id" title="var">join</span> : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(⊔)" := <span class="id" title="var">join</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;( X ⊔)" := (<span class="id" title="var">join</span> <span class="id" title="var">X</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(⊔ X )" := (<span class="id" title="keyword">fun</span> <span class="id" title="var">Y</span> =&gt; <span class="id" title="var">Y</span> ⊔ <span class="id" title="var">X</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> &quot;≤" := <span class="id" title="var">le</span> : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(≤)" := <span class="id" title="var">le</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;( x ≤)" := (<span class="id" title="var">le</span> <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(≤ x )" := (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">y</span> ≤ <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> &quot;&lt;=" := <span class="id" title="var">le</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(&lt;=)" := <span class="id" title="var">le</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;( x &lt;=)" := (<span class="id" title="var">le</span> <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(&lt;= x )" := (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">y</span> ≤ <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> &quot;&lt;" := <span class="id" title="var">lt</span> : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(&lt;)" := <span class="id" title="var">lt</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;( x &lt;)" := (<span class="id" title="var">lt</span> <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(&lt; x )" := (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">y</span> &lt; <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;x ≤ y ≤ z" := (<span class="id" title="var">x</span> ≤ <span class="id" title="var">y</span> /\ <span class="id" title="var">y</span> ≤ <span class="id" title="var">z</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;x ≤ y &lt; z" := (<span class="id" title="var">x</span> ≤ <span class="id" title="var">y</span> /\ <span class="id" title="var">y</span> &lt; <span class="id" title="var">z</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;x &lt; y &lt; z" := (<span class="id" title="var">x</span> &lt; <span class="id" title="var">y</span> /\ <span class="id" title="var">y</span> &lt; <span class="id" title="var">z</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;x &lt; y ≤ z" := (<span class="id" title="var">x</span> &lt; <span class="id" title="var">y</span> /\ <span class="id" title="var">y</span> ≤ <span class="id" title="var">z</span>) : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
</div>

<div class="doc">
It is likely that ≤ and &lt; are transitive (and ≤ reflexive) so inform <span class="inlinecode"><span class="id" title="tactic">auto</span></span> of this. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">auto_trans</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="var">H</span>: ?<span class="id" title="var">R</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span>, <span class="id" title="var">I</span>: ?<span class="id" title="var">R</span> ?<span class="id" title="var">y</span> ?<span class="id" title="var">z</span> |- ?<span class="id" title="var">R</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">z</span>] =&gt; <span class="id" title="tactic">apply</span> (<span class="id" title="tactic">transitivity</span> <span class="id" title="var">H</span> <span class="id" title="var">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Extern</span> 2 (?<span class="id" title="var">x</span> ≤ ?<span class="id" title="var">y</span>) =&gt; <span class="id" title="tactic">reflexivity</span> : <span class="id" title="var">core</span>.<br/>
#[<span class="id" title="var">export</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Extern</span> 4 (?<span class="id" title="var">x</span> ≤ ?<span class="id" title="var">z</span>) =&gt; <span class="id" title="var">auto_trans</span> : <span class="id" title="var">core</span>.<br/>
#[<span class="id" title="var">export</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Extern</span> 4 (?<span class="id" title="var">x</span> &lt; ?<span class="id" title="var">z</span>) =&gt; <span class="id" title="var">auto_trans</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Abs</span> <span class="id" title="var">A</span> `{<span class="id" title="var">Le</span> <span class="id" title="var">A</span>} `{<span class="id" title="var">Zero</span> <span class="id" title="var">A</span>} `{<span class="id" title="var">Negate</span> <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;:= <span class="id" title="var">abs_sig</span>: <span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>), { <span class="id" title="var">y</span> : <span class="id" title="var">A</span> | (0 ≤ <span class="id" title="var">x</span> -&gt; <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) /\ (<span class="id" title="var">x</span> ≤ 0 -&gt; <span class="id" title="var">y</span> = -<span class="id" title="var">x</span>)}.<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">abs</span> `{<span class="id" title="var">Abs</span> <span class="id" title="var">A</span>} := <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> : <span class="id" title="var">A</span> =&gt; (<span class="id" title="var">abs_sig</span> <span class="id" title="var">x</span>).1.<br/>

<br/>
<span class="comment">(*&nbsp;Common&nbsp;properties:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Class&nbsp;Inverse&nbsp;`(A&nbsp;-&gt;&nbsp;B)&nbsp;:&nbsp;Type&nbsp;:=&nbsp;inverse:&nbsp;B&nbsp;-&gt;&nbsp;A.<br/>
Arguments&nbsp;inverse&nbsp;{A&nbsp;B}&nbsp;_&nbsp;{Inverse}&nbsp;_.<br/>
Typeclasses&nbsp;Transparent&nbsp;Inverse.<br/>
Notation&nbsp;"f&nbsp;⁻¹"&nbsp;:=&nbsp;(inverse&nbsp;f)&nbsp;:&nbsp;mc_scope.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Idempotent</span> `(<span class="id" title="var">f</span>: <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>) : <span class="id" title="keyword">Type</span> := <span class="id" title="var">idempotency</span>: <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">x</span> = <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">idempotency</span> {<span class="id" title="var">A</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span> {<span class="id" title="var">Idempotent</span>}.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">UnaryIdempotent</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">f</span>: <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>) : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">unary_idempotent</span> : <span class="id" title="var">Idempotent</span> <span class="id" title="var">Compose</span> <span class="id" title="var">f</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="var">Existing</span> <span class="id" title="var">Instances</span> <span class="id" title="var">unary_idempotent</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">unary_idempotency</span> `{<span class="id" title="var">UnaryIdempotent</span> <span class="id" title="var">A</span> <span class="id" title="var">f</span>} <span class="id" title="var">x</span> : <span class="id" title="var">f</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) = <span class="id" title="var">f</span> <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">change</span> (<span class="id" title="var">f</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) <span class="id" title="keyword">with</span> (<span class="id" title="var">Compose</span> <span class="id" title="var">f</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span>).<br/>
<span class="id" title="tactic">apply</span> (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">g</span> =&gt; <span class="id" title="var">g</span> <span class="id" title="var">x</span>)).<br/>
<span class="id" title="tactic">change</span> (<span class="id" title="var">Compose</span> <span class="id" title="var">f</span> <span class="id" title="var">f</span> = <span class="id" title="var">f</span>).<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="var">idempotency</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">BinaryIdempotent</span> `(<span class="id" title="var">op</span>: <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>) : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">binary_idempotent</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">Idempotent</span> <span class="id" title="var">op</span> <span class="id" title="var">x</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="var">Existing</span> <span class="id" title="var">Instances</span> <span class="id" title="var">binary_idempotent</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">LeftIdentity</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">op</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">B</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>): <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">left_identity</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <span class="id" title="var">op</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> = <span class="id" title="var">y</span>.<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">RightIdentity</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">op</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">A</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">B</span>): <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">right_identity</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">op</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> = <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Absorption</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">op1</span>: <span class="id" title="var">A</span> -&gt; <span class="id" title="var">C</span> -&gt; <span class="id" title="var">A</span>) (<span class="id" title="var">op2</span>: <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span>) : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">absorption</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">op1</span> <span class="id" title="var">x</span> (<span class="id" title="var">op2</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) = <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">LeftAbsorb</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">op</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">A</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>): <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">left_absorb</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <span class="id" title="var">op</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> = <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">RightAbsorb</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">op</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">B</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">B</span>): <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">right_absorb</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">op</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> = <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">LeftInverse</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">B</span>} {<span class="id" title="var">C</span>} (<span class="id" title="var">op</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span>) (<span class="id" title="var">inv</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">A</span>) (<span class="id" title="var">unit</span> : <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">left_inverse</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">op</span> (<span class="id" title="var">inv</span> <span class="id" title="var">x</span>) <span class="id" title="var">x</span> = <span class="id" title="var">unit</span>.<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">RightInverse</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">B</span>} {<span class="id" title="var">C</span>} (<span class="id" title="var">op</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span>) (<span class="id" title="var">inv</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) (<span class="id" title="var">unit</span> : <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">right_inverse</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">op</span> <span class="id" title="var">x</span> (<span class="id" title="var">inv</span> <span class="id" title="var">x</span>) = <span class="id" title="var">unit</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Commutative</span> {<span class="id" title="var">B</span> <span class="id" title="var">A</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">commutativity</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Typeclasses</span> <span class="id" title="keyword">Transparent</span> <span class="id" title="var">Commutative</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">HeteroAssociative</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">AB</span> <span class="id" title="var">BC</span> <span class="id" title="var">ABC</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">fA_BC</span>: <span class="id" title="var">A</span> -&gt; <span class="id" title="var">BC</span> -&gt; <span class="id" title="var">ABC</span>) (<span class="id" title="var">fBC</span>: <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span> -&gt; <span class="id" title="var">BC</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">fAB_C</span>: <span class="id" title="var">AB</span> -&gt; <span class="id" title="var">C</span> -&gt; <span class="id" title="var">ABC</span>) (<span class="id" title="var">fAB</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">AB</span>): <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">associativity</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>, <span class="id" title="var">fA_BC</span> <span class="id" title="var">x</span> (<span class="id" title="var">fBC</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) = <span class="id" title="var">fAB_C</span> (<span class="id" title="var">fAB</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="var">z</span>.<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Associative</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">simple_associativity</span> : <span class="id" title="var">HeteroAssociative</span> <span class="id" title="var">f</span> <span class="id" title="var">f</span> <span class="id" title="var">f</span> <span class="id" title="var">f</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="var">Existing</span> <span class="id" title="var">Instances</span> <span class="id" title="var">simple_associativity</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Involutive</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>) := <span class="id" title="var">involutive</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) = <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">TotalRelation</span> `(<span class="id" title="var">R</span> : <span class="id" title="var">Relation</span> <span class="id" title="var">A</span>) : <span class="id" title="keyword">Type</span> := <span class="id" title="var">total</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>, <span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> |<span class="id" title="var">_</span>| <span class="id" title="var">R</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">total</span> {<span class="id" title="var">A</span>} <span class="id" title="var">_</span> {<span class="id" title="var">TotalRelation</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Trichotomy</span> `(<span class="id" title="var">R</span> : <span class="id" title="var">Relation</span> <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">trichotomy</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>, <span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> |<span class="id" title="var">_</span>| <span class="id" title="var">x</span> = <span class="id" title="var">y</span> |<span class="id" title="var">_</span>| <span class="id" title="var">R</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">trichotomy</span> {<span class="id" title="var">A</span>} <span class="id" title="var">R</span> {<span class="id" title="var">Trichotomy</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">irreflexivity</span> {<span class="id" title="var">A</span>} <span class="id" title="var">_</span> {<span class="id" title="var">Irreflexive</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">CoTransitive</span> `(<span class="id" title="var">R</span> : <span class="id" title="var">Relation</span> <span class="id" title="var">A</span>) : <span class="id" title="keyword">Type</span> := <span class="id" title="var">cotransitive</span><br/>
&nbsp;&nbsp;: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> -&gt; <span class="id" title="keyword">forall</span> <span class="id" title="var">z</span>, <span class="id" title="var">hor</span> (<span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span>) (<span class="id" title="var">R</span> <span class="id" title="var">z</span> <span class="id" title="var">y</span>).<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">cotransitive</span> {<span class="id" title="var">A</span> <span class="id" title="var">R</span> <span class="id" title="var">CoTransitive</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">EquivRel</span> `(<span class="id" title="var">R</span> : <span class="id" title="var">Relation</span> <span class="id" title="var">A</span>) : <span class="id" title="keyword">Type</span> := <span class="id" title="var">Build_EquivRel</span><br/>
&nbsp;&nbsp;{ <span class="id" title="var">EquivRel_Reflexive</span> : <span class="id" title="var">Reflexive</span> <span class="id" title="var">R</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">EquivRel_Symmetric</span> : <span class="id" title="var">Symmetric</span> <span class="id" title="var">R</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">EquivRel_Transitive</span> : <span class="id" title="var">Transitive</span> <span class="id" title="var">R</span> }.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="var">Existing</span> <span class="id" title="var">Instances</span> <span class="id" title="var">EquivRel_Reflexive</span> <span class="id" title="var">EquivRel_Symmetric</span> <span class="id" title="var">EquivRel_Transitive</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">SigEquivRel</span> {<span class="id" title="var">A</span>:<span class="id" title="keyword">Type</span>} (<span class="id" title="var">R</span> : <span class="id" title="var">Relation</span> <span class="id" title="var">A</span>) : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;{<span class="id" title="var">_</span> : <span class="id" title="var">Reflexive</span> <span class="id" title="var">R</span> | { <span class="id" title="var">_</span> : <span class="id" title="var">Symmetric</span> <span class="id" title="var">R</span> | <span class="id" title="var">Transitive</span> <span class="id" title="var">R</span>}}.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">trunc_sig_equiv_rel</span> `{<span class="id" title="var">Funext</span>} {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">R</span> : <span class="id" title="var">Relation</span> <span class="id" title="var">A</span>) {<span class="id" title="var">n</span>} `{!<span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>), <span class="id" title="var">IsTrunc</span> <span class="id" title="var">n</span> (<span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)}<br/>
&nbsp;&nbsp;:  <span class="id" title="var">IsTrunc</span> <span class="id" title="var">n</span> (<span class="id" title="var">SigEquivRel</span> <span class="id" title="var">R</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> @<span class="id" title="var">istrunc_sigma</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">istrunc_forall</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> @<span class="id" title="var">istrunc_sigma</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">istrunc_forall</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">issig_equiv_rel</span> {<span class="id" title="var">A</span>:<span class="id" title="keyword">Type</span>} (<span class="id" title="var">R</span> : <span class="id" title="var">Relation</span> <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">SigEquivRel</span> <span class="id" title="var">R</span> &lt;~&gt; <span class="id" title="var">EquivRel</span> <span class="id" title="var">R</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">issig</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">istrunc_equiv_rel</span> `{<span class="id" title="var">Funext</span>} {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">R</span> : <span class="id" title="var">Relation</span> <span class="id" title="var">A</span>) {<span class="id" title="var">n</span>} `{!<span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>), <span class="id" title="var">IsTrunc</span> <span class="id" title="var">n</span> (<span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsTrunc</span> <span class="id" title="var">n</span> (<span class="id" title="var">EquivRel</span> <span class="id" title="var">R</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">istrunc_equiv_istrunc</span> (<span class="id" title="var">SigEquivRel</span> <span class="id" title="var">R</span>) (<span class="id" title="var">issig_equiv_rel</span> <span class="id" title="var">R</span>)).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Conjugate</span> <span class="id" title="var">A</span> := <span class="id" title="var">conj</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">DistrOpp</span> {<span class="id" title="var">A</span>} `(<span class="id" title="var">SgOp</span> <span class="id" title="var">A</span>) `(<span class="id" title="var">Conjugate</span> <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">distropp</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>, <span class="id" title="var">conj</span> (<span class="id" title="var">sg_op</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) = <span class="id" title="var">sg_op</span> (<span class="id" title="var">conj</span> <span class="id" title="var">y</span>) (<span class="id" title="var">conj</span> <span class="id" title="var">x</span>).<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">SwapOp</span> {<span class="id" title="var">A</span>} `(<span class="id" title="var">Negate</span> <span class="id" title="var">A</span>) `(<span class="id" title="var">Conjugate</span> <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">swapop</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">conj</span> (-<span class="id" title="var">x</span>) = - (<span class="id" title="var">conj</span> <span class="id" title="var">x</span>).<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">FactorNegLeft</span> {<span class="id" title="var">A</span>} `(<span class="id" title="var">Negate</span> <span class="id" title="var">A</span>) `(<span class="id" title="var">SgOp</span> <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">factorneg_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">sg_op</span> (-<span class="id" title="var">x</span>) <span class="id" title="var">y</span> = - (<span class="id" title="var">sg_op</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">FactorNegRight</span> {<span class="id" title="var">A</span>} `(<span class="id" title="var">Negate</span> <span class="id" title="var">A</span>) `(<span class="id" title="var">SgOp</span> <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">factorneg_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">sg_op</span> <span class="id" title="var">x</span> (-<span class="id" title="var">y</span>) = - (<span class="id" title="var">sg_op</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">LeftHeteroDistribute</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span>) (<span class="id" title="var">g_r</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">B</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">C</span> -&gt; <span class="id" title="var">C</span>) : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">distribute_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">f</span> <span class="id" title="var">a</span> (<span class="id" title="var">g_r</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>) = <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) (<span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>).<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">RightHeteroDistribute</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">C</span>) (<span class="id" title="var">g_l</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">C</span> -&gt; <span class="id" title="var">C</span> -&gt; <span class="id" title="var">C</span>) : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">distribute_r</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">f</span> (<span class="id" title="var">g_l</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) <span class="id" title="var">c</span> = <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>) (<span class="id" title="var">f</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>).<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">LeftDistribute</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">f</span> <span class="id" title="var">g</span>: <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">simple_distribute_l</span> : <span class="id" title="var">LeftHeteroDistribute</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">g</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="var">Existing</span> <span class="id" title="var">Instances</span> <span class="id" title="var">simple_distribute_l</span>.<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">RightDistribute</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">f</span> <span class="id" title="var">g</span>: <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">simple_distribute_r</span> : <span class="id" title="var">RightHeteroDistribute</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">g</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="var">Existing</span> <span class="id" title="var">Instances</span> <span class="id" title="var">simple_distribute_r</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">HeteroSymmetric</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">T</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">R</span> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span>}, <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> -&gt; <span class="id" title="var">T</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="keyword">Type</span>) : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">hetero_symmetric</span> `(<span class="id" title="var">a</span> : <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">T</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>) : <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">R</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Although&nbsp;cancellation&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;being&nbsp;injective,&nbsp;we&nbsp;want&nbsp;a&nbsp;proper<br/>
&nbsp;&nbsp;name&nbsp;to&nbsp;refer&nbsp;to&nbsp;this&nbsp;commonly&nbsp;used&nbsp;property.&nbsp;*)</span><br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">cancellation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `(<span class="id" title="var">op</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">A</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <span class="id" title="var">LeftCancellation</span> := <span class="id" title="var">left_cancellation</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">op</span> <span class="id" title="var">z</span> <span class="id" title="var">x</span> = <span class="id" title="var">op</span> <span class="id" title="var">z</span> <span class="id" title="var">y</span> -&gt; <span class="id" title="var">x</span> = <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <span class="id" title="var">RightCancellation</span> := <span class="id" title="var">right_cancellation</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">op</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span> = <span class="id" title="var">op</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> -&gt; <span class="id" title="var">x</span> = <span class="id" title="var">y</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">Aap</span> : <span class="id" title="var">Apart</span> <span class="id" title="var">A</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <span class="id" title="var">StrongLeftCancellation</span> := <span class="id" title="var">strong_left_cancellation</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">x</span> ≶ <span class="id" title="var">y</span> -&gt; <span class="id" title="var">op</span> <span class="id" title="var">z</span> <span class="id" title="var">x</span> ≶ <span class="id" title="var">op</span> <span class="id" title="var">z</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <span class="id" title="var">StrongRightCancellation</span> := <span class="id" title="var">strong_right_cancellation</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">x</span> ≶ <span class="id" title="var">y</span> -&gt; <span class="id" title="var">op</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span> ≶ <span class="id" title="var">op</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">cancellation</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Common&nbsp;names&nbsp;for&nbsp;properties&nbsp;that&nbsp;hold&nbsp;in&nbsp;N,&nbsp;Z,&nbsp;Q,&nbsp;...&nbsp;*)</span><br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">ZeroProduct</span> <span class="id" title="var">A</span> `{!<span class="id" title="var">Mult</span> <span class="id" title="var">A</span>} `{!<span class="id" title="var">Zero</span> <span class="id" title="var">A</span>} : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">zero_product</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">x</span> * <span class="id" title="var">y</span> = 0 -&gt; <span class="id" title="var">x</span> = 0 |<span class="id" title="var">_</span>| <span class="id" title="var">y</span> = 0.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">ZeroDivisor</span> {<span class="id" title="var">R</span>} `{<span class="id" title="var">Zero</span> <span class="id" title="var">R</span>} `{<span class="id" title="var">Mult</span> <span class="id" title="var">R</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">R</span>) : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">zero_divisor</span> : <span class="id" title="var">x</span> &lt;&gt; 0 /\ <span class="id" title="tactic">exists</span> <span class="id" title="var">y</span>, <span class="id" title="var">y</span> &lt;&gt; 0 /\ <span class="id" title="var">x</span> * <span class="id" title="var">y</span> = 0.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">NoZeroDivisors</span> <span class="id" title="var">R</span> `{<span class="id" title="var">Zero</span> <span class="id" title="var">R</span>} `{<span class="id" title="var">Mult</span> <span class="id" title="var">R</span>} : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">no_zero_divisors</span> <span class="id" title="var">x</span> : ~<span class="id" title="var">ZeroDivisor</span> <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">zero_product_no_zero_divisors</span> `{<span class="id" title="var">ZeroProduct</span> <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">NoZeroDivisors</span> <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> [? [? [? <span class="id" title="var">E</span>]]].<br/>
<span class="id" title="tactic">destruct</span> (<span class="id" title="var">zero_product</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">E</span>); <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;A&nbsp;common&nbsp;induction&nbsp;principle&nbsp;for&nbsp;both&nbsp;the&nbsp;naturals&nbsp;and&nbsp;integers&nbsp;*)</span><br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Biinduction</span> <span class="id" title="var">R</span> `{<span class="id" title="var">Zero</span> <span class="id" title="var">R</span>} `{<span class="id" title="var">One</span> <span class="id" title="var">R</span>} `{<span class="id" title="var">Plus</span> <span class="id" title="var">R</span>} : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">biinduction</span> (<span class="id" title="var">P</span> : <span class="id" title="var">R</span> -&gt; <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">P</span> 0 -&gt; (<span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, <span class="id" title="var">P</span> <span class="id" title="var">n</span> &lt;-&gt; <span class="id" title="var">P</span> (1 + <span class="id" title="var">n</span>)) -&gt; <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, <span class="id" title="var">P</span> <span class="id" title="var">n</span>.<br/>

<br/>
</div>

<div class="doc">
Additional operations 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <span class="id" title="var">CutMinus</span> <span class="id" title="var">A</span> := <span class="id" title="var">cut_minus</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Infix</span> &quot;∸" := <span class="id" title="var">cut_minus</span> : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(∸)" := <span class="id" title="var">cut_minus</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;( x ∸)" := (<span class="id" title="var">cut_minus</span> <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(∸ y )" := (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">x</span> ∸ <span class="id" title="var">y</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">comparison</span> : <span class="id" title="keyword">Set</span> := <span class="id" title="var">LT</span> | <span class="id" title="var">EQ</span> | <span class="id" title="var">GT</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Compare</span> <span class="id" title="var">A</span> := <span class="id" title="var">compare</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">comparison</span>.<br/>
<span class="id" title="keyword">Infix</span> &quot;?=" := <span class="id" title="var">compare</span> : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(?=)" := <span class="id" title="var">compare</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;( x ?=)" := (<span class="id" title="var">compare</span> <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(?= y )" := (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">x</span> ?= <span class="id" title="var">y</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Eqb</span> <span class="id" title="var">A</span> := <span class="id" title="var">eqb</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">Bool</span>.<br/>
<span class="id" title="keyword">Infix</span> &quot;=?" := <span class="id" title="var">eqb</span> : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(=?)" := <span class="id" title="var">eqb</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;( x =?)" := (<span class="id" title="var">eqb</span> <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(=? y )" := (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">x</span> =? <span class="id" title="var">y</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Ltb</span> <span class="id" title="var">A</span> := <span class="id" title="var">ltb</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">Bool</span>.<br/>
<span class="id" title="keyword">Infix</span> &quot;&lt;?" := <span class="id" title="var">ltb</span> : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(&lt;?)" := <span class="id" title="var">ltb</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;( x &lt;?)" := (<span class="id" title="var">ltb</span> <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(&lt;? y )" := (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">x</span> &lt;? <span class="id" title="var">y</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Leb</span> <span class="id" title="var">A</span> := <span class="id" title="var">leb</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">Bool</span>.<br/>
<span class="id" title="keyword">Infix</span> &quot;&lt;=?" := <span class="id" title="var">leb</span> : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(&lt;=?)" := <span class="id" title="var">leb</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;( x &lt;=?)" := (<span class="id" title="var">leb</span> <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;(&lt;=? y )" := (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">x</span> &lt;=? <span class="id" title="var">y</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">mc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Return</span> (<span class="id" title="var">M</span> : <span class="id" title="keyword">Type</span> -&gt; <span class="id" title="keyword">Type</span>) := <span class="id" title="var">ret</span> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span>}, <span class="id" title="var">A</span> -&gt; <span class="id" title="var">M</span> <span class="id" title="var">A</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="keyword">Bind</span> (<span class="id" title="var">M</span> : <span class="id" title="keyword">Type</span> -&gt; <span class="id" title="keyword">Type</span>) := <span class="id" title="var">bind</span> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}, <span class="id" title="var">M</span> <span class="id" title="var">A</span> -&gt; (<span class="id" title="var">A</span> -&gt; <span class="id" title="var">M</span> <span class="id" title="var">B</span>) -&gt; <span class="id" title="var">M</span> <span class="id" title="var">B</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Enumerable@</span>{<span class="id" title="var">i</span>} (<span class="id" title="var">A</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}) :=<br/>
&nbsp;&nbsp;{ <span class="id" title="var">enumerator</span> : <span class="id" title="var">nat</span> -&gt; <span class="id" title="var">A</span><br/>
&nbsp;&nbsp;; <span class="id" title="var">enumerator_issurj</span> : <span class="id" title="var">IsSurjection</span> <span class="id" title="var">enumerator</span> }.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">enumerator_issurj</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">enumerator</span> <span class="id" title="var">A</span> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">enumerator_issurj</span> <span class="id" title="var">A</span> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span>.<br/>

<br/>
<span class="comment">(*<br/>
&nbsp;&nbsp;The&nbsp;following&nbsp;class&nbsp;is&nbsp;nice&nbsp;to&nbsp;parametrize&nbsp;instances&nbsp;by&nbsp;additional&nbsp;properties,&nbsp;for&nbsp;example:<br/>
&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="keyword">forall</span></span> <span class="inlinecode"><span class="id" title="var">z</span>,</span> <span class="inlinecode"><span class="id" title="var">PropHolds</span></span> <span class="inlinecode">(<span class="id" title="var">z</span></span> <span class="inlinecode">&lt;&gt;</span> <span class="inlinecode">0)</span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">LeftCancellation</span></span> <span class="inlinecode"><span class="id" title="var">op</span></span> <span class="inlinecode"><span class="id" title="var">z</span></span><br/>
&nbsp;&nbsp;This&nbsp;tool&nbsp;is&nbsp;very&nbsp;powerful&nbsp;as&nbsp;we&nbsp;can&nbsp;combine&nbsp;it&nbsp;with&nbsp;instances&nbsp;as:<br/>
&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="keyword">forall</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">y</span>,</span> <span class="inlinecode"><span class="id" title="var">PropHolds</span></span> <span class="inlinecode">(<span class="id" title="var">x</span></span> <span class="inlinecode">&lt;&gt;</span> <span class="inlinecode">0)</span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">PropHolds</span></span> <span class="inlinecode">(<span class="id" title="var">y</span></span> <span class="inlinecode">&lt;&gt;</span> <span class="inlinecode">0)</span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">PropHolds</span></span> <span class="inlinecode">(<span class="id" title="var">x</span></span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode">&lt;&gt;</span> <span class="inlinecode">0)</span><br/>
&nbsp;&nbsp;Of&nbsp;course,&nbsp;one&nbsp;should&nbsp;be&nbsp;very&nbsp;careful&nbsp;not&nbsp;to&nbsp;make&nbsp;too&nbsp;many&nbsp;instances&nbsp;as&nbsp;that&nbsp;could<br/>
&nbsp;&nbsp;easily&nbsp;lead&nbsp;to&nbsp;a&nbsp;blow-up&nbsp;of&nbsp;the&nbsp;search&nbsp;space&nbsp;(or&nbsp;worse,&nbsp;cycles).<br/>
*)</span><br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">PropHolds</span> (<span class="id" title="var">P</span> : <span class="id" title="keyword">Type</span>) := <span class="id" title="var">prop_holds</span>: <span class="id" title="var">P</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Extern</span> 0 (<span class="id" title="var">PropHolds</span> <span class="id" title="var">_</span>) =&gt; <span class="id" title="tactic">assumption</span> : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">solve_propholds</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ |- <span class="id" title="var">PropHolds</span> (?<span class="id" title="var">P</span>) ] =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;| [ |- ?<span class="id" title="var">P</span> ] =&gt; <span class="id" title="tactic">change</span> (<span class="id" title="var">PropHolds</span> <span class="id" title="var">P</span>); <span class="id" title="tactic">apply</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>